<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css">
  <script src='../bbs.js'></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120820034-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-120820034-1');
  </script>

  <link href="../bbs.css" type="text/css" rel="stylesheet">
  <link rel="shortcut icon" href="favicon.ico">
  <title>文字コードの自動認識(XML) | サクラエディタ過去ログ</title>
</head>
<body>
<ul class="side">
        <a href="./" class="toindex">◀一般トップへ</a>
        <li><div class="list-title">
    <span class="no">5292</span>
    <a class="thread-title" href="5292.html#5292">文字コードの自動認識(XML)</a></div>
    <ul><li><div class="list-title">
    <span class="no">5299</span>
    <a class="thread-title" href="5292.html#5299">RE: 文字コードの自動認識(XML)</a></div>
    <ul><li><div class="list-title">
    <span class="no">5302</span>
    <a class="thread-title" href="5292.html#5302">RE2: 文字コードの自動認識</a></div>
    <ul><li><div class="list-title">
    <span class="no">5310</span>
    <a class="thread-title" href="5292.html#5310">RE3: 文字コードの自動認識</a></div>
    <ul><li><div class="list-title">
    <span class="no">5311</span>
    <a class="thread-title" href="5292.html#5311">RE4: 文字コードの自動認識</a></div>
    <ul><li><div class="list-title">
    <span class="no">5314</span>
    <a class="thread-title" href="5292.html#5314">Re5: 文字コードの自動認識</a></div>
    <ul><li><div class="list-title">
    <span class="no">5318</span>
    <a class="thread-title" href="5292.html#5318">Re6: 文字コードの自動認識</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">5300</span>
    <a class="thread-title" href="5292.html#5300">解説と要望</a></div>
    <ul><li><div class="list-title">
    <span class="no">5339</span>
    <a class="thread-title" href="5292.html#5339">Re:解説と要望</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">5307</span>
    <a class="thread-title" href="5292.html#5307">Re: 文字コードの自動認識(XML)</a></div>
    </li><li><div class="list-title">
    <span class="no">5312</span>
    <a class="thread-title" href="5292.html#5312">Re:文字コードの自動認識(XML)</a></div>
    </li><li><div class="list-title">
    <span class="no">5315</span>
    <a class="thread-title" href="5292.html#5315">Re:文字コードの自動認識(XML)</a></div>
    </li><li><div class="list-title">
    <span class="no">5316</span>
    <a class="thread-title" href="5292.html#5316">Re:文字コードの自動認識(XML)</a></div>
    </li></ul></li>
    </ul><ul class="main"><li><section><h1 id=5292>
    <span class="no">[5292]</span>
    <a class="thread-title" href="#5292">文字コードの自動認識(XML)</a>
    <span class="author">トーリス・ガリー</span>
    <time datetime="2006-06-26T13:53:26">2006年06月26日 13:53</time></h1>
    <div class="body">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>XMLの文字コードの認識でこれくらいは自動で認識してほしいのですが、<br>サクラエディタはヘッダを見ていないのでしょうか？<br><br>「前回と異なる文字コードのとき問い合わせを行う」<br>オプションをチェックすると認識して正しく開けます。<br>（但しダイアログが一々出てウザイですが）<br>でもこのオプションをはずすと自動認識してくれません。<br>なぜでしょうか。<br></div></section>
    <ul><li><section><h1 id=5299>
    <span class="no">[5299]</span>
    <a class="thread-title" href="#5299">RE: 文字コードの自動認識(XML)</a>
    <span class="author">すい</span>
    <time datetime="2006-06-27T22:49:11">2006年06月27日 22:49</time></h1>
    <div class="body">&gt;タイトル: RE: 文字コードの自動認識(XML)<br>&gt;発言者: トーリス・ガリー<br>&gt;&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&gt;XMLの文字コードの認識でこれくらいは自動で認識してほしいのですが、<br>&gt;サクラエディタはヘッダを見ていないのでしょうか？<br><br>見るわけないでしょう。 (--;)<br>XML 編集専用のユーティリティとかなら「そういう物を認識する」<br>というのは当然アリでしょうけど。<br><br>これは汎用のテキスト用エディタですよ。<br>そんな文字列を文字コード判定に使用したりすると、例えば、<br><br>「文字コード UTF-8 で XML を記述する時は<br>　&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>　と記述しておきます。」<br><br>だとかの解説文が EUC のテキスト文で書かれていたらどうなります？<br>その EUC のテキスト文を「 UTF-8 である」と誤認識してしまうのでは？<br><br>汎用のテキスト用エディタである以上、編集対象のテキスト文中に<br>何という文章が記述されていようが、そんな物は一切あてにならない、<br>下手に文字列を認識したりすると かえって文字コード誤認識の元凶に<br>すらなり得る、純粋にテキスト文中に使用されている文字を見て<br>文字コードを推定する以外に手は無い、<br>というわけで、サクラエディタはそうなっています。<br><br>&gt;「前回と異なる文字コードのとき問い合わせを行う」<br>&gt;オプションをチェックすると認識して正しく開けます。<br>&gt;（但しダイアログが一々出てウザイですが）<br>&gt;でもこのオプションをはずすと自動認識してくれません。<br>&gt;なぜでしょうか。<br><br>そのテキスト文中に文字コードを判別するための手掛かりになるような<br>文字が存在しない、とかの理由で、あなたが期待通している文字コード<br>のファイルとして自動認識できない、とかでは？<br><br>例えば UTF-8 で通常の半角英数記号文字しか使っていない、<br>日本語文字が含まれていない、といった場合、そのファイルは<br>Shift_JIS のファイルと全く違いがありませんから。<br><br>自動認識の機能は、文字コードを特定出来るような特徴ある文字が何も<br>無い場合にはデフォルトの Shift_JIS とみなしますから。<br></div></section>
    <ul><li><section><h1 id=5302>
    <span class="no">[5302]</span>
    <a class="thread-title" href="#5302">RE2: 文字コードの自動認識</a>
    <span class="author">じゅうじ</span>
    <time datetime="2006-06-28T06:04:10">2006年06月28日 06:04</time></h1>
    <div class="body">出荷時のデフォルトは、選択肢１．ユーザーに問い合わせる。<br>　使う優先順位が高いと思われるのが、選択肢１＞２＞３の順。<br>選択肢３はほとんど意味が無い、なぜなら、前回指定した文字コードで、既にファイルを閉じている訳だけど、文字コードをユーザーが誤ってしまった可能性が有る、そこで、警告してくれる、選択肢１にして置く方がいい。<br>　それに、選択肢３だと、自動認識の出番が無くなる。もともと、このチェックボックスは、自動認識と保存時のどちらを優先させるかで、それが異なっていた場合に保存時の方を優先させるなら、初めから比較自体に意味が無い。<br>　元々、なぜ、文字コードの混じったファイルを編集するのか、意味が解らない。自動認識の誤認対策かも。ユーザーが自分で認識するらしい．．．。　個人的には、自動認識をインラインマクロのような実装で、変更出来るようにならないか。</div></section>
    <ul><li><section><h1 id=5310>
    <span class="no">[5310]</span>
    <a class="thread-title" href="#5310">RE3: 文字コードの自動認識</a>
    <span class="author">すい</span>
    <time datetime="2006-06-29T02:01:12">2006年06月29日 02:01</time></h1>
    <div class="body">&gt;出荷時のデフォルトは、選択肢１．ユーザーに問い合わせる。<br>私もデフォルト設定は↑これが良いと思います。一番 無難かと。<br><br>&gt;　使う優先順位が高いと思われるのが、選択肢１＞２＞３の順。<br><br>2,3どちらが良いかは、その時の作業内容に依存するでしょう。<br><br>そもそも自動認識というのは誤認識する物です。<br>念のため言っておきますが、私はサクラエディタの自動認識の<br>精度はかなり高いと思っていますし、性能に不満は有りません。<br><br>しかしながら、どんなに性能が良い自動認識であっても原理的・理論的に<br>目的の（エディタで作業する人間が望むような）文字コードのファイル<br>として認識する事が出来ないファイルがあります。<br><br>極端な話が &gt;&gt;data:5299 で私が言ったような、半角英数記号文字しか<br>使われていない UTF-8 のファイル。Shift_JIS のファイルと違い<br>ありませんから、それを自動認識で「UTF-8 のファイルと認識しろ」<br>というのは無理。<br>他にも識別不可能・困難なファイルはいくらでもあります。<br><br>で、その手の自動認識では文字コードを判別する事が困難なファイルを<br>エディタで編集していると、自動認識は誤認識の嵐となってしまいます。<br><br>で、そのような場合、「もぅ、自動認識なんてoffにしてくれ～～。<br>過去に編集した時の文字コード覚えてるんだろぅがぁ！！」と<br>なるわけで。<br><br>で、ここからは推測ですが、書き込みの元のトーリス・ガリーさんも<br>そういう状況になってしまっているのだと思います。<br>取り扱っているファイルが UTF-8 のファイルなのだけれども、<br>自動認識では UFT-8 とは認識しづらいファイルで、Shift_JIS と<br>誤認識しまくっている。<br><br>で、「前回と異なる文字コードのとき問い合わせを行う」をoff、<br>つまり強制的に自動認識の結果で開く設定だと、誤認識された<br>Shift_JIS として開かれてしまう。<br>↑この状況を「自動認識していない」と誤解されている。<br><br>「前回と異なる文字コードのとき問い合わせを行う」をonにすると<br>ダイアログで<br>・UTF-8 (前回使っていた文字コード)<br>・Shift_JIS (自動認識の結果)<br>どちらで開くか聞いてくるので UTF-8 で開けと答えている。<br>↑この UTF-8 の方を「自動認識された結果」と誤解されている。<br><br>という状況なのではないかと。<br>で、ダイアログなんて出さずに UTF-8 として開いてくれ～と<br>願っているのでは？（実際には自動認識を使わずに<br>前回の文字コード使ってくれ、という事なわけですが）<br><br>あくまで私の推測ですが。<br><br>ただ、現実に取り扱うファイルによっては上記のような状況が<br>良く起こります。<br><br>&gt;　それに、選択肢３だと、自動認識の出番が無くなる。<br>出番はあります。<br>開いた記録がないファイルを開くときは自動認識が働くわけですから。<br>それでうまく文字コードが認識されればラッキーです。<br><br>ただ、自動認識で誤認識し易いファイルを扱っている場合、過去に<br>開いた事があるファイルなら その時の文字コード使ってくれ、<br>自動認識は邪魔なだけだからoffにしてくれ、というだけで。<br></div></section>
    <ul><li><section><h1 id=5311>
    <span class="no">[5311]</span>
    <a class="thread-title" href="#5311">RE4: 文字コードの自動認識</a>
    <span class="author">すい</span>
    <time datetime="2006-06-29T02:14:05">2006年06月29日 02:14</time></h1>
    <div class="body">&gt;　使う優先順位が高いと思われるのが、選択肢１＞２＞３の順。<br><br>逆に選択肢２．が必要な場合というのが結構レアだと思います。<br><br>例えば、C:\DATA\DATA.TXT というファイルを最初に開いた時は<br>Shift_JIS だった。<br>それを閉じて暫くしてから、またそのファイル C:\DATA\DATA.TXT<br>を開いたら、何時の間にか勝手に EUC のファイルに変わっていた。<br>またそのファイルを閉じて暫くして開きなおすと、今度は<br>JIS のファイルに変わっていた。<br><br>そんな感じですよね、選択肢２．が便利な場合って。<br>こういう状況って そうはないと思うのですが。<br><br>いや、実は私はモロにそういう状況で使う事もあるのですが、(汗)<br>それはかなりレアで特殊な使い方で、世の中、他にこういう<br>作業やっている人なんて殆ど居ないだろうな～、と思うわけで。<br><br>&gt;　元々、なぜ、文字コードの混じったファイルを編集するのか、意味が解らない。<br><br>「文字コードの混じったファイルを編集」って、どういう話でしょう？<br>その類の話、誰もしていないと思うのですが。<br></div></section>
    <ul><li><section><h1 id=5314>
    <span class="no">[5314]</span>
    <a class="thread-title" href="#5314">Re5: 文字コードの自動認識</a>
    <span class="author">じゅうじ</span>
    <time datetime="2006-06-30T07:39:42">2006年06月30日 07:39</time></h1>
    <div class="body">&gt; &gt;　元々、なぜ、文字コードの混じったファイルを編集するのか、意味が解らない。<br>&gt; <br>&gt; 「文字コードの混じったファイルを編集」って、どういう話でしょう？<br>&gt; その類の話、誰もしていないと思うのですが。<br><br>ところで、コマンドラインオプションで、 -CODE=n を付けて、ショートカットを作っておけばいいと思うけど。<br>それも駄目で、これはどうかと。<br>&gt;&gt;data:5020<br><br>それに、ラジオボタン３つじゃなくても、チェックボックス２個でも…。</div></section>
    <ul><li><section><h1 id=5318>
    <span class="no">[5318]</span>
    <a class="thread-title" href="#5318">Re6: 文字コードの自動認識</a>
    <span class="author">すい</span>
    <time datetime="2006-07-01T14:33:36">2006年07月01日 14:33</time></h1>
    <div class="body">&gt;タイトル: Re6: 文字コードの自動認識<br>&gt;発言者: じゅうじ<br>&gt;&gt; &gt;　元々、なぜ、文字コードの混じったファイルを編集するのか、意味が解らない。<br>&gt;&gt; <br>&gt;&gt; 「文字コードの混じったファイルを編集」って、どういう話でしょう？<br>&gt;&gt; その類の話、誰もしていないと思うのですが。<br>&gt;<br>&gt;ところで、コマンドラインオプションで、 -CODE=n を付けて、ショートカットを作っておけばいいと思うけど。<br>&gt;それも駄目で、これはどうかと。<br>&gt;&gt;&gt;data:5020<br><br>何故こんな全く何の関係も無い話がいきなり出てきているのですか？<br>話が混乱するだけだと思いますが。<br><br>&gt;それに、ラジオボタン３つじゃなくても、チェックボックス２個でも…。<br><br># こちらは具体的にどういう設定項目を想定されているのか検討が<br># つきませんのでノーコメント。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=5300>
    <span class="no">[5300]</span>
    <a class="thread-title" href="#5300">解説と要望</a>
    <span class="author">すい</span>
    <time datetime="2006-06-27T23:23:53">2006年06月27日 23:23</time></h1>
    <div class="body">&gt;「前回と異なる文字コードのとき問い合わせを行う」<br>&gt;オプションをチェックすると認識して正しく開けます。<br><br>↑この辺については、質問が来ているのは この設定の意味が<br>分かり難いせいもあるのではないか、と思いましたので、<br>・この設定項目の解説<br>・この設定項目を分かり易くして欲しい、という要望<br>を以下にまとめておきます。<br><br>このエディタは過去に編集したファイル名を記録しています。<br># メニューの<br># 設定(O) → お気に入りの設定(O) → [ファイル] タブ、とか<br># ファイル(F) → 最近使ったファイル(F) 、とか。<br><br>また、そのファイルを編集した時の文字コードも一緒に記憶されています。<br><br>で、再び そのファイルを開いた時、この時も必ず文字コードの<br>自動認識機能が動作して文字コードを判別し直すのですが、その時、<br>「自動認識の結果」と「過去編集時の文字コード」とが食い違う事が<br>ありえるわけです。<br><br><br>そのような場合に選択肢としては<br><br>選択肢１．「過去編集時の文字コード」を信頼して開くか<br>　　　　　「自動認識の結果」を信頼して開くか、をユーザーに問い合わせる。<br><br>選択肢２．常に「自動認識の結果」を信頼して開く。<br><br>選択肢３．常に「過去編集時の文字コード」を信頼して開く。<br><br>の３通りの動作が考えられますよね。<br><br><br>で、共通設定 → [ファイル] タブ中の<br>「前回と異なる文字コードのとき問い合わせを行う(Q)」の設定は、<br><br>チェック on  の時：上記の選択肢１． 問い合わせる<br>チェック off の時：上記の選択肢２． 「自動認識の結果」を信頼<br><br>という動作になるわけです。ちなみに上記の選択肢３．の動作には出来ません。<br><br><br>でも、この設定項目、意味が非常に分かり難い。<br><br>チェックon時は上記選択肢１．になる事は まぁ一目で分かりますが、<br>チェックoffにした時の動作はどうなるのか？ が、一般人には<br>設定項目を眺めただけでは不明。（選択肢２になるの？３になるの？）<br><br>というか、そもそも「何が」前回と異なる文字コードのときのお話しなの？<br>という事 自体が分かりにくい。<br>「何」＝「自動認識の結果」という事が設定項目を見ただけでは分からない。<br>今回のように「自動認識されなくなる」とか誤解を生む事も。<br><br>私としては<br><br>| 文字コードの自動認識が前回と異なる文字コードのとき<br>| ○問い合わせる　　○自動認識の文字コードで開く　　○前回の文字コードで開く<br><br>のような３択のラジオボタンとかにして欲しいです。 m(_ _)m<br><br># で、私 個人的には「前回の文字コードで開く」で使うかな～、と。<br></div></section>
    <ul><li><section><h1 id=5339>
    <span class="no">[5339]</span>
    <a class="thread-title" href="#5339">Re:解説と要望</a>
    <span class="author">じゅうじ</span>
    <time datetime="2006-07-10T15:05:06">2006年07月10日 15:05</time></h1>
    <div class="body">▼ すいさん<br>メニューの文章が分かりずらいので、書き方を換えるだけで<br>かなり質問が減ると思います。<br><br>共通設定→ファイルタブ→ファイルオープン<br>□ 前回と異なる文字コードのとき問合せを行う<br>　　↓文章幅40バイト⇒60バイト<br>□ 文字コード判定をして、前回の文字コードと異なる時問い合わせる<br>　（文字コード判定は、全てのファイルオープンで行う）<br></div></section>
    </li></ul></li><li><section><h1 id=5307>
    <span class="no">[5307]</span>
    <a class="thread-title" href="#5307">Re: 文字コードの自動認識(XML)</a>
    <span class="author">げんた</span>
    <time datetime="2006-06-28T08:53:49">2006年06月28日 08:53</time></h1>
    <div class="body">&gt;「前回と異なる文字コードのとき問い合わせを行う」<br>&gt;オプションをチェックすると認識して正しく開けます。<br>&gt;（但しダイアログが一々出てウザイですが）<br>&gt;でもこのオプションをはずすと自動認識してくれません。<br>そもそもですが...UTF-8の自動認識があまり賢くないのが問題という気もします．<br>UTF-8の自動認識で漢字を見ていないという報告もありますし．<br></div></section>
    </li><li><section><h1 id=5312>
    <span class="no">[5312]</span>
    <a class="thread-title" href="#5312">Re:文字コードの自動認識(XML)</a>
    <span class="author">ラスティブ</span>
    <time datetime="2006-06-29T04:27:08">2006年06月29日 04:27</time></h1>
    <div class="body">▼ トーリス・ガリーさん<br>&gt; &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&gt; XMLの文字コードの認識でこれくらいは自動で認識してほしいのですが、<br>&gt; サクラエディタはヘッダを見ていないのでしょうか？<br><br>たとえばファイルの拡張子が .xml の場合には，<br>XML の構文にしたがってヘッダ部分を解析し，<br>文字コードを判別する機能をつけて欲しいってことですよね？<br><br>すいさんの仰るように自動認識だけでは限界がありますし，<br>サクラエディタのインターネット関連の開発や管理もサポートする開発用エディタとしての側面を鑑みれば，<br>実装されてもおかしくはないです…が，単に面倒だから実装されないかもですね．<br><br>ちなみに，すいさんの提案する選択肢を実装するなら，<br>文字コードを自動認識して欲しくないファイルがあるというわけですから，<br>自動認識処理をする，しないの情報を「最近開いたファイル」の履歴に保管しておくほうがいい気がします．<br>多くの場合は自動認識処理させても問題ないわけですし．<br></div></section>
    </li><li><section><h1 id=5315>
    <span class="no">[5315]</span>
    <a class="thread-title" href="#5315">Re:文字コードの自動認識(XML)</a>
    <span class="author">トレイ</span>
    <time datetime="2006-06-30T15:58:40">2006年06月30日 15:58</time></h1>
    <div class="body">▼ トーリス・ガリーさん<br>&gt; &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&gt; XMLの文字コードの認識でこれくらいは自動で認識してほしいのですが、<br>&gt; サクラエディタはヘッダを見ていないのでしょうか？<br><br>これ↑以前に私も思いました。<br><br>「汎用テキストエディタなんで、<br>  XML処理宣言をチェックする<br>  高度なことはできなくても<br>  まーしかたないよなー」<br><br>と思ってあきらめてました。<br><br>この動作があったらなーと思ったのは、<br>あるシステムのXML設定ファイルがUTF-8で、<br>XMLの中身がたまたまAscii文字オンリーな状態の時、<br>サクラで日本語打って保存したらS-JISファイルとして<br>保存されてしまい、トラブルの元になってしまった・・・<br>なんてことがあったからです。<br>正直確認が足らなかったのが悪いのですが(;^_^A、<br><br>たしかPeggyは、XML処理宣言をチェックして<br>開いてくれるんですよねー。<br>これが羨ましかった・・・んです。(T_T)<br>というかPeggy使いに「誤認するの？」なーんて<br>馬鹿にされたんです！！(T_T)<br><br>「XML宣言」って必ず先頭行にある決まり<br>だったと思うので、サクラが自動認識で<br>Asciiかな？と判断した時は、先頭行に<br>XML処理宣言があればencoding属性を見て<br>開いてくれる！なんてスッゲー機能が<br>あれば最高！<br>オプションでも良いので対応してくれたら<br>密かに喜ぶ人いるのではと思ったりします。<br></div></section>
    </li><li><section><h1 id=5316>
    <span class="no">[5316]</span>
    <a class="thread-title" href="#5316">Re:文字コードの自動認識(XML)</a>
    <span class="author">トーリス・ガリー</span>
    <time datetime="2006-07-01T13:16:50">2006年07月01日 13:16</time></h1>
    <div class="body">みなさん色々返信ありがとうございました。<br><br>XML対応のツールも使うこともありますが、<br>気軽に開いて直せるサクラは重宝しています。<br>（マクロとか便利だし）<br><br>現在はXMLのヘッダは見ていないということですね。<br>自動認識としての汎用性を保とうとすると<br>げんたさんがおっしゃるように認識精度の問題になるんですね。<br><br>トレイさんの発言にもあるように、簡易的でもよいので<br>XMLファイルのときはヘッダ優先で見る～なんて機能が追加されると<br>良いと思いました。<br><br>＃サクラエディタでXMLを編集する人は少数派ですかね？<br></div></section>
    </li></ul></li></ul></body></html>