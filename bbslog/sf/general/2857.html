<!DOCTYPE html><html><head><meta charset='utf-8'><title>改行置換について</title><link rel='stylesheet' href='bbs.css' /><script src='bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←一般トップへ</a><li><div class="list-title">
    <span class="no">2857</span>
    <a class="title" href="2857.html#2857">改行置換について</a></div>
    <ul><li><div class="list-title">
    <span class="no">2858</span>
    <a class="title" href="2857.html#2858">Re:改行置換について</a></div>
    <ul><li><div class="list-title">
    <span class="no">2860</span>
    <a class="title" href="2857.html#2860">Re2:改行置換について</a></div>
    <ul><li><div class="list-title">
    <span class="no">2862</span>
    <a class="title" href="2857.html#2862">Re3:改行置換について</a></div>
    <ul><li><div class="list-title">
    <span class="no">2863</span>
    <a class="title" href="2857.html#2863">Re4:改行置換について</a></div>
    <ul><li><div class="list-title">
    <span class="no">2867</span>
    <a class="title" href="2857.html#2867">Re5:改行置換について</a></div>
    <ul><li><div class="list-title">
    <span class="no">2868</span>
    <a class="title" href="2857.html#2868">Re6:改行置換について</a></div>
    </li><li><div class="list-title">
    <span class="no">2900</span>
    <a class="title" href="2857.html#2900">Re6:改行置換について</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=2857>
    <span class="no">[2857]</span>
    <a class="title" href="#2857">改行置換について</a>
    <span class="author">comb</span>
    <time datetime="2003-04-07T12:11:56">2003年04月07日 12:11</time></h1>
    <div class="body">改行の置換に正規表現を用いて<br>\r\n-&gt;xxx<br>としたときにきちんと置換は出来ているようなのですが<br>無限に置換を行っているような状態になり<br>キャンセルしないと終了できません<br><br>1.3.8.2です</div></section>
    <ul><li><section><h1 id=2858>
    <span class="no">[2858]</span>
    <a class="title" href="#2858">Re:改行置換について</a>
    <span class="author">MMX</span>
    <time datetime="2003-04-07T15:10:04">2003年04月07日 15:10</time></h1>
    <div class="body">１行の最大長を越える結果になっていませんか。<br>普通のテキスト指向のエディタには限界があります。<br>長い行を表示すると、スクロールが極端に遅く<br>なったりとか、副作用も多数おきます。<br></div></section>
    <ul><li><section><h1 id=2860>
    <span class="no">[2860]</span>
    <a class="title" href="#2860">Re2:改行置換について</a>
    <span class="author">comb</span>
    <time datetime="2003-04-07T17:31:38">2003年04月07日 17:31</time></h1>
    <div class="body">▼ MMXさん<br>&gt; １行の最大長を越える結果になっていませんか。<br>なっていません。表現が分かりにくいかも知れませんが<br>下のような状態でも無限に置換作業を行ってしまうのです。<br>うちの環境だけ？(ME)<br>_______<br>a<br>b<br>c<br>[eof]<br>_______<br><br>キャンセルすると<br>_________<br>abc[eof]<br><br><br>_________<br>みたいな感じにはなっています。</div></section>
    <ul><li><section><h1 id=2862>
    <span class="no">[2862]</span>
    <a class="title" href="#2862">Re3:改行置換について</a>
    <span class="author">すい</span>
    <time datetime="2003-04-07T23:15:26">2003年04月07日 23:15</time></h1>
    <div class="body">本件は既知の不具合です。<br>過去(2002/5:No.1951)にも もう少し詳しく<br>「[EOF]の位置（[EOF]の前に改行があるかどうか）で現象が出る/出ない」<br>とか報告されていますし、それ以後も何度か報告されています。<br>しかしながら本不具合などを直せる人がいないのでそのままになっています。<br><br>ソースを見て修正して頂けると幸いです．．．が、それが出来ないようでしたら<br>残念ながら諦めて他の手段でやってください、としか言いようがないのが現状です。<br># 他のソフトを使うとか、どうしてもサクラエディタでやりたいならマクロを使うとか．．．<br><br>この件に限らず、正規表現での行頭,行末,改行がらみの検索・置換は色々不具合があります。<br>その辺（不具合かある事）を念頭において使って、不具合が出たら諦めて別の方法でやってね、<br>としか言いようがないな、と。<br>直せる方がいらっしゃるとユーザー一同助かるのですが。<br></div></section>
    <ul><li><section><h1 id=2863>
    <span class="no">[2863]</span>
    <a class="title" href="#2863">Re4:改行置換について</a>
    <span class="author">MMX</span>
    <time datetime="2003-04-08T09:25:00">2003年04月08日 09:25</time></h1>
    <div class="body">▼ すいさん<br>このタイプのバグは昔、秀丸にもありました。<br>サクラエディタの現バージョンでの逃げの方法は<br><br>置換範囲を選択してから置換します。<br>ちゃんと終了します。<br>ファイル全体なら、全選択、全置換です。</div></section>
    <ul><li><section><h1 id=2867>
    <span class="no">[2867]</span>
    <a class="title" href="#2867">Re5:改行置換について</a>
    <span class="author">すい</span>
    <time datetime="2003-04-08T19:36:45">2003年04月08日 19:36</time></h1>
    <div class="body">&gt;ファイル全体なら、全選択、全置換です。<br><br>↑これ、止まりませんよ。 (^^;<br>結局のところ、[EOF]直前に改行があって、その“[EOF]直前の改行”を含めて<br>[すべて置換] 実行時には止まらないですね。<br><br>選択範囲に対する置換でやるなら<br>「 [EOF]直前の改行を含めずに範囲選択してから、すべて置換」<br>するしかないかと。<br></div></section>
    <ul><li><section><h1 id=2868>
    <span class="no">[2868]</span>
    <a class="title" href="#2868">Re6:改行置換について</a>
    <span class="author">MMX</span>
    <time datetime="2003-04-09T10:25:43">2003年04月09日 10:25</time></h1>
    <div class="body">▼ すいさん<br>そうでした。残念<br>改行コードでループしないものもある。<br>￥ｒと￥ｎの単独で改行している場合はOK<br>￥ｒ￥ｎと￥ｎ￥ｒ で改行はループする<br>でした。２つを一度にマッチさせて<br>置換するとダメなようです。<br>行の再編成の回数とかに関連するか？<br>----<br>a\r\n<br>b\r\n<br>c\r\n<br>[EOF}<br>に対して [\r\n] → X を全置換すると <br>----<br>aX\n<br>bX\n<br>cX\n<br>[EOF}<br>になる、再度全置換で 意図どおりになる？<br>\r置換直後のカーソル位置が \n 直前ではなく<br>\n の直後になるような動作だ？<br>\r\n → X 全置換はループ、で → XX 以上はループしない？<br>１バイトとそうでない時？漢字１文字はループせず<br>\r\n → \r または \n はループしない<br>＾と＄の正規表現もマッチしているようだが<br>挿入点が外れて文字が入らない感じ。<br>[EOF]直前の￥ｒ￥ｎ置換後の【行の再編成】<br>【再検索点の設定】がおかしいような<br>ユーザーが２バイト改行特殊処理するは難しい。<br>MIFESのように、0D0A という２バイト文字を立てて<br>１度に処理できるようとか。改行が１バイトごと<br>見える作りでは難しいか<br><br>改行が￥ｒ￥ｎ （ ￥ｎ￥ｒ） の時<br>￥ｎ（２バイト改行の後半）単独の検索はヒットする、<br>カーソル位置は改行文字の直後<br>（キーやマウスではできない位置にある）<br>この位置でキー入力はできる。<br><br>しかし[EOF]直前では、[SPACE]X￥ｒ￥ｎ[EOF]となり<br>[EOF]の前には入らない。Xが漢字では落ちる。<br>￥ｎ（２バイト改行の後半）の単独置換はできない、<br>ヒットはするが挿入されてない。<br><br>２バイト改行を１文字扱いのところと、１バイト単位で<br>透視できてしまう処理とが競合しているよう。<br><br>とりあえず、２バイト改行は壊れやすいので、\r または \n の<br>１バイト改行にしてから全置換などしたほうがよい。<br>改行を含む処理では。<br></div></section>
    </li><li><section><h1 id=2900>
    <span class="no">[2900]</span>
    <a class="title" href="#2900">Re6:改行置換について</a>
    <span class="author">蒔田　信幸</span>
    <time datetime="2003-05-11T02:13:34">2003年05月11日 02:13</time></h1>
    <div class="body">▼ すいさん<br>&gt; 選択範囲に対する置換でやるなら<br>&gt; 「 [EOF]直前の改行を含めずに範囲選択してから、すべて置換」<br>&gt; するしかないかと。<br><br>「\r\n」 -&gt; 「」ファイル全体の置き換えですが。<br>なるほど、[EOF]の前に\rとか\nが無いと、全置換でも問題ありません。<br><br>そうでない場合、いろいろ試したところ、現れ方はランダムです。<br>「置換後」の文字に何も指定しないと、正常に終わる確率が低くなるくらいです。<br><br>Ver. 1.3.9.0 V</div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>