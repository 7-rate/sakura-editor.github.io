<!DOCTYPE html><html><head><meta charset='utf-8'><title>禁則処理</title><link rel='stylesheet' href='../bbs.css' /><script src='../bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ANSI版開発トップへ</a><li><div class="list-title">
    <span class="no">1830</span>
    <a class="title" href="1830.html#1830">禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1831</span>
    <a class="title" href="1830.html#1831">RE: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1834</span>
    <a class="title" href="1830.html#1834">RE: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1835</span>
    <a class="title" href="1830.html#1835">Re2: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1862</span>
    <a class="title" href="1830.html#1862">Re3: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1865</span>
    <a class="title" href="1830.html#1865">Re4: 禁則処理</a></div>
    </li><li><div class="list-title">
    <span class="no">1887</span>
    <a class="title" href="1830.html#1887">Re4: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1888</span>
    <a class="title" href="1830.html#1888">Re5: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1889</span>
    <a class="title" href="1830.html#1889">Re6: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1898</span>
    <a class="title" href="1830.html#1898">Re7: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1900</span>
    <a class="title" href="1830.html#1900">Re8: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1910</span>
    <a class="title" href="1830.html#1910">Re9: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1912</span>
    <a class="title" href="1830.html#1912">Re10: 禁則処理</a></div>
    </li><li><div class="list-title">
    <span class="no">1922</span>
    <a class="title" href="1830.html#1922">Re10: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1923</span>
    <a class="title" href="1830.html#1923">Re11: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1924</span>
    <a class="title" href="1830.html#1924">Re12: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1926</span>
    <a class="title" href="1830.html#1926">Re13: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1929</span>
    <a class="title" href="1830.html#1929">Re14: 禁則処理</a></div>
    </li><li><div class="list-title">
    <span class="no">1936</span>
    <a class="title" href="1830.html#1936">Re14: 禁則処理</a></div>
    </li></ul></li></ul></li><li><div class="list-title">
    <span class="no">1931</span>
    <a class="title" href="1830.html#1931">Re12: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1933</span>
    <a class="title" href="1830.html#1933">Re13: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1937</span>
    <a class="title" href="1830.html#1937">Re14: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1939</span>
    <a class="title" href="1830.html#1939">Re15: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1942</span>
    <a class="title" href="1830.html#1942">Re16: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1950</span>
    <a class="title" href="1830.html#1950">Re17: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1952</span>
    <a class="title" href="1830.html#1952">Re18: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1954</span>
    <a class="title" href="1830.html#1954">Re19: 禁則処理</a></div>
    <ul><li><div class="list-title">
    <span class="no">1956</span>
    <a class="title" href="1830.html#1956">Re20: 禁則処理</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">1838</span>
    <a class="title" href="1830.html#1838">RE: 禁則処理</a></div>
    </li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=1830>
    <span class="no">[1830]</span>
    <a class="title" href="#1830">禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-08T19:07:46">2002年04月08日 19:07</time></h1>
    <div class="body"><br>実装してみました。 →source/kinsoku20020408.zip<br><br>ssrc_2002-04-01.zip に対するパッチです。<br>コア部分はできてると思うのですが、細かな部分は修正する必要がある<br>でしょう。<br>なお、本パッチでは印刷時の禁則は未実装です。<br></div></section>
    <ul><li><section><h1 id=1831>
    <span class="no">[1831]</span>
    <a class="title" href="#1831">RE: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-08T20:16:37">2002年04月08日 20:16</time></h1>
    <div class="body"><br>&gt;ssrc_2002-04-01.zip に対するパッチです。<br><br>ssrc_2002-04-08.zip に対するパッチに変更しました。<br>バグも修正しました。<br></div></section>
    <ul><li><section><h1 id=1834>
    <span class="no">[1834]</span>
    <a class="title" href="#1834">RE: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-09T19:05:29">2002年04月09日 19:05</time></h1>
    <div class="body"><br>印刷時の禁則処理のあり・なしも選択可能にしました。<br>（ただし、未確認です）<br><br>あと、ファイル保存時の更新監視タイムスタンプバグを修正しました。<br></div></section>
    <ul><li><section><h1 id=1835>
    <span class="no">[1835]</span>
    <a class="title" href="#1835">Re2: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-09T22:27:29">2002年04月09日 22:27</time></h1>
    <div class="body">▼ みくさん<br>&gt; <br>&gt; 印刷時の禁則処理のあり・なしも選択可能にしました。<br>&gt; （ただし、未確認です）<br>&gt; <br>&gt; あと、ファイル保存時の更新監視タイムスタンプバグを修正しました。<br><br>Thanx! 次回取り込みまする。</div></section>
    <ul><li><section><h1 id=1862>
    <span class="no">[1862]</span>
    <a class="title" href="#1862">Re3: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-14T10:09:00">2002年04月14日 10:09</time></h1>
    <div class="body"><br>以下の修正しました。<br>・「改行文字をぶら下げる」を実装しました。<br>（ちょっと自身なし。デバッグ求む＞ALL）<br>・デフォルトの行頭禁則文字を変更しました。<br>・禁則文字は印刷でも使うのでいつでも入力可能項目にしました。<br><br>ssrc_2002-04-12.zip + ssrc_2002-04-12_13.zip に対して<br>kinsoku0414.diff パッチを当ててください。<br><br>あと、ATOK使用時のAccess Violation修正も含んでます。<br></div></section>
    <ul><li><section><h1 id=1865>
    <span class="no">[1865]</span>
    <a class="title" href="#1865">Re4: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-14T15:34:14">2002年04月14日 15:34</time></h1>
    <div class="body"><br>&gt;ssrc_2002-04-12.zip + ssrc_2002-04-12_13.zip に対して<br>&gt;kinsoku0414.diff パッチを当ててください。<br><br>Thanx. 取り込みまする。<br></div></section>
    </li><li><section><h1 id=1887>
    <span class="no">[1887]</span>
    <a class="title" href="#1887">Re4: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-16T09:19:50">2002年04月16日 09:19</time></h1>
    <div class="body"><br>&gt;・「改行文字をぶら下げる」を実装しました。<br>&gt;（ちょっと自身なし。デバッグ求む＞ALL）<br><br>「改行文字をぶら下げる」をオンにして、挿入モードで、IMEをオフにして入力していくと、折り返し位置に改行記号がくっついたまま、次の行から入力されちゃいますぅ。<br>なんとかなりそう？<br></div></section>
    <ul><li><section><h1 id=1888>
    <span class="no">[1888]</span>
    <a class="title" href="#1888">Re5: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-16T19:07:26">2002年04月16日 19:07</time></h1>
    <div class="body">&gt;タイトル: Re5: 禁則処理<br>&gt;発言者: やざき<br>&gt;&gt;・「改行文字をぶら下げる」を実装しました。<br>&gt;&gt;（ちょっと自身なし。デバッグ求む＞ALL）<br>&gt;<br>&gt;「改行文字をぶら下げる」をオンにして、挿入モードで、IMEをオフにして入力していくと、折り返し位置に改行記号がくっついたまま、次の行から入力されちゃいますぅ。<br>&gt;なんとかなりそう？<br><br>以下のようにすればとりあえず直りますが、再描画系のバグが出ます。<br><br>CEditView::InsertData_CEditView:167行目<br><br>&#9;if( *pnNewPos &gt;= m_pcEditDoc-&gt;GetDocumentAttribute().m_nM<br>axLineSize ){<br>&#9;&#9;if( ! m_pcEditDoc-&gt;GetDocumentAttribute().m_bK<br>insokuRet ){&#9;//<br>&#9;&#9;&#9;*pnNewPos = 0;<br>&#9;&#9;&#9;(*pnNewLine)++;<br>&#9;&#9;}&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;//<br>&#9;}<br><br>バグ：<br>・折り返し直後がEOFのとき、EOFのところで改行しても行末に改行文字が表示されない。<br>（再描画すると直る）<br>・改行ぶら下がり行の右をマウスでクリックすると一文字前にカーソルがくる。<br>・1行目に行頭禁則があるとき、2行目以降を削除して1行目のみにすると無限ループする。<br>（CEditView_NewのOnPaint内）<br>・折り返し行の文字を削除して、行頭禁則文字が前行にぶら下がろうとするとき表示が<br>おかしくなる。<br>（再描画すると直る）<br><br>＃再描画系は該当行のみ再描画しようとするためか、うまくいってません。<br><br>他にもまだまだありそう。<br>マスタに統合するのは早すぎたかも。<br></div></section>
    <ul><li><section><h1 id=1889>
    <span class="no">[1889]</span>
    <a class="title" href="#1889">Re6: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-16T22:35:22">2002年04月16日 22:35</time></h1>
    <div class="body"><br>一部のバグ修正パッチをアップしました。<br>→egroups/source/kinsoku0416.zip<br><br>・行頭禁則で最終行の最終文字が禁則されているときの無限ループのバグ修正<br>・1文字ずつ入力して改行がぶらさがったとき、カーソルが次行に移動し、<br>　続きが次行から入力されてしまう。<br>・禁則処理へ入る条件（行末付近の文字だけ）を付けてちょっとだけ高速化<br><br>その他<br>・新規ファイル保存のファイル属性がリードオンリーになってしまう。<br><br>直ってないバグ<br>・文字入力・削除により前行に禁則が発生した場合、前行が再描画されない。<br><br>調べてないこと<br>・マウス選択<br>・選択系<br>・フリーカーソル時<br></div></section>
    <ul><li><section><h1 id=1898>
    <span class="no">[1898]</span>
    <a class="title" href="#1898">Re7: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-17T16:29:33">2002年04月17日 16:29</time></h1>
    <div class="body"><br>&gt;一部のバグ修正パッチをアップしました。<br>&gt;→egroups/source/kinsoku0416.zip<br><br>取り込みました。Thanx!<br></div></section>
    <ul><li><section><h1 id=1900>
    <span class="no">[1900]</span>
    <a class="title" href="#1900">Re8: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-17T19:00:22">2002年04月17日 19:00</time></h1>
    <div class="body"><br>禁則処理に句読点ぶら下げを実装しました。<br>（実際には、今までの行頭禁則が句読点ぶら下げだった）<br>これで、少しはまともな禁則処理になったと思ってます。<br><br>・句読点ぶら下げ設定追加<br>　句読点は"。、，．"とその半角版の8種類です。<br>　これらのうち行頭禁則文字に設定されている句読点のみ対象になります。<br>・行頭禁則実装<br>　行頭禁則の時は、1文字前を含めて折り返す。<br>　ただし、1文字前も禁則文字なら何もしない。<br>　行頭禁則文字のうち、句読点を除いた文字が対象になります。<br>・カーソル右移動で改行ぶら下げに来たとき、次行に移動するバグ修正<br><br>-----<br>直ってないバグ<br>・入力、削除で前行に折り返しの再描画が必要な場合に、前行が再描画されない。<br></div></section>
    <ul><li><section><h1 id=1910>
    <span class="no">[1910]</span>
    <a class="title" href="#1910">Re9: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-18T19:38:10">2002年04月18日 19:38</time></h1>
    <div class="body"><br>禁則のバグ修正をアップしました。<br>kinsoku0418.zip で ssrc_2002-04-18.zip に対するパッチです。<br><br>修正：<br>・入力・削除によって折り返し行末にカーソルがきてしまう。<br>・改行のない行(EOFの行)で折り返しを越えてしまう。<br>・新規ファイルダイアログでAccess Violationエラーを修正<br><br>-----<br>直ってないバグ：<br>・4/16 1文字入力・削除で前行に変化があるとき、前行の表示がおかしい。<br>|あいうe&lt;|  &lt;-- "&lt;"は折り返し<br>|o)&lt;RET&gt; |  &lt;-- "&lt;RET&gt;"は改行コード<br>で、2行目の頭の"o"を削除しても前行が再描画されない。（再表示で直る）<br>|あいうe)|  &lt;-- この行が再表示されない<br>|&lt;RET&gt;   |  &lt;-- "&lt;RET&gt;"は改行コード<br><br>・4/18 改行ぶら下がり時、最終行でEOFだけ次行にあるとき、<br>EOFの左でRETを押しても前行の左に改行が表示されない。（再表示で直る）<br>|あいうeo|<br>|[EOF]   |       &lt;-- "[EOF]"は改行コード<br>で、2行目の[EOF]の左にカーソルを置いてRETキーを押す<br>|あいうeo|&lt;RET&gt;  &lt;-- "&lt;RET&gt;"は改行コード  &lt;-- この行が再表示されない<br>|[EOF]   |       &lt;-- "[EOF]"は改行コード<br><br>＃禁則により前行に変化があるとき、前行が再表示されていません。<br></div></section>
    <ul><li><section><h1 id=1912>
    <span class="no">[1912]</span>
    <a class="title" href="#1912">Re10: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-18T21:46:55">2002年04月18日 21:46</time></h1>
    <div class="body">&gt;タイトル: Re10: 禁則処理<br>&gt;発言者: みく<br>&gt;禁則のバグ修正をアップしました。<br>&gt;kinsoku0418.zip で ssrc_2002-04-18.zip に対するパッチです。<br>&gt;<br>&gt;修正：<br>&gt;・入力・削除によって折り返し行末にカーソルがきてしまう。<br>&gt;・改行のない行(EOFの行)で折り返しを越えてしまう。<br>&gt;・新規ファイルダイアログでAccess Violationエラーを修正<br><br>取り込みました。Thanx。<br></div></section>
    </li><li><section><h1 id=1922>
    <span class="no">[1922]</span>
    <a class="title" href="#1922">Re10: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-19T21:47:12">2002年04月19日 21:47</time></h1>
    <div class="body"><br>禁則の一部バグ修正をアップしました。<br>kinsoku0419.zip で ssrc_2002-04-18.zip + kinsoku0418.zip に対するパッチです。<br><br>修正：<br>・改行ぶら下がり設定時、折り返し行の左端でRETキーを押しても前行の行末に改行文字が表示されない。<br>（再表示でなおる）<br><br><br>直ってないバグ：<br>・4/19 1文字削除で行数が減少する場合、以降の行が上にずれるはずなのに再描画されない。<br>（行頭禁則＋改行ぶらさがり）<br>|あいうe&lt;|  &lt;-- "&lt;"は折り返し<br>|o)&lt;RET&gt; |  &lt;-- "&lt;RET&gt;"は改行コード<br>で、2行目の頭の"o"を削除しても再描画されない。（再表示で直る）<br>|あいうe)|&lt;RET&gt; <br>|        | &lt;-- この行以降が上にずれて再表示されるはず<br><br>（行頭禁則）<br>|あいう&lt; |  &lt;-- "&lt;"は折り返し<br>|え)&lt;RET&gt;|  &lt;-- "&lt;RET&gt;"は改行コード<br>で、2行目の頭の"え"を削除しても再描画されない。（再表示で直る）<br>|あいう)&lt;RET&gt; <br>|        | &lt;-- この行以降が上にずれて再表示されるはず<br></div></section>
    <ul><li><section><h1 id=1923>
    <span class="no">[1923]</span>
    <a class="title" href="#1923">Re11: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-19T21:56:25">2002年04月19日 21:56</time></h1>
    <div class="body"><br>&gt;直ってないバグ：<br>&gt;・4/19 1文字削除で行数が減少する場合、以降の行が上にずれるはずなのに再描画されない。<br>&gt;（行頭禁則＋改行ぶらさがり）<br>&gt;|あいうe&lt;|  &lt;-- "&lt;"は折り返し<br>&gt;|o)&lt;RET&gt; |  &lt;-- "&lt;RET&gt;"は改行コード<br>&gt;で、2行目の頭の"o"を削除しても再描画されない。（再表示で直る）<br>&gt;|あいうe)|&lt;RET&gt; <br>&gt;|        | &lt;-- この行以降が上にずれて再表示されるはず<br>&gt;<br>&gt;（行頭禁則）<br>&gt;|あいう&lt; |  &lt;-- "&lt;"は折り返し<br>&gt;|え)&lt;RET&gt;|  &lt;-- "&lt;RET&gt;"は改行コード<br>&gt;で、2行目の頭の"え"を削除しても再描画されない。（再表示で直る）<br>&gt;|あいう)&lt;RET&gt; <br>&gt;|        | &lt;-- この行以降が上にずれて再表示されるはず<br><br>これですが、禁則処理を実装する以前のサクラで試したところ、<br>ワードラップだけの設定でも再現しました。<br>ということで元からあるバグのようです。<br><br>＃どうしよう。<br>＃行数が減少したことを認識できれば、変更行の前行からウインドウ表示内の<br>＃最下行まで再描画すればいいわけで。。。<br></div></section>
    <ul><li><section><h1 id=1924>
    <span class="no">[1924]</span>
    <a class="title" href="#1924">Re12: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-19T22:17:06">2002年04月19日 22:17</time></h1>
    <div class="body"><br>&gt;＃どうしよう。<br>&gt;＃行数が減少したことを認識できれば、変更行の前行からウインドウ表示内の<br>&gt;＃最下行まで再描画すればいいわけで。。。<br><br>全然おっかけられてなくて申し訳ない。<br>CLayoutが一個減るわけではないの？<br><br>＃とりあえず取り込みます。<br></div></section>
    <ul><li><section><h1 id=1926>
    <span class="no">[1926]</span>
    <a class="title" href="#1926">Re13: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-19T22:34:06">2002年04月19日 22:34</time></h1>
    <div class="body">&gt;タイトル: Re13: 禁則処理<br>&gt;発言者: やざき<br>&gt;&gt;＃どうしよう。<br>&gt;&gt;＃行数が減少したことを認識できれば、変更行の前行からウインドウ表示内の<br>&gt;&gt;＃最下行まで再描画すればいいわけで。。。<br>&gt;<br>&gt;全然おっかけられてなくて申し訳ない。<br>&gt;CLayoutが一個減るわけではないの？<br>&gt;<br>&gt;＃とりあえず取り込みます。<br><br>行数→1論理行(改行単位)の中の折り返し行数のことです。<br><br>例を挙げると、<br><br>折り返し10行で、ワードラップのみチェックしているときに、<br>|あいu &lt;   | "&lt;"は折り返し<br>|eoka きく&lt;| "&lt;"は折り返し<br>|け&lt;RET&gt;   |<br>|1&lt;RET&gt;    |<br>|2&lt;RET&gt;    |<br>|[EOF]     |<br>のデータで、2行目の"a"を削除すると<br>|あいu eok |&lt; "&lt;"は折り返し<br>|きくけ&lt;RET|<br>|1&lt;RET&gt;    |<br>|2&lt;RET&gt;    |<br>|2&lt;RET&gt;    |<br>|[EOF]     |<br>となってしまいます。<br><br>F5キーで再表示すると<br>|あいu eok |&lt; "&lt;"は折り返し<br>|きくけ&lt;RET|<br>|1&lt;RET&gt;    |<br>|2&lt;RET&gt;    |<br>|[EOF]     |<br>と正常になります。<br><br>"あいu eok きくけ"という論理行が3→2行になったことがわかれば何とかなるんですが。<br></div></section>
    <ul><li><section><h1 id=1929>
    <span class="no">[1929]</span>
    <a class="title" href="#1929">Re14: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-19T23:08:56">2002年04月19日 23:08</time></h1>
    <div class="body"><br>ということは、どこかでCLayout（折り返し行を管理するオブジェクト）をひとつ減らしているんだよね？<br>そこを探してみたらどうかしら？<br></div></section>
    </li><li><section><h1 id=1936>
    <span class="no">[1936]</span>
    <a class="title" href="#1936">Re14: 禁則処理</a>
    <span class="author">げんた</span>
    <time datetime="2002-04-20T03:00:01">2002年04月20日 03:00</time></h1>
    <div class="body">▼ みくさん<br>&gt; のデータで、2行目の"a"を削除すると<br>&gt; |あいu eok |&lt; "&lt;"は折り返し<br>&gt; |きくけ&lt;RET|<br>&gt; |1&lt;RET&gt;    |<br>&gt; |2&lt;RET&gt;    |<br>&gt; |2&lt;RET&gt;    |<br>&gt; |[EOF]     |<br>&gt; となってしまいます。<br>そういえば昔、行を選択してPasteし、Paste後に行数が減ると同じような現象が起こっていて直した記憶があります。<br>直接は関係ないですけど。</div></section>
    </li></ul></li></ul></li><li><section><h1 id=1931>
    <span class="no">[1931]</span>
    <a class="title" href="#1931">Re12: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-19T23:32:42">2002年04月19日 23:32</time></h1>
    <div class="body"><br>&gt;これですが、禁則処理を実装する以前のサクラで試したところ、<br>&gt;ワードラップだけの設定でも再現しました。<br>&gt;ということで元からあるバグのようです。<br>&gt;<br>&gt;＃どうしよう。<br>&gt;＃行数が減少したことを認識できれば、変更行の前行からウインドウ表示内の<br>&gt;＃最下行まで再描画すればいいわけで。。。<br><br>これでどうでしょう。<br><br>CLayoutMgr_New2.cpp<br>void CLayoutMgr::ReplaceData_CLayoutMgr(<br><br> 44:&#9;int&#9;nWork_nLines = m_nLines;&#9;//変更前の全行数の保存&#9;@@@ 2002.04.19 MIK<br><br>201:&#9;//pArg-&gt;nAddLineNum = nModifyLayoutLinesOld - pArg-&gt;nModLineTo;/* nAddInsLineNum;*/&#9;/* 再描画ヒント レイアウト行の増減 */<br>202:&#9;pArg-&gt;nAddLineNum = m_nLines - nWork_nLines;&#9;//変更後の全行数との差分&#9;@@@ 2002.04.19 MIK<br></div></section>
    <ul><li><section><h1 id=1933>
    <span class="no">[1933]</span>
    <a class="title" href="#1933">Re13: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-19T23:42:59">2002年04月19日 23:42</time></h1>
    <div class="body"><br>&gt; 44:&#9;int&#9;nWork_nLines = m_nLines;&#9;//変更前の全行数の保存&#9;@@@ 2002.04.19 MIK<br>&gt;<br>&gt;201:&#9;//pArg-&gt;nAddLineNum = nModifyLayoutLinesOld - pArg-&gt;nModLineTo;/* nAddInsLineNum;*/&#9;/* 再描画ヒント レイアウト行の増減 */<br>&gt;202:&#9;pArg-&gt;nAddLineNum = m_nLines - nWork_nLines;&#9;//変更後の全行数との差分&#9;@@@ 2002.04.19 MIK<br><br>pArg-&gt;nAddLineNum = nWork_nLines - m_nLines;<br><br>こう？<br>nAddLineNumの符号が変わるみたいだけど。。。あえて変えるということですか？（よく読めてなくて申し訳ない）<br></div></section>
    <ul><li><section><h1 id=1937>
    <span class="no">[1937]</span>
    <a class="title" href="#1937">Re14: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-20T08:40:25">2002年04月20日 08:40</time></h1>
    <div class="body">&gt;タイトル: Re14: 禁則処理<br>&gt;発言者: やざき<br>&gt;&gt; 44:&#9;int&#9;nWork_nLines = m_nLines;&#9;//変更前の全行数の保存&#9;@@@ 2002.04.19 MIK<br>&gt;&gt;<br>&gt;&gt;201:&#9;//pArg-&gt;nAddLineNum = nModifyLayoutLinesOld - pArg-&gt;nModLineTo;/* nAddInsLineNum;*/&#9;/* 再描画ヒント レイアウト行の増減 */<br>&gt;&gt;202:&#9;pArg-&gt;nAddLineNum = m_nLines - nWork_nLines;&#9;//変更後の全行数との差分&#9;@@@ 2002.04.19 MIK<br>&gt;<br>&gt;pArg-&gt;nAddLineNum = nWork_nLines - m_nLines;<br>&gt;<br>&gt;こう？<br>&gt;nAddLineNumの符号が変わるみたいだけど。。。あえて変えるということですか？（よく読めてなくて申し訳ない）<br><br>変数の意味からすると、追加された行数という意味なので<br> m_nLines - nWork_nLines<br>となります。<br>しかし、コメントアウトした行(201)を見ると削除された行数に読めますね。<br>で、この関数の呼び元がこの変数を処理するときは、0 != nAddLineNum なので<br>今のところ符号は関係ありません。変化したことを知りたいわけです。<br># ret= (m_nLines - nWork_nLines) ? true : false;<br>将来この値を見るとき、追加されれば＋、削除されれば－になっているのが正しいと思います。<br></div></section>
    <ul><li><section><h1 id=1939>
    <span class="no">[1939]</span>
    <a class="title" href="#1939">Re15: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-20T14:41:02">2002年04月20日 14:41</time></h1>
    <div class="body"><br>禁則とコメント・キーワード等が重なったときにおかしくなるだろうバグを修正しました。<br><br>ssrc_2002-04-18.zip + kinsoku0418.zip + kinsoku0419.zip に対するパッチです。<br><br>kinsoku0420.zip<br><br>＃これで終わりにしたいなぁ。<br></div></section>
    <ul><li><section><h1 id=1942>
    <span class="no">[1942]</span>
    <a class="title" href="#1942">Re16: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-20T22:02:55">2002年04月20日 22:02</time></h1>
    <div class="body"><br>&gt;禁則とコメント・キーワード等が重なったときにおかしくなるだろうバグを修正しました。<br><br>取り込んだでござる。<br></div></section>
    <ul><li><section><h1 id=1950>
    <span class="no">[1950]</span>
    <a class="title" href="#1950">Re17: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-21T17:36:09">2002年04月21日 17:36</time></h1>
    <div class="body"><br>すいません。<br>バグを直したつもりが、思いっきりバグを作りこんでました。<br><br>・ぶら下げが機能しなくなっていた。<br>・最終行EOFの左でBSキーを押して前行にEOFが移動するとき、元のEOF表示が消えない。<br>・改行判定を変えてみました（なぜか(改行長さ-1)を使っていた）。<br></div></section>
    <ul><li><section><h1 id=1952>
    <span class="no">[1952]</span>
    <a class="title" href="#1952">Re18: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-21T22:29:50">2002年04月21日 22:29</time></h1>
    <div class="body">&gt;タイトル: Re18: 禁則処理<br>&gt;発言者: みく<br>&gt;すいません。<br>&gt;バグを直したつもりが、思いっきりバグを作りこんでました。<br>&gt;<br>&gt;・ぶら下げが機能しなくなっていた。<br>&gt;・最終行EOFの左でBSキーを押して前行にEOFが移動するとき、元のEOF表示が消えない。<br>&gt;・改行判定を変えてみました（なぜか(改行長さ-1)を使っていた）。<br><br>取り消します。<br>全然直ってなかったです。<br></div></section>
    <ul><li><section><h1 id=1954>
    <span class="no">[1954]</span>
    <a class="title" href="#1954">Re19: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-22T18:49:53">2002年04月22日 18:49</time></h1>
    <div class="body"><br>&gt;&gt;・ぶら下げが機能しなくなっていた。<br>&gt;&gt;・最終行EOFの左でBSキーを押して前行にEOFが移動するとき、元のEOF表示が消えない。<br>&gt;&gt;・改行判定を変えてみました（なぜか(改行長さ-1)を使っていた）。<br><br>kinsoku0421.zip でお試しください。<br></div></section>
    <ul><li><section><h1 id=1956>
    <span class="no">[1956]</span>
    <a class="title" href="#1956">Re20: 禁則処理</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-25T09:48:29">2002年04月25日 09:48</time></h1>
    <div class="body"><br>&gt;kinsoku0421.zip でお試しください。<br><br>取り込みました。ありがとうございます。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=1838>
    <span class="no">[1838]</span>
    <a class="title" href="#1838">RE: 禁則処理</a>
    <span class="author">みく</span>
    <time datetime="2002-04-10T18:55:54">2002年04月10日 18:55</time></h1>
    <div class="body"><br>&gt;あと、ファイル保存時の更新監視タイムスタンプバグを修正しました。<br><br>これだけでは不完全ですので、パッチを当てた後、記事1837を参照して<br>さらに修正してください。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></body></html>