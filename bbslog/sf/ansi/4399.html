<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css">
  <script src='../bbs.js'></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120820034-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-120820034-1');
  </script>

  <link href="../bbs.css" type="text/css" rel="stylesheet">
  <link rel="shortcut icon" href="favicon.ico">
  <title>Re13:キーワードヘルプ拡張 | サクラエディタ過去ログ</title>
</head>
<body>
<ul class="side">
        <a href="./" class="toindex">◀ANSI版開発トップへ</a>
        <li><div class="list-title">
    <span class="no">4399</span>
    <a class="thread-title" href="4399.html#4399">Re13:キーワードヘルプ拡張</a></div>
    <ul><li><div class="list-title">
    <span class="no">4411</span>
    <a class="thread-title" href="4399.html#4411">Re14:キーワードヘルプ拡張</a></div>
    </li><li><div class="list-title">
    <span class="no">4449</span>
    <a class="thread-title" href="4399.html#4449">Re14:キーワードヘルプ拡張</a></div>
    <ul><li><div class="list-title">
    <span class="no">4468</span>
    <a class="thread-title" href="4399.html#4468">Re15:キーワードヘルプ拡張</a></div>
    <ul><li><div class="list-title">
    <span class="no">4471</span>
    <a class="thread-title" href="4399.html#4471">Re16:キーワードヘルプ拡張</a></div>
    <ul><li><div class="list-title">
    <span class="no">4473</span>
    <a class="thread-title" href="4399.html#4473">Re17:キーワードヘルプ拡張</a></div>
    <ul><li><div class="list-title">
    <span class="no">4475</span>
    <a class="thread-title" href="4399.html#4475">Re18:キーワードヘルプ拡張</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li>
    </ul><ul class="main"><li><section><h1 id=4399>
    <span class="no">[4399]</span>
    <a class="thread-title" href="#4399">Re13:キーワードヘルプ拡張</a>
    <span class="author">fon</span>
    <time datetime="2006-04-11T00:13:07">2006年04月11日 00:13</time></h1>
    <div class="body">スレッドを分けました。（&gt;&gt;dev:4298）<br><br>げんたさん、試していただいてありがとうございます！<br>ご指摘頂いた箇所を修正したパッチを新たに作成しました。<br>■1.5.9.91beta版 「キーワードヘルプ拡張」パッチ<br>　ブリーフケース/Developer/Source<br>　→sdiff_2006-03-17_KeyDictSelect_v4.zip<br><br>■v3からの差分<br>１．既存のキーワードヘルプ機能を残したままになっていたので旧メニュー<br>　　を削除<br>２．辞書ヒット時に右クリックしたときの１行目の機能名を、ヘルプの説明<br>　　内容そのものから「キーワードの説明をクリップボードにコピー」に変更<br>３．「ヒットした次の辞書も検索」がONで「辞書を開く」したとき、最後に<br>　　ヒットした辞書へジャンプしていたのを、最初にヒットした辞書にジャ<br>　　ンプするように修正<br><br>■作成にあたり<br>&gt;右クリックメニューのヘルプで、肝心の検索結果がはみ出して見えない．<br>この機能は既に実装されていたのですが、本来キーワードヘルプのToolTipの説明をクリップボードにコピーする仕様のようで、やはり自分も判りづらく感じましたので「キーワードの説明をクリップボードにコピー」に変更しました。<br>&gt;サーバに問い合わせるとか，指定のURLに問い合わせるとかできるとさらに用途が広がりそうな感じもしますね．<br>これが出来たら素晴らしいです！Web系のアプリはかなり疎いので、得意な方がいらっしゃれば是非お願いしたいです。自分も勉強してみます。<br><br>■ユースケース（一部、げんたさんコメント流用）<br>▼英語辞書として活用する場合<br>１．GENE95などをサクラ辞書形式に変換してキーワード辞書登録する。<br>２．英文訳を表示させる際、共通設定の「キャレット位置の...」をONにしていれば、「Ctrl+右」キーで次々と訳を表示させながら読み進めることができる。<br>３．[共通設定]の[支援]に追加された「キャレット位置の...」は右クリックでの検索と関連していて、<br>　OFF：選択したときキーワードヘルプをToolTip形式で表示、<br>　ON ：選択していないときも、単語を自動的に検出してキーワードヘルプをToolTip形式で表示、する。<br>また、辞書ヒットしている場合、右クリックメニューに、「キーワードの説明をクリップボードにコピー」する機能と、ヒットした「辞書を開く」機能があり、説明文の修正や、編集している文書への適用が容易に行える。<br>４．辞書に新規に用語を登録したい場合、メニューから直接辞書を開く機能は持っていないが、各辞書固有のキーワードを登録しておくことで、そのキーワードをトリガに「辞書を開」けば良い。<br>５．英語固有の変化形「s, es, ed, ing, tion, ist, er, less , etc..」など辞書ヒットしない単語でも、「選択範囲で前方一致検索」をONしていれば、選択範囲のカーソルを進めることでインクリメンタルサーチできるため、類似の単語の意味から類推できる。<br>６．欲しい説明が複数辞書で重複している場合、「ヒットした次の辞書も検索」すれば、意味の比較あるいは欲しい説明を見つけやすくなる。<br><br>※10万行を超える辞書などもあり、処理速度を気にしていましたが、2回目以降の検索では勝手にキャッシュに入るらしく、さほどストレスを感じることなく使用できます。(さすがに和英辞郎50MBなどになると、もたつきが激しいですが)<br><br>▼ナレッジデータベースとして<br>１．CVSで各人・各テーマごとなどの辞書を管理する<br>２．各位の調査案件をキーワードヘルプとしてサクラに複数登録し、随時更新する<br></div></section>
    <ul><li><section><h1 id=4411>
    <span class="no">[4411]</span>
    <a class="thread-title" href="#4411">Re14:キーワードヘルプ拡張</a>
    <span class="author">fon</span>
    <time datetime="2006-04-16T17:06:28">2006年04月16日 17:06</time></h1>
    <div class="body">キーワードヘルプ機能拡張で、一通り欲しい機能を実装できましたので、懸案事項を整理しておきます。<br>ご意見・提案がありましたら、よろしくお願いします。<br><br>■キーワードヘルプの拡張で気になっている事項<br><br>１．マウスオーバで辞書検索するオプションもやった方がいいか？<br>　類似の機能で「キャレット位置の単語を辞書検索」を実装したが、２アクション(マウス移動＋クリック)必要なため、標準の(マウス移動＋ダブルクリック)と比べて大差がないのでは？<br>　ということで、マウスオーバだけでツールチップを表示する検討をしましたが、OnMOUSEMOVEへの単純な検索機能組み込みでは、パフォーマンスの面で問題があり、現在作業を止めています。<br><br>２．キーワードヘルプ関係のオプションはどこに置くのが適当か？<br>　キーワードヘルプ機能のオプション(チェックボックス)は、次のように現状５つありますが、散らかっているように見えなくもないため、思案中です。<br>　共通設定-&gt;支援タブ<br>　　１．キャレット位置の単語を辞書検索<br>　タイプ別設定-&gt;キーワードヘルプタブ<br>　　２．キーワードヘルプ機能を使う<br>　　３．ヒットした次の辞書も検索<br>　　４．キーワードも表示<br>　　５．選択範囲で前方一致検索<br><br>３．キーワードヘルプだけ拡張したが、他の支援機能はそのままで良いか？<br>　支援機能なくせにキーワードヘルプだけ新たなタブへ移動したのですが、そうするとhokanやmigemoなどはそのままで良いかなと思った次第です。<br>　複数辞書化をどのように実現するか、とか必要性とかパフォーマンスとか、自分のスキル的な問題はありますが、一応問題提起として。<br><br>４．エディタ上から抽出した文字列に対応する文字列をツールチップorメニューに表示するという枠組みで考えて，サーバ・URLに問い合わせるように。<br><br>５．ツールチップウィンドウの自動折返し幅を、現在の画面解像度幅から、画面右端までに修正する。<br><br>６．ツールチップを別ウィンドウで表示する。<br>　マウスを動かす度にびろびろウィンドウが出て見辛い向きもありそうなこと、またヘルプ中のURLへアクセスしたり、必要な箇所だけコピーしたり出来るように。<br><br>７．その他バグや変な仕様、分かり辛い点など。<br></div></section>
    </li><li><section><h1 id=4449>
    <span class="no">[4449]</span>
    <a class="thread-title" href="#4449">Re14:キーワードヘルプ拡張</a>
    <span class="author">げんた</span>
    <time datetime="2006-04-30T03:15:53">2006年04月30日 03:15</time></h1>
    <div class="body">しばらく間があきましたが，また評価してみました．<br><br>▼[共通設定]の[支援]に追加された「キャレット位置の...」<br>のPopupが出る条件として，マウスカーソルがエディタウィンドウの中に無いとダメなんですね．<br><br>「キーワードも表示する」オプションが「ヒットした次の辞書も検索」にチェックが入っていないと有効にならない．<br>&gt;辞書ヒットしない単語でも、「選択範囲で前方一致検索」をONしていれば、選択範囲のカーソルを進めることでインクリメンタルサーチ<br>というのが期待通り動かないんですが...複数形はどうやっても検索できないみたいですし．<br><br>[実装の詳細について]<br>CShareData_new.cpp で従来のbUseKeyWordHelpが削除されてbUseKeyHelpSelectに置き換えられていましたが，特に理由がなければ同じ名前のままとした方が良いと思います．<br><br>nKeyHelpNumはキーワードの数を数えればわかるのでわざわざiniに保管する必要はないのでは？<br><br>従来のキーワードヘルプの設定を引き継ぐために，<br>if( cProfile.IsReadingMode() ){<br>&#9;cProfile.IOProfileData( pszSecName, "szKeyWordHelpFile",<br>&#9;&#9;types.m_KeyHelpArr[0].m_szPath, sizeof( types.m_KeyHelpArr[0].m_szPath ) );<br>}<br>みたいなのが必要かと思います．<br><br>CShareData.h で KeyHelpInfo::m_szUse のフラグはboolかintでよいのでは？文字列比較はパフォーマンスが低下します．<br><br>MAX_KEYHELP_FILE = 100 ってそんなに登録します？<br></div></section>
    <ul><li><section><h1 id=4468>
    <span class="no">[4468]</span>
    <a class="thread-title" href="#4468">Re15:キーワードヘルプ拡張</a>
    <span class="author">fon</span>
    <time datetime="2006-05-14T02:23:06">2006年05月14日 02:23</time></h1>
    <div class="body">遅くなりましたが、げんたさんのコメントに、だいたい対応しました。<br><br>パッチファイル：<br>　・SourceForge Patches<br>　　・キーワードヘルプ拡張（パッチ）<br>　　　・KeywordHelpExt20060513.zip<br><br>&gt;１．Popupが出る条件として，マウスカーソルがエディタウィンドウの中に無いとダメ<br>→まだ未対応です。<br>　もう１点、ツールチップの折り返し幅がシステムの画面横サイズになってしまう問題も解決できていません。<br>　(本当は、画面右端で自動的に折り返して欲しいのですが、どうしてもうまくいきません。)<br><br>&gt;２．「キーワードも表示する」が有効にならないことがある．<br>→CEditView::KeySearchCoreで、オプションをチェックしていないときの実装をちゃんと追加。<br><br>&gt;３．「選択範囲で前方一致検索」が期待通り動かないんですが...<br>→仕様上の問題の可能性があります。<br>　例）「believe」が辞書内にある場合、「unbelievable」ではヒットしませんので、選択範囲を「believ」に調整してやると「believe」に反応します。(実装上はstrncmpしているだけです。)<br>　仕様上の問題というのは、１つのファイルでヒットしたら、そのファイル内の次の候補は探さないで次の辞書を探しに行ってしまうことです。この仕様は、「ヒットした次の辞書も検索」にも当てはまります。<br><br>&gt;４．従来のbUseKeyWordHelpが削除されてbUseKeyHelpSelectに置き換えられている<br>→修正。<br><br>&gt;５．nKeyHelpNumはキーワードの数をiniに保管する必要はないのでは？<br>→iniロード時の読み出せたファイル数を使用し、nKeyHelpNumはini保存しないように変更。<br><br>&gt;６．従来のキーワードヘルプの設定を引き継ぐために，"szKeyWordHelpFile"キーワードも監視が必要<br>→上記読み出し処理を追加。<br><br>&gt;７．CShareData.h で KeyHelpInfo::m_szUse のフラグは文字列比較ではパフォーマンスが．<br>→int m_nUseに変更。<br><br>&gt;８．MAX_KEYHELP_FILE = 100 ってそんなに登録します？ <br>→20 に変更。<br>　20の根拠はTYPEの数と同じという程度ですので、適宜減らしてください！<br><br>げんたさん、評価と丁寧なコメントありがとうございます。<br>問題１が解決していませんが、その他は対応できたと思っています。<br>(この他、キーワードヘルプ・ダイアログのコードを CPropTypesRegex.cpp に間借りして実装しているのがちょっと気持ち悪いです。)<br><br>※本件とは別に、キーワードヘルプやファイルマネージャ風の機能を実装する上でのフレームについて検討しています。<br>アウトライン解析ウィンドウのようなものを別途用意するとして、各エディタウィンドウごとでは負荷が大きいので、別プロセスで動いて、さらにサクラのイベントも取れるものにしたいです。<br>キーワード辞書も、コピペなど別の操作をしたいときモッサリ感が微妙にいらつくため、別プロセス動作はあった方が良さそうです。<br>また、EmEditor_v6やttPage-Rなど、サイドバーも流行っぽいですので、この際。<br>（勝手にリンク）<br>http://www.forest.impress.co.jp/article/2006/04/24/emeditor6beta1.html<br>http://www.forest.impress.co.jp/article/2006/03/31/ttpager.html<br><br>※パッチを置く位置が [ 1466720 ]キーワードヘルプ拡張 でなきゃいけない気がしましたが、アカウントを持っていませんでしたので、サクラのホームページ記載にしたがって、SubmitNewしました。<br><br></div></section>
    <ul><li><section><h1 id=4471>
    <span class="no">[4471]</span>
    <a class="thread-title" href="#4471">Re16:キーワードヘルプ拡張</a>
    <span class="author">げんた</span>
    <time datetime="2006-05-15T01:41:59">2006年05月15日 01:41</time></h1>
    <div class="body">&gt;アカウントを持っていませんでしたので<br>コメントは出来ても添付ファイルのUploadが出来ないんですね．<br><br>差し支えなければアカウント取ってもらった方がいいかもしれませんね．<br></div></section>
    <ul><li><section><h1 id=4473>
    <span class="no">[4473]</span>
    <a class="thread-title" href="#4473">Re17:キーワードヘルプ拡張</a>
    <span class="author">fon</span>
    <time datetime="2006-05-18T22:59:25">2006年05月18日 22:59</time></h1>
    <div class="body">&gt; アカウント取ってもらった方が・・<br>アカウントを作成してみましたが、ファイル添付のコントロールが出てきません。<br>Patches-&gt;Summaryでアイテム選択したページで良いんですよね？<br>アカウントに特別な設定が必要だったりするんでしょうか。皆さん出来ているようで、自分のやり方or設定かと思いますが。。<br><br>スレッド違いのついでに、TortoiseMergeの差分表示が、行内の比較までしてくれて気に入りました。<br>単体でも起動できましたので、早速DFの代わりに使用しています。<br></div></section>
    <ul><li><section><h1 id=4475>
    <span class="no">[4475]</span>
    <a class="thread-title" href="#4475">Re18:キーワードヘルプ拡張</a>
    <span class="author">げんた</span>
    <time datetime="2006-05-19T22:10:27">2006年05月19日 22:10</time></h1>
    <div class="body">&gt;アカウントを作成してみましたが、ファイル添付のコントロールが出てきません。<br>試しに他のプロジェクトの掲示板を見てみると...出ませんね．<br><br>Developerしか登録できないのかもしれません．<br>アカウントを教えて頂ければdeveloperに登録します．<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>