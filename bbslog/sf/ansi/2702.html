<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css">
  <script src='../bbs.js'></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120820034-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-120820034-1');
  </script>

  <link href="../bbs.css" type="text/css" rel="stylesheet">
  <link rel="shortcut icon" href="favicon.ico">
  <title>バグ修正 | サクラエディタ過去ログ</title>
</head>
<body>
<ul class="side">
        <a href="./" class="toindex">◀ANSI版開発トップへ</a>
        <li><div class="list-title">
    <span class="no">2702</span>
    <a class="thread-title" href="2702.html#2702">バグ修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2703</span>
    <a class="thread-title" href="2702.html#2703">Re:バグ修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2704</span>
    <a class="thread-title" href="2702.html#2704">Re2:バグ修正</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">2706</span>
    <a class="thread-title" href="2702.html#2706">RE: バグ修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2707</span>
    <a class="thread-title" href="2702.html#2707">Re2: バグ修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2708</span>
    <a class="thread-title" href="2702.html#2708">Re3: バグ修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2715</span>
    <a class="thread-title" href="2702.html#2715">Re4: バグ修正 - まとめ</a></div>
    <ul><li><div class="list-title">
    <span class="no">2716</span>
    <a class="thread-title" href="2702.html#2716">置換関係</a></div>
    <ul><li><div class="list-title">
    <span class="no">2720</span>
    <a class="thread-title" href="2702.html#2720">Re:置換関係</a></div>
    <ul><li><div class="list-title">
    <span class="no">2721</span>
    <a class="thread-title" href="2702.html#2721">Re2:置換関係</a></div>
    <ul><li><div class="list-title">
    <span class="no">2722</span>
    <a class="thread-title" href="2702.html#2722">Re3:置換関係 - 不具合追加</a></div>
    <ul><li><div class="list-title">
    <span class="no">2724</span>
    <a class="thread-title" href="2702.html#2724">Re4:置換関係 - 不具合追加</a></div>
    <ul><li><div class="list-title">
    <span class="no">2729</span>
    <a class="thread-title" href="2702.html#2729">プリンタ関係試しました</a></div>
    <ul><li><div class="list-title">
    <span class="no">2731</span>
    <a class="thread-title" href="2702.html#2731">Re:プリンタ関係試しました</a></div>
    <ul><li><div class="list-title">
    <span class="no">2761</span>
    <a class="thread-title" href="2702.html#2761">Re2:プリンタ関係試しました</a></div>
    </li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2732</span>
    <a class="thread-title" href="2702.html#2732">置換関係 - 確認</a></div>
    <ul><li><div class="list-title">
    <span class="no">2733</span>
    <a class="thread-title" href="2702.html#2733">置換関係 - 不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2738</span>
    <a class="thread-title" href="2702.html#2738">Re:置換関係 - 再修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2743</span>
    <a class="thread-title" href="2702.html#2743">Re2:置換関係 - 再修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2744</span>
    <a class="thread-title" href="2702.html#2744">Re3:置換関係 - 再修正</a></div>
    </li><li><div class="list-title">
    <span class="no">2749</span>
    <a class="thread-title" href="2702.html#2749">Re3:置換関係 - 訂正</a></div>
    </li><li><div class="list-title">
    <span class="no">2751</span>
    <a class="thread-title" href="2702.html#2751">Re3:置換関係 - 再修正</a></div>
    </li><li><div class="list-title">
    <span class="no">2754</span>
    <a class="thread-title" href="2702.html#2754">Re3:置換関係 - 再修正</a></div>
    <ul><li><div class="list-title">
    <span class="no">2756</span>
    <a class="thread-title" href="2702.html#2756">ありがち</a></div>
    <ul><li><div class="list-title">
    <span class="no">2758</span>
    <a class="thread-title" href="2702.html#2758">Re:ありがち</a></div>
    <ul><li><div class="list-title">
    <span class="no">2762</span>
    <a class="thread-title" href="2702.html#2762">Re2:ありがち</a></div>
    </li><li><div class="list-title">
    <span class="no">2763</span>
    <a class="thread-title" href="2702.html#2763">Re2:ありがち</a></div>
    <ul><li><div class="list-title">
    <span class="no">2764</span>
    <a class="thread-title" href="2702.html#2764">Re3:ありがち</a></div>
    <ul><li><div class="list-title">
    <span class="no">2765</span>
    <a class="thread-title" href="2702.html#2765">Re4:ありがち</a></div>
    <ul><li><div class="list-title">
    <span class="no">2770</span>
    <a class="thread-title" href="2702.html#2770">Re5:ありがち</a></div>
    </li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2760</span>
    <a class="thread-title" href="2702.html#2760">Re:ありがち</a></div>
    </li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2759</span>
    <a class="thread-title" href="2702.html#2759">Re2:置換関係 - 再チャレンジ</a></div>
    <ul><li><div class="list-title">
    <span class="no">2767</span>
    <a class="thread-title" href="2702.html#2767">Re3:置換関係 - 再チャレンジ</a></div>
    <ul><li><div class="list-title">
    <span class="no">2768</span>
    <a class="thread-title" href="2702.html#2768">Re4:置換関係 - 再チャレンジ</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2717</span>
    <a class="thread-title" href="2702.html#2717">印刷関係 - 誰かよろしく</a></div>
    </li><li><div class="list-title">
    <span class="no">2718</span>
    <a class="thread-title" href="2702.html#2718">他</a></div>
    <ul><li><div class="list-title">
    <span class="no">2719</span>
    <a class="thread-title" href="2702.html#2719">Re:他</a></div>
    </li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2714</span>
    <a class="thread-title" href="2702.html#2714">Re3: バグ修正</a></div>
    </li></ul></li></ul></li></ul></li>
    </ul><ul class="main"><li><section><h1 id=2702>
    <span class="no">[2702]</span>
    <a class="thread-title" href="#2702">バグ修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-01T09:42:01">2003年05月01日 09:42</time></h1>
    <div class="body"><br>1.3.9.0にに対する差分です。<br><a href=http://www.egroups.co.jp/files/sakura-editor/Developer/Source/sakura_1_3_9_0_bugfix1_diff.lzh target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Develope<wbr>r/<wbr>Source/<wbr>sakura_1<wbr>_3_9_0_b<wbr>ugfix1_d<wbr>iff.<wbr>lzh</nobr></a><br><br>変更内容<br>・無限に置換が行われる不具合修正(開発2696)<br>・フリーカーソルでない時に行削除すると、EOLよりカーソルが右になる不具合対策<br>・長音が半角カタカナに変換されない不具合を直前文字が全角カタカナなら変換するように変更<br>　ついでに「濁点」「半濁点」も変換するように変更<br>・F_TAGJUMPで、longをboolに変換している警告が出る(VC++)対策(CEditView_Command.cpp)<br><br><br>なお、1.3.9.0に上記変更を施した実行形式を下記に置いてますので、試用下さい。<br><br><a href=http://www.egroups.co.jp/files/sakura-editor/Junk/sakura_test_20030430.lzh target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Junk/<wbr>sakura_t<wbr>est_2003<wbr>0430.<wbr>lzh</nobr></a><br></div></section>
    <ul><li><section><h1 id=2703>
    <span class="no">[2703]</span>
    <a class="thread-title" href="#2703">Re:バグ修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-01T09:46:10">2003年05月01日 09:46</time></h1>
    <div class="body">実行形式のURL間違えました・・・m(__)m<br><br><a href=http://ftp.tripod.co.jp/Archive/sakura_test_20030430.lzh target=_top><nobr>http://<wbr>ftp.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0430.<wbr>lzh</nobr></a><br></div></section>
    <ul><li><section><h1 id=2704>
    <span class="no">[2704]</span>
    <a class="thread-title" href="#2704">Re2:バグ修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-01T09:49:04">2003年05月01日 09:49</time></h1>
    <div class="body">また・・・(ゴミだらけにしちゃいました)<br><br><a href=http://members.tripod.co.jp/karoto/Archive/sakura_test_20030430.lzh target=_top><nobr>http://<wbr>members.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>karoto/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0430.<wbr>lzh</nobr></a></div></section>
    </li></ul></li><li><section><h1 id=2706>
    <span class="no">[2706]</span>
    <a class="thread-title" href="#2706">RE: バグ修正</a>
    <span class="author">すい</span>
    <time datetime="2003-05-02T11:51:20">2003年05月02日 11:51</time></h1>
    <div class="body">&gt;http://members.tripod.co.jp/karoto/Archive/sakura_test_20030430.lzh<br>試してみました。<br><br>&gt;・無限に置換が行われる不具合修正(開発2696)<br>この辺は OK っぽいですね。私が試した限りでは他の置換作業も正常のようです。<br><br>&gt;・フリーカーソルでない時に行削除すると、EOLよりカーソルが右になる不具合対策<br><br>ＮＧ<br><br>----------<br>1:→　　　123456789|<br>2:→　　　12345<br>----------<br>・タブ幅：8 (タイプ別設定 → スクリーン中の設定ね)<br>・行頭の「→　　　」：タブ<br>・1行目末尾の | 　　：カーソル<br><br>のようなテキストがあったとして行削除。<br><br>するとカーソルが↓<br>----------<br>1:→　 |　12345<br>----------<br>なぜに こんな所(タブ文字の途中)にカーソルが？<br><br>削除行の次の行にタブ文字がある(行頭に限らず)と、カーソル位置が異常になるっぽいわさ。<br>↓みたいな所で行削除とか。<br>----------<br>1:123456789|<br>2:12→34567<br>----------<br>・→ ：タブ<br>・1行目末尾の | ：カーソル<br></div></section>
    <ul><li><section><h1 id=2707>
    <span class="no">[2707]</span>
    <a class="thread-title" href="#2707">Re2: バグ修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-02T19:31:19">2003年05月02日 19:31</time></h1>
    <div class="body">▼ すいさん<br>&gt; 試してみました。<br>&gt; ＮＧ<br>&gt; 削除行の次の行にタブ文字がある(行頭に限らず)と、カーソル位置が異常になるっぽいわさ。<br><br>ありがちで、お恥ずかしい・・・<br>１行内の、桁(column)と位置(index)を混同してました。<br>今度こそです。<br><br>ついでに、<br>・印刷プレビューから「プリンタ」ボタンを押下して「キャンセル」を押下するとプリンタが不明になる<br>・プリンタの用紙設定がエディタ側に反映されない<br>・プリンタ固有の設定変更が記憶されないため2in1等の設定が行えない<br>の不具合も修正したつもりです。<br><br>試用して、バグ出しにご協力お願いします。<br><br>また、プリンタ(CPrint, CPrintPreview)回りの動作が変わってます。<br>・「印刷」時に、通常の印刷ダイアログを出すように変更<br>・プリンタ設定ダイアログをモーダルに変更<br>・プリンタダイアログで選んだプリンタは、プロセス終了まで記憶してます<br>ご意見お願いします。<br><br><a href=http://members.tripod.co.jp/karoto/Archive/sakura_test_20030502.lzh target=_top><nobr>http://<wbr>members.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>karoto/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0502.<wbr>lzh</nobr></a> <br><br></div></section>
    <ul><li><section><h1 id=2708>
    <span class="no">[2708]</span>
    <a class="thread-title" href="#2708">Re3: バグ修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-04T10:43:24">2003年05月04日 10:43</time></h1>
    <div class="body">またまたお試し版です。<br><br>＜実行形式＞<br><a href=http://members.tripod.co.jp/karoto/Archive/sakura_test_20030504.lzh target=_top><nobr>http://<wbr>members.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>karoto/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0504.<wbr>lzh</nobr></a> <br>＜1.3.9.0からのソース差分＞<br><a href=http://www.egroups.co.jp/files/sakura-editor/Developer/Source/sakura_1_3_9_0_bugfix2_diff.lzh target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Develope<wbr>r/<wbr>Source/<wbr>sakura_1<wbr>_3_9_0_b<wbr>ugfix2_d<wbr>iff.<wbr>lzh</nobr></a><br><br>前のお試し版からの変更は<br>・正規表現の行頭文字(^)を検索すると見つからないと言われる不具合修正<br>・正規表現の行頭文字(^)を検索すると全部の文字が検索文字の色になる不具合修正<br>・[EOF]位置から行末文字($)を検索すると、最下位行の行末にマッチしない不具合修正<br>です。<br><br>この辺の処理かなりややこしいですね・・・<br>あちらを立てればこちらが立たずで、かなり苦労しました。<br><br>正規表現関連で、あと気に入らないのが、行末の;を検索する場合に<br>「;$」でなく、「;\r$」としないといけないことです。<br><br>検索時(BMatchに渡す直前)に、$の前に\rを補ってやろうかとも考えたのですが、<br>美しくないので、やめときました。<br>誰か、<br>CMemory内の改行を、\nで統一してくれたりしないですかね・・・<br><br></div></section>
    <ul><li><section><h1 id=2715>
    <span class="no">[2715]</span>
    <a class="thread-title" href="#2715">Re4: バグ修正 - まとめ</a>
    <span class="author">すい</span>
    <time datetime="2003-05-07T01:36:57">2003年05月07日 01:36</time></h1>
    <div class="body">&gt;またまたお試し版です。<br>&gt;http://members.tripod.co.jp/karoto/Archive/sakura_test_20030504.lzh <br><br>修正・変更内容をまとめると、こんな感じでしょうか。<br><br>★バグ(っぽい物)修正<br>◎置換<br>・改行コードを「すべて置換」した時、無限に置換が行われる不具合修正(開発2696)<br>・正規表現の行頭文字(^)を検索すると見つからないと言われる不具合修正<br>・正規表現の行頭文字(^)を検索すると全部の文字が検索文字の色になる不具合修正<br>・[EOF]位置から行末文字($)を検索すると、最下位行の行末にマッチしない不具合修正<br><br>◎印刷<br>・印刷プレビューから「プリンタ」ボタンを押下して「キャンセル」を押下するとプリンタが不明になる<br>・プリンタの用紙設定がエディタ側に反映されない<br>・プリンタ固有の設定変更が記憶されないため2in1等の設定が行えない<br><br>◎他<br>・フリーカーソルでない時に行削除すると、EOLよりカーソルが右になる不具合対策<br>・長音が半角カタカナに変換されない不具合を直前文字が全角カタカナなら変換するように変更<br>　ついでに「濁点」「半濁点」も変換するように変更（「全角カタカナ→半角カタカナ」変換）<br>・F_TAGJUMPで、longをboolに変換している警告が出る(VC++)対策(CEditView_Command.cpp)<br><br>★動作(仕様)変更<br>・「印刷」時に、通常の印刷ダイアログを出すように変更<br>・プリンタ設定ダイアログをモーダルに変更<br>・プリンタダイアログで選んだプリンタは、プロセス終了まで記憶してます<br><br>以上//<br></div></section>
    <ul><li><section><h1 id=2716>
    <span class="no">[2716]</span>
    <a class="thread-title" href="#2716">置換関係</a>
    <span class="author">すい</span>
    <time datetime="2003-05-07T01:51:28">2003年05月07日 01:51</time></h1>
    <div class="body">&gt;・改行コードを「すべて置換」した時、無限に置換が行われる不具合修正(開発2696)<br>改行の置換関係は ひきつづき OK っぽいですね。<br><br>&gt;・正規表現の行頭文字(^)を検索すると見つからないと言われる不具合修正<br>&gt;・正規表現の行頭文字(^)を検索すると全部の文字が検索文字の色になる不具合修正<br>この辺、とても良さげです。<br>「 ^ を hogehoge に置換」で行頭に hogehoge を挿入とかも出来てますね。<br><br>&gt;・[EOF]位置から行末文字($)を検索すると、最下位行の行末にマッチしない不具合修正<br>これのせいかな？<br><br>対象のテキストファイルが CRLF(\r\n = 0d0a)改行、CR(\r=0d)改行、LF(\n=0a)改行<br>混在のテキストに対して<br>　置換前：\r?$<br>　置換後：abc$&amp;<br>で行末を検索/置換すると、、、<br><br>以降、○：正常。期待通り／×：おかしい／＊：さらに おかしい<br><br>・期待される動作<br>　置換すると全行末に abc が付加される。<br><br>・従来の正式版(sakura_2003-04-24.zip)<br>　×[置換(R)] で１個ずつ置換していくと \n 改行の行のみに対して置換処理実行されない。<br>　　その後の行に対しては置換されていく。<br>　×[すべて置換(A)] すると \n 改行の行で置換処理がストップし、以降の行に対しては<br>　　処理されない。<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>・前回(sakura_test_20030502.lzh)<br>　＊[置換(R)] で１個ずつ置換していくと \n 改行に対して置換処理されないだけでなく、<br>　　そこで検索がストップしてしまい、何度 [置換(R)] 押しても先の行へ行かない。<br>　＊[すべて置換(A)] すると \n 改行の行の位置で無限置換する。(をを!)<br>　×[F3] で検索していくと \n 改行の位置でストップ。[F3] で以降の行へ進まない。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>・sakura_test_20030504.lzh<br>　＊[置換(R)] で１個ずつ置換していくと \n 改行に対して置換処理されないだけでなく、<br>　　そこで検索がストップしてしまい、何度 [置換(R)] 押しても先の行へ行かない。<br>　×[すべて置換(A)] すると \n 改行の行で置換処理がストップし、以降の行に対しては<br>　　処理されない。<br>　×[F3] で検索していくと \n 改行の位置でストップ。[F3] で以降の行へ進まない。<br>　×[Shift]+[F3] で↑方向に検索だけしていくと CRLF(\r\n = 0d0a) 改行の所で２回ずつ止まる。<br><br>元々おかしかった物が輪をかけて おもしろくなっている感。<br><br>&gt;行末の;を検索する場合に「;$」でなく、「;\r$」としないといけない<br>「;\r?$」かと。<br><br>&gt;検索時(BMatchに渡す直前)に、$の前に\rを補ってやろうかとも考えたのですが、<br>&gt;美しくないので、やめときました。<br>もし仮にそれやったら、美しさ云々以前に置換が異常になるのが目に見えている気が。。。 (;^^;)<br>置換したら \r が消えちゃって \n のみの改行になっちゃうとか。<br></div></section>
    <ul><li><section><h1 id=2720>
    <span class="no">[2720]</span>
    <a class="thread-title" href="#2720">Re:置換関係</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-08T00:25:36">2003年05月08日 00:25</time></h1>
    <div class="body">▼ すいさん<br>&gt; 対象のテキストファイルが CRLF(\r\n = 0d0a)改行、CR(\r=0d)改行、LF(\n=0a)改行<br>&gt; 混在のテキストに対して<br>&gt; 　置換前：\r?$<br>&gt; 　置換後：abc$&amp;<br>&gt; で行末を検索/置換すると、、、<br>&gt; <br>&gt; 以降、○：正常。期待通り／×：おかしい／＊：さらに おかしい<br><br>ははは・・・やはり手強い・・・<br>なんだか、変なところ盛りだくさんですね・・・<br>平日は、じっくりデバッグする時間もないので、週末までお待ちください。<br></div></section>
    <ul><li><section><h1 id=2721>
    <span class="no">[2721]</span>
    <a class="thread-title" href="#2721">Re2:置換関係</a>
    <span class="author">げんた</span>
    <time datetime="2003-05-08T00:50:32">2003年05月08日 00:50</time></h1>
    <div class="body">&gt;平日は、じっくりデバッグする時間もないので、週末までお待ちください。<br>その後すいさんが動作確認して、正式取り込みは来週中頃というのはかなり楽観的予測かな？<br></div></section>
    <ul><li><section><h1 id=2722>
    <span class="no">[2722]</span>
    <a class="thread-title" href="#2722">Re3:置換関係 - 不具合追加</a>
    <span class="author">すい</span>
    <time datetime="2003-05-09T02:49:34">2003年05月09日 02:49</time></h1>
    <div class="body">&gt;&gt;&gt;　×[F3] で検索していくと \n 改行の位置でストップ。[F3] で以降の行へ進まない。<br>これって検索語「\r?$」とかだけでなく、「.*」とかでも似たような現象がでるみたいですね。<br><br>「.*」を [F3] で↓方向に行くと、\n 改行の行から先（↓方向）へ進みません。<br>また、「.*」を [Shift]+[F3] で↑方向に行くと、\r 改行以外の行（\r\n改行および\n改行の行）<br>にて１行につき２回止まります。<br><br>“\r を含み得る正規表現の一部”処理が異常？<br>- - - - - - - - - - <br>さらにおかしい現象が。<br><br>なんか使いづらいなと思っていたら、置換そのものの動作がおかしいです。<br>正規表現に関係なく。<br><br>１箇所ずつ [置換(R)] していく時、<br><br>・従来の正式版(sakura_2003-04-24.zip) , 前回(sakura_test_20030502.lzh)<br>　1.[置換(R)] を押すと、先頭の方の検索語と一致する文字列が置換される。<br>　　置換後、カーソルは次の置換対象文字まで飛ぶ。<br><br>　2.カーソル位置の置換処理対象文字を見て、置換する／しない を判断する。<br>　　置換するなら [置換(R)] を押して置換する。置換するとカーソルは次の置換対象文字まで飛ぶ。<br>　　置換しないなら [下検索(D)] で置換せずに次の置換対象文字まで飛ぶ。<br><br>　3.カーソル位置の置換処理対象文字を見て、＜以下 2. の繰り返し＞<br><br>・sakura_test_20030504.lzh<br>　1.[置換(R)] を押すと、次の検索語の位置まで飛び、置換処理される。<br>　　そこでカーソルが止まったまま。<br>　　次の置換処理対象文字列の位置へ行かない。<br><br>　2.[置換(R)] を押すと、次の検索語の位置まで飛び、置換処理される。<br>　　そこでカーソルが止まったまま。<br>　　次の置換処理対象文字列の位置へ行かない。<br><br>　3.[置換(R)] を押すと、＜以下 2. の繰り返し＞<br><br><br>置換処理の時（ [置換(R)] を押す時）にカーソルが置換対象文字の<br>位置にいないため、次の置換対象文字は置換したい所なのか置換したく<br>ない所なのかが [置換(R)] ボタンを押す前に確認できません。<br><br>[置換(R)] ボタンを押してみてから、カーソルが飛んで行って置換された<br>結果を見て、それから、そこが置換したかった所なのかどうかを判定するしかない．．．<br>特に置換対象文字が遠くはなれた↓方向の行にある場合なんかは致命的かと。<br><br>また、現カーソル位置が見えないので、次の置換対象文字が近くに<br>ある場合でも、次の置換対象文字の判別ができなくなる事がある。<br>（カーソルがある行はアンダーラインで分かりますけど、置換対象文字が<br>　１行に何個もあるような場合、次はどれ？状態に）<br>- - - - - - - - - - <br>&gt;&gt;平日は、じっくりデバッグする時間もないので、週末までお待ちください。<br>特に複雑な所だと思いますし、焦らずにやって頂ければ、と。<br><br>&gt;その後すいさんが動作確認して、正式取り込みは来週中頃というのはかなり楽観的予測かな？<br>う゛っ :-P<br><br>### その頃だと、まだ、私が動作確認できてない時期かも。(汗)<br></div></section>
    <ul><li><section><h1 id=2724>
    <span class="no">[2724]</span>
    <a class="thread-title" href="#2724">Re4:置換関係 - 不具合追加</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-11T21:06:41">2003年05月11日 21:06</time></h1>
    <div class="body"><br>えーと、お待たせしました。（あんまし時間が取れなかった・・・）<br>すいさんの指摘と、げんたさんの　プレビューが更新されない不具合を<br>修正しました。<br><br><a href=http://members.tripod.co.jp/karoto/Archive/sakura_test_20030511.lzh target=_top><nobr>http://<wbr>members.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>karoto/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0511.<wbr>lzh</nobr></a><br><br>既知の問題<br>・プリンタ固有の設定がクリアされるのは、多分そのままです<br>・\n改行を \r?$ --&gt; abc$&amp; は置換されない(1.3.9.0もなんですが、なんでだろ～）<br><br>▼ すいさん<br>&gt; &gt;&gt;&gt;　×[F3] で検索していくと \n 改行の位置でストップ。[F3] で以降の行へ進まない。<br>&gt; これって検索語「\r?$」とかだけでなく、「.*」とかでも似たような現象がでるみたいですね。<br>&gt; <br>&gt; 「.*」を [F3] で↓方向に行くと、\n 改行の行から先（↓方向）へ進みません。<br>&gt; また、「.*」を [Shift]+[F3] で↑方向に行くと、\r 改行以外の行（\r\n改行および\n改行の行）<br>&gt; にて１行につき２回止まります。<br>&gt; <br>&gt; “\r を含み得る正規表現の一部”処理が異常？<br><br>特に \rを意識してないのですが、行頭検索ができるようにすると、<br>それができないことを犠牲にして成立していた部分が　ぼろぼろになっちゃうみたいで・・<br>手強いです。（笑）<br>考えたあげく、<br>「行頭以外では、長さ０でマッチしない」という条件を追加しましたが、<br>いろんなパターンやると、まだボロが出そうですので、よろしく。<br><br>&gt; - - - - - - - - - - <br>&gt; さらにおかしい現象が。<br>&gt; <br>&gt; なんか使いづらいなと思っていたら、置換そのものの動作がおかしいです。<br>&gt; 正規表現に関係なく。<br><br>うーむ。とりあえず元に戻しました。<br>「^」を「XXX」に置換が、１行飛ばしになってしまう問題を、この２回検索させないことで<br>対応しようとしたのですが、そういう動作仕様だったんですね。（笑）<br>従って、上記置換が、現状１行飛ばしで置換されます。<br>別の対策を検討中です・・・<br><br>&gt; - - - - - - - - - - <br>&gt; &gt;&gt;平日は、じっくりデバッグする時間もないので、週末までお待ちください。<br>&gt; 特に複雑な所だと思いますし、焦らずにやって頂ければ、と。<br><br>ほんとに・・じっくりおつきあいください。<br><br></div></section>
    <ul><li><section><h1 id=2729>
    <span class="no">[2729]</span>
    <a class="thread-title" href="#2729">プリンタ関係試しました</a>
    <span class="author">げんた</span>
    <time datetime="2003-05-12T21:55:44">2003年05月12日 21:55</time></h1>
    <div class="body">用紙サイズ変更ができることは確認しました。<br>印刷設定の“一部”が保存されないようです。<br>用紙サイズ、用紙方向、両面・片面、印刷部数は保存されますが、割付数(2in1など)や出力先トレイが保存されません。<br><br>ところで、印刷ダイアログで出力先を選択できるようになったのですから「プリンタ」ボタンは不要だと思いません？<br></div></section>
    <ul><li><section><h1 id=2731>
    <span class="no">[2731]</span>
    <a class="thread-title" href="#2731">Re:プリンタ関係試しました</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-12T23:20:36">2003年05月12日 23:20</time></h1>
    <div class="body">▼ げんたさん<br>&gt; ところで、印刷ダイアログで出力先を選択できるようになったのですから「プリンタ」ボタンは不要だと思いません？<br><br>実は思ってました。（笑）<br>なくちゃっていいですか？</div></section>
    <ul><li><section><h1 id=2761>
    <span class="no">[2761]</span>
    <a class="thread-title" href="#2761">Re2:プリンタ関係試しました</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-17T03:13:44">2003年05月17日 03:13</time></h1>
    <div class="body">▼ かろとさん<br>&gt; ▼ げんたさん<br>&gt; &gt; ところで、印刷ダイアログで出力先を選択できるようになったのですから「プリンタ」ボタンは不要だと思いません？<br>&gt; <br>&gt; 実は思ってました。（笑）<br>&gt; なくちゃっていいですか？<br><br>と、行ったのですが、不要な部分を根こそぎ分解する自信がないので、<br>他力本願で、なくしちゃって欲しいな・・・</div></section>
    </li></ul></li></ul></li><li><section><h1 id=2732>
    <span class="no">[2732]</span>
    <a class="thread-title" href="#2732">置換関係 - 確認</a>
    <span class="author">すい</span>
    <time datetime="2003-05-13T00:44:08">2003年05月13日 00:44</time></h1>
    <div class="body">&gt;えーと、お待たせしました。（あんまし時間が取れなかった・・・）<br>&gt;すいさんの指摘と、げんたさんの　プレビューが更新されない不具合を<br>&gt;修正しました。<br>&gt;<br>&gt;http://members.tripod.co.jp/karoto/Archive/sakura_test_20030511.lzh<br><br>お待ちしておりました。ご苦労様です。<br>サイズオーバーになったので２個に分けます。<br><br>・正規表現に関係なく置換そのものの動作がおかしい件（ [置換(R)] 押した時の動作）も<br>　直っている事を確認。<br><br>・「[\r\n]+」⇒「」&#9;改行削除<br>　置換、すべて置換 共 OK。無限置換も無し。<br><br>・「\r?$」⇒「abc$&amp;」&#9;$ を使った行末置換<br>　とりあえず従来の正式版(sakura_2003-04-24.zip) とほぼ同じ状態↓にまで戻りましたね。<br>&gt;　×[置換(R)] で１個ずつ置換していくと \n 改行の行のみに対して置換処理実行されない。<br>&gt;　　その後の行に対しては置換されていく。<br>&gt;　×[すべて置換(A)] すると \n 改行の行で置換処理がストップし、以降の行に対しては<br>&gt;　　処理されない。<br>&gt;　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>&gt;　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>・「[\r\n]+」⇒「abc$&amp;」&#9;$ を使わない行末置換<br>　置換、すべて置換 共 OK（今までどおり）<br><br>・「.*」を [F3] で↓方向に検索して行く<br>　正常。<br><br>・「^」⇒「abc」&#9;行頭に abc を挿入<br>　[すべて置換(A)] は正常。<br>　[置換(R)] 時<br>  &gt; うーむ。とりあえず元に戻しました。<br>  &gt; 「^」を「XXX」に置換が、１行飛ばしになってしまう問題＜略＞<br>  &gt; 従って、上記置換が、現状１行飛ばしで置換されます。<br>　の状態である事を確認出来ました。 (;^^;)<br>　これも直すのは大変そうですね。 (;^^Ａ<br></div></section>
    <ul><li><section><h1 id=2733>
    <span class="no">[2733]</span>
    <a class="thread-title" href="#2733">置換関係 - 不具合</a>
    <span class="author">すい</span>
    <time datetime="2003-05-13T00:49:04">2003年05月13日 00:49</time></h1>
    <div class="body"><br>&gt; ・[EOF]位置から行末文字($)を検索すると、最下位行の行末にマッチしない不具合修正<br>　直っているような無いような。<br>　以下の現象は sakura_test_20030504.lzh までは無かった現象のようです。<br><br>　例えば最終行が 100行で（いえ、何行でも良いんですけど）、100行目の行末にも改行があるファイルにて、<br><br>　1. 98行目辺りから正規表現「$」検索で [F3] を何度も押して最終行100行目まで検索して行く。<br>　2. 最終行100行目の行末末尾へ到着したら [↓] キーで [EOF] の位置へ行く。<br>　3. [Shift]+[F3] で↑方向へ検索すると、100行目の行末を飛ばして99行目の行末へ行く。<br><br>　他の操作手順で [EOF] まで行ってから [Shift]+[F3] した場合には正常動作なんですけど。はて？<br>　[EOF] まで行く操作手順に左右されるというのは．．．<br><br>　また、「$」で検索される位置がなんか変になることがあります。<br><br>↓テストファイルを用意して<br>-----<br>abcd<br>efgh<br>ijkL<br>-----<br><br>検索語が正規表現で「$」の状態で、| がカーソル位置として<br>┌──┐<br>│　　↓<br>│　-------<br>│　1:abcd<br>│　2:efgh<br>│　3:ijkL|<br>│　-------<br>│　↑にて [↑][↑][←] とキー操作すると、カーソル位置は↓<br>│　-------<br>│　1:abc|d<br>│　2:efgh<br>│　3:ijkL<br>│　-------<br>│　↑この位置から [F3] すると、↓<br>│　-------<br>│　1:abcd<br>│　2:efgh |<br>│　3:ijkL<br>│　-------<br>│　↑ありゃ？何故に次の行(2行目)の行末に？<br>│　さらにもう一度 [↑][←] と操作して、↓<br>│　-------<br>│　1:abc|d<br>│　2:efgh<br>│　3:ijkL<br>│　-------<br>│　↑この位置から [F3] すると、↓<br>│　-------<br>│　1:abcd<br>│　2:efgh<br>│　3:ijkL |<br>│　-------<br>│　今度は3行目の行末に？？ (oo;ゞ<br>│　ここから再度、＜以下、先頭に戻って繰り返し＞<br>└───────────┘<br><br>あちらを立てればこちらが立たず、次から次へと、、、っぽいですね。<br></div></section>
    <ul><li><section><h1 id=2738>
    <span class="no">[2738]</span>
    <a class="thread-title" href="#2738">Re:置換関係 - 再修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-13T22:36:54">2003年05月13日 22:36</time></h1>
    <div class="body">▼ すいさん<br>&gt; 　1. 98行目辺りから正規表現「$」検索で [F3] を何度も押して最終行100行目まで検索して行く。<br>&gt; 　2. 最終行100行目の行末末尾へ到着したら [↓] キーで [EOF] の位置へ行く。<br>&gt; 　3. [Shift]+[F3] で↑方向へ検索すると、100行目の行末を飛ばして99行目の行末へ行く。<br><br>&gt; 　また、「$」で検索される位置がなんか変になることがあります。<br><br>あ、するどい・・前半は確信犯だったりします（笑）<br>後で修正するつもりだったのですが、先に気づかれちゃいましたね。。修正してみました。<br><br>後半は、気づいてなかったです。前半＋αの問題がありました。<br><br>あと、「^」→「XXX」の置換を１行飛ばしでなくやるようにしました。<br>（あんまり綺麗なパッチでないのですが・・・今のところこれしか・・です）<br><br><a href=http://members.tripod.co.jp/karoto/Archive/sakura_test_20030513.lzh target=_top><nobr>http://<wbr>members.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>karoto/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0513.<wbr>lzh</nobr></a><br><br></div></section>
    <ul><li><section><h1 id=2743>
    <span class="no">[2743]</span>
    <a class="thread-title" href="#2743">Re2:置換関係 - 再修正</a>
    <span class="author">すい</span>
    <time datetime="2003-05-14T12:29:30">2003年05月14日 12:29</time></h1>
    <div class="body">また、投稿サイズオーバーなので２個に分けます。<br><br>\r\n(0d 0a)改行、\r(0d)改行、\n(0a)改行 混在テキストにて<br><br>(1)「[\r\n]+」⇒「」&#9;改行削除<br>　すべて正常。無限置換も無し。<br><br>(2)「[\r\n]+」⇒「abc$&amp;」&#9;$ を使わない行末置換<br>　置換、すべて置換 共 OK（今までどおり）<br><br>(3)「\r?$」⇒「abc$&amp;」&#9;$ を使った行末置換<br>　＊[置換(R)] で１個ずつ置換していくと \n 改行に対して置換処理されないだけでなく、<br>　　そこで検索がストップしてしまい、何度 [置換(R)] 押しても先の行へ行かない。<br>　＊[すべて置換(A)] すると \n 改行の行の位置で無限置換する。(をを!)<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br>　まあ、元々のリリース版でも動作異常でしたし、、、<br><br>(4)「.*」⇒「abc」&#9;全行の内容を abc に置換（\r も通常の文字と見なされるため、改行コードは \n になる。\r(0d)改行の行は連結される）<br>　×[置換(R)] で１個ずつ置換していくと \n 改行の行から先へ進まない。<br>　　\n 改行の行 で [置換(R)] 押すたびに文字列 abc が書き足されていく。<br>　×[すべて置換(A)] すると \n 改行の行の位置で無限置換する。放っておくと \n 改行の行のサイズが∞に。。。<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>(5)「[^\r\n]*」⇒「abc」&#9;全行の内容を abc に置換<br>　×[置換(R)] で１個ずつ置換しようとすると、まったく先の行へ進まない。<br>　　[置換(R)] 押すたびに文字列 abc が書き足されていく。<br>　×[すべて置換(A)] すると無限置換する。放っておくと１行目のサイズが∞に。。。<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>　↑(4) は、正式リリース版では全て正常でした。<br>　(5) は正式リリース版だと「空行にマッチしない」という不具合がありました。<br>　でもこんな類の置換する人はいないも。 「[^\r\n]*([\r\n]+)」⇒「abc$1」とかで やれば きちんと出来るし。<br>　それにそもそも正規表現の * の意味を考えれば、今のこの動作こそが正常とも言えるかもしれないし、、、(;^^;)<br>　# 改行文字直前の 0文字にマッチしているのでしょうから。<br>　でも(4)で \n 改行の行とそれ以外とで動作が異なるというのは何か解せん気も。<br></div></section>
    <ul><li><section><h1 id=2744>
    <span class="no">[2744]</span>
    <a class="thread-title" href="#2744">Re3:置換関係 - 再修正</a>
    <span class="author">すい</span>
    <time datetime="2003-05-14T12:29:58">2003年05月14日 12:29</time></h1>
    <div class="body">(6)「$」を検索<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　×[Shift]+[F3] で↑方向に検索だけしていく場合、\r(0d)改行の行末に止まらない。<br><br>　でも、実は↑これは従来の正式版でも同じ異常動作するし。 :-)<br>　「$」⇒「hogehoge」 の置換が出来ないのも従来通り。<br><br>(7) [EOF]位置から行末文字($)を検索すると、最下位行の行末にマッチしない不具合修正<br>　直っているようですね。<br><br>(8)「^」⇒「abc」&#9;行頭に abc を挿入<br>　△[置換(R)] で１個ずつ置換していく場合、処理自体は正常。<br>　　ただし、カーソルも何も表示たれないため、次、どこが置換対象になっているのかが分からないので<br>　　「この行頭は [置換(R)] する、次の行頭とその次の行頭は [下検索(D)] で飛ばしてその次の行頭を [置換(R)]．．．」<br>　　といった作業は実質不可能に近い。<br>　○[すべて置換(A)] する場合は正常<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>従来の正式版では異常だった箇所が、大分、まともに動作するようになった感じですねぇ。<br><br>まとめると、<br>1.従来の正式版で正常にできていた事は、ほぼ正常にできるようだ。(2) 他、色々<br>2.従来の正式版で異常だった動作が色々正常に動作するようになった。(1)(7)(8)<br>3.従来の正式版で異常だった動作が、そのまま異常のまま。(6)<br>4.従来の正式版で異常だった動作が輪をかけて おもしろおかしく なった。(3)<br>5.正規表現の解釈の違い？で動作がかわった。(4)(5)<br><br>1. と 2. が大きいですね。<br>3. は今回はしょうがないという事にして、4. は今回は放っておいても．．．という気も。<br></div></section>
    </li><li><section><h1 id=2749>
    <span class="no">[2749]</span>
    <a class="thread-title" href="#2749">Re3:置換関係 - 訂正</a>
    <span class="author">すい</span>
    <time datetime="2003-05-14T22:16:17">2003年05月14日 22:16</time></h1>
    <div class="body">&gt;　↑(4) は、正式リリース版では全て正常でした。<br>よくよく調べ直して見たら、正常ではありませんでした。 ＜ 正式リリース版<br>という事で (4)(5) 訂正。<br><br>(4)「.*」⇒「abc」<br>　　全行の内容を abc に置換（\r も通常の文字と見なされるため、<br>　　改行コードは \n になる。\r(0d)改行の行は連結される）<br><br>・正式リリース版(sakura_2003-04-24.zip)<br>　×[置換(R)] 押していくと「\n(0a)改行の空行」は無視（スキップ）される。<br>　×[すべて置換(A)] すると「\n(0a)改行の空行」は処理されない。<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>・sakura_test_20030513.lzh<br>　×[置換(R)] で１個ずつ置換していくと \n 改行の行から先へ進まない。<br>　　\n 改行の行 で [置換(R)] 押すたびに文字列 abc が書き足されていく。<br>　×[すべて置換(A)] すると \n 改行の行の位置で無限置換する。放っておくと \n 改行の行のサイズが∞に。。。<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br><br>(5)「[^\r\n]*」⇒「abc」<br>　　全行の内容を abc に置換<br><br>・正式リリース版(sakura_2003-04-24.zip)<br>　×[置換(R)] 押していくと、空行は無視（スキップ）される。<br>　×[すべて置換(A)] すると、空行は処理されない。<br>　×[F3] で↓方向に検索だけしていくと空行は飛ばされる。<br>　×[Shift]+[F3] で↑方向に検索だけしていくと、１行に付き２回マッチする。<br><br>・sakura_test_20030513.lzh<br>　×[置換(R)] で１個ずつ置換しようとすると、まったく先の行へ進まない。<br>　　[置換(R)] 押すたびに文字列 abc が書き足されていく。<br>　×[すべて置換(A)] すると無限置換する。放っておくと１行目のサイズが∞に。。。<br>　○[F3] で↓方向に検索だけしていく場合の動作は正常。<br>　○[Shift]+[F3] で↑方向に検索だけしていく場合の動作は正常。<br></div></section>
    </li><li><section><h1 id=2751>
    <span class="no">[2751]</span>
    <a class="thread-title" href="#2751">Re3:置換関係 - 再修正</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-15T22:21:36">2003年05月15日 22:21</time></h1>
    <div class="body">▼ すいさん<br>&gt; また、投稿サイズオーバーなので２個に分けます。<br>&gt; (3)「\r?$」⇒「abc$&amp;」&#9;$ を使った行末置換<br>&gt; 　＊[置換(R)] で１個ずつ置換していくと \n 改行に対して置換処理されないだけでなく、<br>&gt; 　　そこで検索がストップしてしまい、何度 [置換(R)] 押しても先の行へ行かない。<br>&gt; 　＊[すべて置換(A)] すると \n 改行の行の位置で無限置換する。(をを!)<br><br>無限置換するのは、防止したいですね・・・<br><br></div></section>
    </li><li><section><h1 id=2754>
    <span class="no">[2754]</span>
    <a class="thread-title" href="#2754">Re3:置換関係 - 再修正</a>
    <span class="author">蒔田　信幸</span>
    <time datetime="2003-05-16T22:15:31">2003年05月16日 22:15</time></h1>
    <div class="body">▼ かろとさん<br>&gt; (3)「\r?$」⇒「abc$&amp;」&#9;$ を使った行末置換<br>&gt; 　＊[置換(R)] で１個ずつ置換していくと \n 改行に対して置換処理されないだけでなく、<br>&gt; 　　そこで検索がストップしてしまい、何度 [置換(R)] 押しても先の行へ行かない。<br>&gt; 　＊[すべて置換(A)] すると \n 改行の行の位置で無限置換する。(をを!)<br><br>これだけの結果を見ると、<br>20030513より、前の20030504の方が良かったと思います。<br><br>20030504<br>○置換前　「\r?\n?$」「\r*\n*$」「[\r\n]*$」「[\r\n]+$」「\r?$」<br>○置換前　　　　　　　　　　　　　　　 　　　「[\r\n]+」<br>０置換前　「\r?\n?」 「\r*\n*」 「[\r\n]*」　　　　　　 「\r?」<br><br>20030513<br>○置換前　「\r?\n?$」「\r*\n*$」「[\r\n]*$」「[\r\n]+$」<br>○置換前　　　　　　　　　　　　　　　 　　　「[\r\n]+」<br>△置換前　　　　　　　　　　　　　　　　　　　　　　　　　「\r?$」<br>×置換前　「\r?\n?」 「\r*\n*」 「[\r\n]*」　　　　　　 「\r?」<br><br>○期待どうりの結果。<br>０結果何もしない。<br>△無限に実行。停止すると、期待どうりの結果。<br>８無限に実行。停止しても、結果何もしない。<br>×無限に実行。停止すると、予想外の結果。<br>　置換後　「EOL$&amp;」<br>　実行時　「すべて置換」<br><br>お邪魔しました。</div></section>
    <ul><li><section><h1 id=2756>
    <span class="no">[2756]</span>
    <a class="thread-title" href="#2756">ありがち</a>
    <span class="author">すい</span>
    <time datetime="2003-05-16T23:57:56">2003年05月16日 23:57</time></h1>
    <div class="body">せっかく調査・報告して頂いたところで申し訳ないのですが、 m(_ _)m<br>これは「非常によくありがちなミス」としてよく例に挙げられたりする<br>典型的な正規表現の記述ミスです。<br><br>「\r?\n?」<br>「\r*\n*」<br>「[\r\n]*」<br>「\r?」<br><br>これらは行末や改行にマッチするのではなく、<br>「全ての場所にマッチしろ」という記述になります。<br><br>・? というのは直前の文字が 0 または 1 個の場合<br>・* というのは直前の文字が 0 個以上ある場合<br><br>という意味ですので、例えば「\r?\n?」ならば<br><br>「 \r が 0個（存在しない）または 1個あり、そのすぐ後ろに<br>　 \n が 0個（存在しない）または 1個ある場所」<br><br>という意味で、すなわちこれは「何も文字が無い場所にもマッチしろ」<br>という意味に捉えるのが正しい正規表現の解釈となります。<br><br>すなわち「ABCD」というテキストに対して「\r?\n?」を検索すると、<br>Aの前、AとBの間、BとCの間、、、にマッチする、という事です。<br><br>他の「\r*\n*」「[\r\n]*」「\r?」も全て同じですね。<br><br>? や * を使用する時は、「 0個にもマッチする」という意味を<br>よ～く意識して気を付けていないと こういう記述をして思わぬ<br>処理結果を招きます。<br><br>ちなみに期待される処理動作は、<br>-----<br>abc<br>def<br>-----<br><br>↑というテキストを<br>「\r?\n?」⇒「EOL$&amp;」と置換すると↓<br><br>-----<br>EOLaEOLbEOLcEOL<br>EOLdEOLeEOLfEOL<br>-----<br>と、なるかと。他の「\r*\n*」「[\r\n]*」「\r?」も全て同じです。<br><br>．．．残念ながら、こうなりませんが。20030504,20030513 共<br></div></section>
    <ul><li><section><h1 id=2758>
    <span class="no">[2758]</span>
    <a class="thread-title" href="#2758">Re:ありがち</a>
    <span class="author">蒔田　信幸</span>
    <time datetime="2003-05-17T01:49:51">2003年05月17日 01:49</time></h1>
    <div class="body">▼ すいさん<br>&gt; という意味で、すなわちこれは「何も文字が無い場所にもマッチしろ」<br>&gt; という意味に捉えるのが正しい正規表現の解釈となります。<br>&gt; <br>&gt; すなわち「ABCD」というテキストに対して「\r?\n?」を検索すると、<br>&gt; Aの前、AとBの間、BとCの間、、、にマッチする、という事です。<br><br>前半は賛成出来ますが、後半はできかねます。<br>たとえば、<br>------<br>a<br>b<br>c<br>------<br>とあったときに、正規表現の「D*a」は１回のマッチですが、「D*」であれば、０回のマッチが正しいのではないでしょうか。<br>全ての文字にマッチするのは「.」（ドット）ですので。<br></div></section>
    <ul><li><section><h1 id=2762>
    <span class="no">[2762]</span>
    <a class="thread-title" href="#2762">Re2:ありがち</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-17T03:27:10">2003年05月17日 03:27</time></h1>
    <div class="body">▼ 蒔田　信幸さん<br>&gt; ▼ すいさん<br>&gt; 前半は賛成出来ますが、後半はできかねます。<br>&gt; たとえば、<br>&gt; ------<br>&gt; a<br>&gt; b<br>&gt; c<br>&gt; ------<br>&gt; とあったときに、正規表現の「D*a」は１回のマッチですが、「D*」であれば、０回のマッチが正しいのではないでしょうか。<br>&gt; 全ての文字にマッチするのは「.」（ドット）ですので。<br><br>D*a は、１回（a に）マッチしますが、<br>D* は、０回じゃなくて、少なくとも３回(a,b,cの頭)にマッチしたくなりません？<br><br><br></div></section>
    </li><li><section><h1 id=2763>
    <span class="no">[2763]</span>
    <a class="thread-title" href="#2763">Re2:ありがち</a>
    <span class="author">すい</span>
    <time datetime="2003-05-17T05:07:28">2003年05月17日 05:07</time></h1>
    <div class="body">&gt;前半は賛成出来ますが、後半はできかねます。<br><br>賛成出来る／出来ないの問題ではありません。<br>正規表現は こういう動作をするものです。<br><br>&gt;------<br>&gt;a<br>&gt;b<br>&gt;c<br>&gt;------<br>&gt;とあったときに、正規表現の「D*a」は１回のマッチですが、「D*」であれば、０回のマッチが正しいのではないでしょうか。<br>&gt;全ての文字にマッチするのは「.」（ドット）ですので。<br><br>「文字にマッチする」のではなく、「文字と文字の間の、文字数０文字」に<br>マッチするのです。それが一般的な正規表現の仕様です。<br>現実に世の中にある正規表現がまともに動作するユーティリティで<br>試してみれば、私が記述したとおりの動作結果になりますよ。<br></div></section>
    <ul><li><section><h1 id=2764>
    <span class="no">[2764]</span>
    <a class="thread-title" href="#2764">Re3:ありがち</a>
    <span class="author">蒔田　信幸</span>
    <time datetime="2003-05-17T12:24:15">2003年05月17日 12:24</time></h1>
    <div class="body">▼ すいさん<br>すみません、残念です。<br>サンプルを試した結果、どちらも予想と違っていました。<br>-----<br>aabb<br>bbaa<br>-----<br>のテキストがあった時、「a*」にマッチするのは、複数回の指定をしていないので、行頭のみでした。<br>１文字と＊や？の組み合わせだけの場合は先頭に＾が無言で付くようです。<br><br>ちなみに、このサンプルでは<br>置換前　「a*」<br>置換後　「A」<br>正規表現　チェック<br><br>------<br>Abb<br>Abbaa<br>------<br>となりました、GNU Awk 3.0.3を使いました。<br>私も、他のプログラムの正規表現でも同じだと思います。</div></section>
    <ul><li><section><h1 id=2765>
    <span class="no">[2765]</span>
    <a class="thread-title" href="#2765">Re4:ありがち</a>
    <span class="author">すい</span>
    <time datetime="2003-05-17T14:19:00">2003年05月17日 14:19</time></h1>
    <div class="body">&gt;-----<br>&gt;aabb<br>&gt;bbaa<br>&gt;-----<br>&gt;のテキストがあった時、「a*」にマッチするのは、複数回の指定をしていないので、行頭のみでした。<br>&gt;１文字と＊や？の組み合わせだけの場合は先頭に＾が無言で付くようです。<br>&gt;<br>&gt;ちなみに、このサンプルでは<br>&gt;置換前　「a*」<br>&gt;置換後　「A」<br>&gt;正規表現　チェック<br>&gt;<br>&gt;------<br>&gt;Abb<br>&gt;Abbaa<br>&gt;------<br>&gt;となりました、GNU Awk 3.0.3を使いました。<br>&gt;私も、他のプログラムの正規表現でも同じだと思います。<br><br>^ が付くなんて事は ありえません。<br>------<br>Abb<br>Abbaa<br>------<br>のような結果になるのは置換回数が１回になっているからでしょう。<br>awk の sub 使ったりすると、sub １回実行当たり１回の置換しか<br>実行されませんから「初めの１回目にマッチする位置である行頭位置」<br>の置換だけがおこなわれ、そのようになります。<br>awk なら gsub 使わないとね。<br><br>-- test.awk ---<br>{<br>&#9;gsub( /a*/ , "A" );<br>&#9;print;<br>}<br>---------------<br><br>-- test.txt --<br>aabb<br>bbaa<br>--------------<br><br>で jgawk -f test.awk &lt; test.txt すると<br><br>--------------<br>AAbAb<br>AbAbA<br>--------------<br>ですね。<br>検索語「a*」が「aa」の部分、「bb」の「b」と「b」の間、<br>そして２行目の行頭「bb」の前の位置などにもマッチして<br>いるのが分かりますよね？<br><br>同様ように sed で<br><br>-- test.sed ---<br>s/a*/A/g<br>---------------<br><br>sed -f test.sed &lt; test.txt すると<br><br>---------------<br>AAbAb<br>AbAbA<br>---------------<br><br>です。<br><br>perl で<br>-- test.pl ---<br>while(&lt;&gt;) {<br>&#9;s/a*/A/g;<br>&#9;print;<br>}<br>--------------<br><br>perl test.pl &lt; test.txt すると<br><br>---------------<br>AAbAbA<br>AAbAbAA<br>A<br>---------------<br><br>です。<br><br>行末の改行コードなどの取り扱いがユーティリティごとに異なるため、<br>行末部分（改行コード部分）などに対して置換が 行われる／行われない<br>といった違いが出ますけどね。<br></div></section>
    <ul><li><section><h1 id=2770>
    <span class="no">[2770]</span>
    <a class="thread-title" href="#2770">Re5:ありがち</a>
    <span class="author">蒔田　信幸</span>
    <time datetime="2003-05-17T16:55:01">2003年05月17日 16:55</time></h1>
    <div class="body">▼ すいさん<br>モデルはａｗｋで良かったのですね。<br>gsubを忘れていました。ほっとしました。（暖）<br><br>私のサンプルでもawkは{gsub(/a*/,"A"); print}で、<br>------<br>AbAbA<br>AbAbA<br>------<br>となりました。<br><br>▼ かろとさん<br>有難うございます、今読みました。</div></section>
    </li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=2760>
    <span class="no">[2760]</span>
    <a class="thread-title" href="#2760">Re:ありがち</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-17T03:01:33">2003年05月17日 03:01</time></h1>
    <div class="body">▼ すいさん<br>&gt; -----<br>&gt; EOLaEOLbEOLcEOL<br>&gt; EOLdEOLeEOLfEOL<br>&gt; -----<br>&gt; と、なるかと。他の「\r*\n*」「[\r\n]*」「\r?」も全て同じです。<br>&gt; <br>&gt; ．．．残念ながら、こうなりませんが。20030504,20030513 共<br><br>今のベースの検索・置換のアルゴリズムだと、こうなれないのですよね・・・<br>この辺り見ていて思うのが、<br>後方（↓）検索を、現在のキャレット位置から検索してマッチするアルゴリズムなのですが、<br>これを、現在のキャレット位置の次から検索してマッチするようなアルゴリズムに変えると<br>上のような動作も期待はできるのですけどね・・・やってみないとわからんけど・・<br>＃一段落ついたら、チャレンジしてみるかも・・<br><br>正規表現のミソである　「長さ０」のマッチ時に、現状のアルゴリズムは<br>キャレット位置を動かさないので、無限に長さ０にマッチし続けてしまうのが、<br>よくでる、「置換を押しても先へ行かない」や「無限置換」の温床になってます。<br><br>おかげで、勉強させてもらってます。（笑）<br><br></div></section>
    </li></ul></li></ul></li></ul></li><li><section><h1 id=2759>
    <span class="no">[2759]</span>
    <a class="thread-title" href="#2759">Re2:置換関係 - 再チャレンジ</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-17T02:46:41">2003年05月17日 02:46</time></h1>
    <div class="body">＜記事訂正＞<br>ちょっと方針変更です。後ほど、また別のをアップロードします。<br><br><br>----------　＜元記事＞<br>すいさん。毎度の確認ありがとうございます。<br>懲りずに、再チャレンジです。（おつきあい下さいね）<br><br><a href=http://members.tripod.co.jp/karoto/Archive/sakura_test_20030516.lzh target=_top><nobr>http://<wbr>members.<wbr>tripod.<wbr>co.<wbr>jp/<wbr>karoto/<wbr>Archive/<wbr>sakura_t<wbr>est_2003<wbr>0516.<wbr>lzh</nobr></a><br><br>既出の無限置換は対策したつもりです。（あくまで、つもり）<br>(でも、話題の\r?\n? は　無限にマッチし続けます（笑））<br>・「^」→「abc」の置換で、カーソルが表示されないので、どこが置換対象かわからないというのですが、[F3][Shift+F3] の時のようにカーソルだけでも表示できればいいのですが、やりかた分からず断念。誰かヘルプ～。<br><br><br>＄の置換は難しいですねぇ～。<br>bregexp.dllに置換させると、「$」→「hogehoge」の場合<br>普通にやると、\r\n改行は、\rhogehoge\n にならざるを得なくて<br>（現状、そうもなりませんが・・）（笑）<br>どうしたら　いいものやらです。<br>＃理想的には、bregexp.dllが \r\nも\nも\rも改行扱いして $とマッチしてくれりゃ楽なんですが・・・<br>＃（もちろん、\r\n$と書かれれば、それに従う）<br></div></section>
    <ul><li><section><h1 id=2767>
    <span class="no">[2767]</span>
    <a class="thread-title" href="#2767">Re3:置換関係 - 再チャレンジ</a>
    <span class="author">げんた</span>
    <time datetime="2003-05-17T16:02:39">2003年05月17日 16:02</time></h1>
    <div class="body">置換の方はまだまだ手こずりそうだしプリンタの設定も不完全のようなので、先にみくさんの方だけ取り込んで正式版を出してしまっていいですか？<br></div></section>
    <ul><li><section><h1 id=2768>
    <span class="no">[2768]</span>
    <a class="thread-title" href="#2768">Re4:置換関係 - 再チャレンジ</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-17T16:12:57">2003年05月17日 16:12</time></h1>
    <div class="body">▼ げんたさん<br>&gt; 置換の方はまだまだ手こずりそうだしプリンタの設定も不完全のようなので、先にみくさんの方だけ取り込んで正式版を出してしまっていいですか？<br><br>はい。そうしてください。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=2717>
    <span class="no">[2717]</span>
    <a class="thread-title" href="#2717">印刷関係 - 誰かよろしく</a>
    <span class="author">すい</span>
    <time datetime="2003-05-07T01:51:29">2003年05月07日 01:51</time></h1>
    <div class="body">&gt;バグ修正<br>&gt;・印刷プレビューから「プリンタ」ボタンを押下して「キャンセル」を押下するとプリンタが不明になる<br>&gt;・プリンタの用紙設定がエディタ側に反映されない<br>&gt;・プリンタ固有の設定変更が記憶されないため2in1等の設定が行えない<br>&gt;<br>&gt;動作(仕様)変更<br>&gt;・「印刷」時に、通常の印刷ダイアログを出すように変更<br>&gt;・プリンタ設定ダイアログをモーダルに変更<br>&gt;・プリンタダイアログで選んだプリンタは、プロセス終了まで記憶してます<br><br>私は印刷関係は ちょっと、と、あらかじめ言っておくための書き込みです。<br><br>軽く見た感じでは良さげですが、詳しく(というか実質全然)見ていません。<br><br>私は印刷、滅多に使わないですし、使う時でも凝った事やりませんから<br>どこか関係無さそうな所に影響が出ていても気付けないでしょうし、<br>そもそも家にはプリンタが無いし。<br><br>という事で私は一切印刷関係のチェック出来ませんので他の皆様よろしく  m(_ _)m 　と言ってみる書き込み。<br># げんたさん から既に出ている点くらいなのかな？<br></div></section>
    </li><li><section><h1 id=2718>
    <span class="no">[2718]</span>
    <a class="thread-title" href="#2718">他</a>
    <span class="author">すい</span>
    <time datetime="2003-05-07T01:51:29">2003年05月07日 01:51</time></h1>
    <div class="body">&gt;・フリーカーソルでない時に行削除すると、EOLよりカーソルが右になる不具合対策<br>私が試した範囲では動作正常になりました。<br>ただ動作にちょっと違和感がありますが．．．<br><br>| がカーソル位置として<br>-----<br>1:abcdefg|<br>2:abcd<br>3:abcdefghijk<br>-----<br><br>↑の状態でカーソル移動 [↓] [↓] と操作すると↓<br><br>-----<br>1:abcdefg<br>2:abcd<br>3:abcdefg|hijk<br>-----<br><br>と、なりますよね。その動作に合わせて<br><br>-----<br>1:abcdefg|<br>2:abcd<br>3:abcdefghijk<br>-----<br><br>↑から行削除を２回続けて実行すると↓<br><br>-----<br>1:abcdefg|hijk<br>-----<br><br>の位置にカーソルが来た方が、このエディタとしては自然な気がするのですが。<br># 無理？<br><br><br>&gt;・長音が半角カタカナに変換されない不具合を直前文字が全角カタカナなら変換するように変更<br>&gt;　ついでに「濁点」「半濁点」も変換するように変更<br><br>これ、そもそも不具合なのかなぁ？と、まず思ったのですが。単なる仕様変更じゃ。。。 (^^)<br><br>動作は確認しましたが、、、<br>前のカタカナ文字を含めて範囲選択されている場合の長音が半角になるのですね。<br>前がカタカナでも長音だけが選択されている場合には半角にならない。<br><br>私はこの動作仕様でも特に何も問題無いですが、動作仕様的に、なんか後々、<br>他のユーザーがバグと勘違いして「なんか動作がおかしい」とか言われそうな気も。<br>こういう仕様で良いでしょうか？という点で他のユーザーの方からも<br>意見を聞いておきたい気分かも。<br></div></section>
    <ul><li><section><h1 id=2719>
    <span class="no">[2719]</span>
    <a class="thread-title" href="#2719">Re:他</a>
    <span class="author">かろと</span>
    <time datetime="2003-05-08T00:21:18">2003年05月08日 00:21</time></h1>
    <div class="body">▼ すいさん<br>&gt; ただ動作にちょっと違和感がありますが．．．<br>&gt; -----<br>&gt; 1:abcdefg|hijk<br>&gt; -----<br>&gt; <br>&gt; の位置にカーソルが来た方が、このエディタとしては自然な気がするのですが。<br>&gt; # 無理？<br><br>気持ちは分かります（笑）<br>簡単にできるのかな～。長考モードです。（笑）<br><br>&gt; これ、そもそも不具合なのかなぁ？と、まず思ったのですが。単なる仕様変更じゃ。。。 (^^)<br><br>ははは・・・BugsInfo.txtに入っていたので不具合扱いしてました(--;<br><br>&gt; 私はこの動作仕様でも特に何も問題無いですが、動作仕様的に、なんか後々、<br>&gt; 他のユーザーがバグと勘違いして「なんか動作がおかしい」とか言われそうな気も。<br>&gt; こういう仕様で良いでしょうか？という点で他のユーザーの方からも<br>&gt; 意見を聞いておきたい気分かも。<br><br>ですね。</div></section>
    </li></ul></li></ul></li></ul></li><li><section><h1 id=2714>
    <span class="no">[2714]</span>
    <a class="thread-title" href="#2714">Re3: バグ修正</a>
    <span class="author">げんた</span>
    <time datetime="2003-05-06T22:46:29">2003年05月06日 22:46</time></h1>
    <div class="body">お疲れ様です。<br><br>&gt;・プリンタの用紙設定がエディタ側に反映されない<br>&gt;・プリンタ固有の設定変更が記憶されないため2in1等の設定が行えない<br>&gt;の不具合も修正したつもりです。<br>プリンタの不具合修正いろいろ試してみました。おおむねうまく動くようですが、ちょっと気になったことがあります。<br><br>用紙サイズの設定がプリンタ設定と印刷設定の両方にあるのですが、プリンタ設定で用紙サイズを変更すると変更が反映されないようで印刷プレビューも変化しません。<br><br>印刷設定で用紙サイズを変更するとプリンタ固有の設定がデフォルトに戻るようです。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></body></html>