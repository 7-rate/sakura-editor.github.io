<!DOCTYPE html><html><head><meta charset='utf-8'><title>細かいことだが。</title><link rel='stylesheet' href='bbs.css' /><script src='bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ansiトップへ</a><li><div class="list-title">
    <span class="no">3151</span>
    <a class="title" href="3151.html#3151">細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3153</span>
    <a class="title" href="3151.html#3153">Re:細かいことだが。</a></div>
    </li><li><div class="list-title">
    <span class="no">3154</span>
    <a class="title" href="3151.html#3154">Re:細かいことだが。</a></div>
    </li><li><div class="list-title">
    <span class="no">3155</span>
    <a class="title" href="3151.html#3155">RE: 細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3158</span>
    <a class="title" href="3151.html#3158">Re2: 細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3164</span>
    <a class="title" href="3151.html#3164">Re3: 細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3179</span>
    <a class="title" href="3151.html#3179">Re4: 細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3186</span>
    <a class="title" href="3151.html#3186">Re5: 細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3187</span>
    <a class="title" href="3151.html#3187">Re6: 細かいことだが。</a></div>
    <ul><li><div class="list-title">
    <span class="no">3191</span>
    <a class="title" href="3151.html#3191">Re: AboutBox</a></div>
    <ul><li><div class="list-title">
    <span class="no">3200</span>
    <a class="title" href="3151.html#3200">Re2: AboutBox</a></div>
    <ul><li><div class="list-title">
    <span class="no">3205</span>
    <a class="title" href="3151.html#3205">Re3: AboutBox</a></div>
    </li></ul></li></ul></li><li><div class="list-title">
    <span class="no">3219</span>
    <a class="title" href="3151.html#3219">Re7: URL表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">3221</span>
    <a class="title" href="3151.html#3221">Re: URL表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">3223</span>
    <a class="title" href="3151.html#3223">Re2: URL表示</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=3151>
    <span class="no">[3151]</span>
    <a class="title" href="#3151">細かいことだが。</a>
    <span class="author">wmlhq</span>
    <time datetime="2003-09-18T11:27:28">2003年09月18日 11:27</time></h1>
    <div class="body">□「バージョン」ダイアログのURLの色を変え、下線をつけて欲しい。<br>□「バージョン」ダイアログの背景を明るい色に変える(白や淡いピンクなど)。WM_CTLCOLOR*を使うこと。<br>□操作系では...や:を正しく使って欲しい（・・・と・・・・は...に変えるなど）。<br>□カラー表示をWindows標準に変える簡単な方法は？<br>□ダイアログのタブ移動の順番を正しく。<br>□初心者が戸惑わないように色指定リストのチェックをWindows標準のチェックボックスに近いデザインにする。<br>□スクロールバーのメッセージをきちんと届けて欲しい。<br></div></section>
    <ul><li><section><h1 id=3153>
    <span class="no">[3153]</span>
    <a class="title" href="#3153">Re:細かいことだが。</a>
    <span class="author">ryoji</span>
    <time datetime="2003-09-18T18:46:00">2003年09月18日 18:46</time></h1>
    <div class="body">&gt; □スクロールバーのメッセージをきちんと届けて欲しい。<br><br>これって、ソース上のどの個所を問題視されているのでしょう？</div></section>
    </li><li><section><h1 id=3154>
    <span class="no">[3154]</span>
    <a class="title" href="#3154">Re:細かいことだが。</a>
    <span class="author">ryoji</span>
    <time datetime="2003-09-18T18:53:57">2003年09月18日 18:53</time></h1>
    <div class="body">&gt; □スクロールバーのメッセージをきちんと届けて欲しい。<br><br>これって、ソース上のどの個所を問題視されているのでしょう？</div></section>
    </li><li><section><h1 id=3155>
    <span class="no">[3155]</span>
    <a class="title" href="#3155">RE: 細かいことだが。</a>
    <span class="author">みく</span>
    <time datetime="2003-09-18T21:42:00">2003年09月18日 21:42</time></h1>
    <div class="body">&gt;タイトル: RE: 細かいことだが。<br>&gt;発言者: wmlhq<br>&gt;□「バージョン」ダイアログのURLの色を変え、下線をつけて欲しい。<br>&gt;□「バージョン」ダイアログの背景を明るい色に変える(白や淡いピンクなど)。WM_CTLCOLOR*を使うこと。<br>&gt;□操作系では...や:を正しく使って欲しい（・・・と・・・・は...に変えるなど）。<br>&gt;□カラー表示をWindows標準に変える簡単な方法は？<br>&gt;□ダイアログのタブ移動の順番を正しく。<br>&gt;□初心者が戸惑わないように色指定リストのチェックをWindows標準のチェックボックスに近いデザインにする。<br>&gt;□スクロールバーのメッセージをきちんと届けて欲しい。<br><br>個所が分かってたら、diffか行番号書いてください。<br></div></section>
    <ul><li><section><h1 id=3158>
    <span class="no">[3158]</span>
    <a class="title" href="#3158">Re2: 細かいことだが。</a>
    <span class="author">wmlhq</span>
    <time datetime="2003-09-19T15:57:03">2003年09月19日 15:57</time></h1>
    <div class="body">あんまり年寄りをいじめんでくだされ。若いんだから20分程度でできるじゃろ？<br><br>&gt;□スクロールバーのメッセージをきちんと届けて欲しい。<br>これは特殊な用途で使おうと思った。じゃが、君たちには必要ないんじゃな。</div></section>
    <ul><li><section><h1 id=3164>
    <span class="no">[3164]</span>
    <a class="title" href="#3164">Re3: 細かいことだが。</a>
    <span class="author">wmlhq</span>
    <time datetime="2003-09-20T13:57:52">2003年09月20日 13:57</time></h1>
    <div class="body">まずは、背景を。ssrc_2003-09-20へのパッチ。<br>diff -ur --dos sakura_core-old/CDlgAbout.cpp sakura_core/CDlgAbout.cpp<br>--- sakura_core-old/CDlgAbout.cpp&#9;Sat Sep 20 01:41:16 2003<br>+++ sakura_core/CDlgAbout.cpp&#9;Sat Sep 20 13:55:57 2003<br>@@ -82,7 +82,10 @@<br> &#9;&#9;}<br> &#9;&#9;result = TRUE;<br> &#9;&#9;break;<br>+&#9;case WM_CTLCOLORDLG:<br>+&#9;&#9;return m_hbrBkgnd;<br> &#9;case WM_CTLCOLORSTATIC:<br>+&#9;&#9;SetBkMode((HDC)wParam, TRANSPARENT);<br> &#9;&#9;if( nCursorState == 1 &amp;&amp;<br> &#9;&#9;&#9;(HWND)lParam == GetDlgItem(hWnd, IDC_STATIC_URL_UR ) ){<br> &#9;&#9;&#9;::SetTextColor( (HDC)wParam, RGB(0,0,0xff) );<br>@@ -108,6 +111,9 @@<br> &#9;&#9;&#9;result = TRUE;<br> &#9;&#9;}<br> &#9;&#9;break;<br>+&#9;case WM_DESTROY:<br>+&#9;&#9;DeleteObject(m_hbrBkgnd);<br>+&#9;&#9;return FALSE;<br> &#9;}<br> &#9;return result;<br> }<br>@@ -176,7 +182,8 @@<br> &#9;&#9;::SendMessage( hIconWnd, STM_SETICON, (WPARAM)hIcon, 0 );<br> &#9;}<br> &#9;//&#9;To Here Dec. 2, 2002 genta<br>-<br>+ <br>+&#9;m_hbrBkgnd = CreateSolidBrush(RGB(0xff, 0xcc, 0xcc));<br> &#9;/* 基底クラスメンバ */<br> &#9;return CDialog::OnInitDialog( m_hWnd, wParam, lParam );<br> }<br>diff -ur --dos sakura_core-old/CDlgAbout.h sakura_core/CDlgAbout.h<br>--- sakura_core-old/CDlgAbout.h&#9;Sat Sep 20 01:41:16 2003<br>+++ sakura_core/CDlgAbout.h&#9;Sat Sep 20 13:53:50 2003<br>@@ -36,6 +36,7 @@<br> &#9;LPVOID GetHelpIdTable(void);&#9;//@@@ 2002.01.18 add<br> private:<br> &#9;int&#9; nCursorState;<br>+&#9;HBRUSH&#9;m_hbrBkgnd;<br> };</div></section>
    <ul><li><section><h1 id=3179>
    <span class="no">[3179]</span>
    <a class="title" href="#3179">Re4: 細かいことだが。</a>
    <span class="author">げんた</span>
    <time datetime="2003-09-24T02:03:47">2003年09月24日 02:03</time></h1>
    <div class="body">&gt;まずは、背景を。ssrc_2003-09-20へのパッチ。<br>ダイアログボックスに乗っているコントロールの背景が全然変わっていないのですが．<br><br>WM_CTLCOLORSTATICでm_hbrBkgndを返すようにしたらEDITとSTATICは変わりましたけど，ボタンとスクロールバーは変化無しです．<br>まぁそこまでこだわる必要はないように思いますけど<br></div></section>
    <ul><li><section><h1 id=3186>
    <span class="no">[3186]</span>
    <a class="title" href="#3186">Re5: 細かいことだが。</a>
    <span class="author">げんた</span>
    <time datetime="2003-09-25T01:09:13">2003年09月25日 01:09</time></h1>
    <div class="body">ダイアログボックスの色変更サンプル<br>http://sakura-editor.sourceforge.net/snapshot/sakura-verdlg.zip<br><br>あまり趣味がいいとは言えないけどなぁ．<br></div></section>
    <ul><li><section><h1 id=3187>
    <span class="no">[3187]</span>
    <a class="title" href="#3187">Re6: 細かいことだが。</a>
    <span class="author">サイコジプシー</span>
    <time datetime="2003-09-25T10:20:56">2003年09月25日 10:20</time></h1>
    <div class="body">白か#fffbf0の方がよさげです。スマソ。<br>さて、テキストの色は常に青にしたいので。<br>...<br>if( (HWND)lParam == GetDlgItem(hWnd, IDC_STATIC_URL_UR ) ){<br> ::SetTextColor( (HDC)wParam, RGB(0,0,0xff) );<br> if( nCursorState == 1 )<br>  result = (INT_PTR)(HBRUSH)GetStockObject(NULL_BRU<br>SH);<br>} else ...（以下同様）<br><br>お次は下線。IDC_STATIC_URL_* に SS_OWNERDRAW|WS_TABSTOP スタイルを追加して<br>BOOL CDlgAbout::OnDrawItem(...)<br>{<br> BOOL f = DefWindowProc(...); // 普通に描画？ だめだったらTextOutで描いてやって。<br> if((UINT)wParam == IDC_STATIC_URL_UR || <br>    (UINT)wParam == IDC_STATIC_URL_ORG ) {<br>  LPDRAWITEMSTRUCT lpdis = (LP...)lParam;<br>  RECT&amp; rc = lpdis-&gt;rcItem;<br>  MoveToEx(...); LineTo(...); // 下線を描く。色はこれでいいのか？<br>  if(lpdis-&gt;itemState &amp; ODS_FOCUS)<br>   DrawFocusRect(lpdis-&gt;hDC, &amp;rc); // キーボード操作用。<br>  f = TRUE;<br> }<br> return f;<br>}<br>URLフォーカス時にEnter押すとぶっ飛んでくれないかな？</div></section>
    <ul><li><section><h1 id=3191>
    <span class="no">[3191]</span>
    <a class="title" href="#3191">Re: AboutBox</a>
    <span class="author">げんた</span>
    <time datetime="2003-09-26T01:55:59">2003年09月26日 01:55</time></h1>
    <div class="body">&gt;#fffbf0<br>なんかダイアログボックスがエディタの背景にとけ込んでしまって見にくいな．カメレオンみたいだ．<br><br>&gt;お次は下線。IDC_STATIC_URL_* に SS_OWNERDRAW|WS_TABSTOP スタイルを追加して<br>ここはOK．<br><br>&gt;BOOL CDlgAbout::OnDrawItem(...)<br>文字列表示はだめぽ．<br>GetWindowTextで文字列を取得してExtTextOutで描画．<br>文字列は自前で書くので，WM_CTLCOLORSTATICでの文字色設定は不要になった．<br><br>それと下線を青くするためにはPenを設定しなくてはならない．そのまま線を引くと黒くなってしまう．<br>文字の下に合わせるには文字の表示領域を取得して座標を計算する必要があると思ったが，<br>なんとなくうまくかけているので，現状でいいだろう．<br><br>&gt;URLフォーカス時にEnter押すとぶっ飛んでくれないかな？<br>キー入力を拾って，nCursorStateに応じてブラウザを開けば良いような気がする．<br><br>あと，キーの上にカーソルを持っていったとき指の形になって欲しいとか．<br>それとカーソルを持っていったとき色が変わるのも捨てがたいんだけどなぁ．<br><br>---<br>[現状]<br>http://sakura-editor.sourceforge.net/snapshot/sakura-verdlg2.zip<br><br>BOOL CDlgAbout::OnDrawItem( WPARAM wParam, LPARAM lParam )<br>{<br><br>&#9;if((UINT)wParam == IDC_STATIC_URL_UR || <br>&#9;&#9;(UINT)wParam == IDC_STATIC_URL_ORG ) {<br> <br>&#9;&#9;LPDRAWITEMSTRUCT lpdis = (LPDRAWITEMSTRUCT)lParam;<br>&#9;&#9;RECT&amp; rc = lpdis-&gt;rcItem;<br>&#9;&#9;POINT pt;<br><br>&#9;&#9;//&#9;Sep. 25, 2003 wmlhq 文字は常に青色<br>&#9;&#9;::SetTextColor( lpdis-&gt;hDC, RGB(0,0,0xff) );<br><br>&#9;&#9;// 普通に描画？ だめだったらTextOutで描いてやって。<br>&#9;&#9;HWND hCtl = GetDlgItem( m_hWnd, (UINT)wParam );<br>&#9;&#9;char buf[256];<br>&#9;&#9;GetWindowText( hCtl, buf, 256 );<br> <br>&#9;&#9;ExtTextOut( lpdis-&gt;hDC, rc.left, rc.top, ETO_CLIPPED, &amp;rc,<br>&#9;&#9;&#9;buf, GetWindowTextLength( hCtl ), NULL);<br> <br>&#9;&#9;HPEN hPen = CreatePen( PS_SOLID, 1, RGB(0,0,0xff));<br>&#9;&#9;HPEN hOldPen = (HPEN)SelectObject( lpdis-&gt;hDC, hPen );<br> <br>&#9;&#9;// 下線を描く。色はこれでいいのか？<br>&#9;&#9;MoveToEx(lpdis-&gt;hDC, rc.left, rc.bottom - 1, &amp;pt);<br>&#9;&#9;LineTo( lpdis-&gt;hDC, rc.right, rc.bottom - 1);<br>&#9;&#9;if(lpdis-&gt;itemState &amp; ODS_FOCUS)<br>&#9;&#9;&#9;DrawFocusRect(lpdis-&gt;hDC, &amp;rc); // キーボード操作用。<br> <br>&#9;&#9;SelectObject( lpdis-&gt;hDC, hOldPen );<br>&#9;&#9;DeleteObject( hPen );<br>&#9;}<br>&#9;return TRUE;<br>}<br></div></section>
    <ul><li><section><h1 id=3200>
    <span class="no">[3200]</span>
    <a class="title" href="#3200">Re2: AboutBox</a>
    <span class="author">サイコジプシー</span>
    <time datetime="2003-09-29T11:46:34">2003年09月29日 11:46</time></h1>
    <div class="body">ビルドお疲れ。<br><br>&gt; &gt;URLフォーカス時にEnter押すとぶっ飛んでくれないかな？<br>&gt; キー入力を拾って，nCursorStateに応じてブラウザを開けば良いような気がする．<br>お頼み申しあげます。<br><br>&gt; あと，キーの上にカーソルを持っていったとき指の形になって欲しいとか．<br>WM_SETCURSORで、SetCursorすればー？　標準カーソルでしょ？<br><br>&gt; それとカーソルを持っていったとき色が変わるのも捨てがたいんだけどなぁ．<br>(idHovered == wParam ? RGB(0xff,0,0) : RGB(0,0,0xff))<br>GetCursorPos,ScreenToClient,PtInRectでカーソル位置を確認して、FillRectで背景が描ける。<br><br>&gt;文字列は自前で書くので，WM_CTLCOLORSTATICでの文字色設定は不要になった．<br>画面がちらついても私の責任ではない。<br><br>WS_TABSTOPのテスト成功。DrawFocusRectは失敗。なぜかTab押してもフォーカス枠が描かれない。(lpdis-&gt;itemState &amp; ODS_FOCUS)では駄目。</div></section>
    <ul><li><section><h1 id=3205>
    <span class="no">[3205]</span>
    <a class="title" href="#3205">Re3: AboutBox</a>
    <span class="author">もか</span>
    <time datetime="2003-09-30T18:17:23">2003年09月30日 18:17</time></h1>
    <div class="body">CDlgAbout関連なので、このツリーに書きます。<br><br>CDlgAbout::OnInitDialog()で、<br>FindFirstFile()しているのに、その戻り値のハンドルのチェックとFindClose()してません。<br></div></section>
    </li></ul></li></ul></li><li><section><h1 id=3219>
    <span class="no">[3219]</span>
    <a class="title" href="#3219">Re7: URL表示</a>
    <span class="author">げんた</span>
    <time datetime="2003-10-08T09:01:57">2003年10月08日 09:01</time></h1>
    <div class="body">URL上でカーソルを手の形にするためにはサブクラス化は避けられないみたい．あ～めんどくさ．<br>http://eureka.prits.jp/resources/developer/lib/ とかそのまま使っちゃいたいな．<br></div></section>
    <ul><li><section><h1 id=3221>
    <span class="no">[3221]</span>
    <a class="title" href="#3221">Re: URL表示</a>
    <span class="author">ryoji </span>
    <time datetime="2003-10-09T00:48:52">2003年10月09日 00:48</time></h1>
    <div class="body">&gt; URL上でカーソルを手の形にするためにはサブクラス化は避けられないみたい．あ～めんどくさ．<br><br>ちょっと忘れましたが、SS_NOTIFYあたりと両立できなかったような？<br>違いますかね。<br>で、サブクラス化のやつをUPしてみました。<br><br>ssrc_2003-09-20との差分<br>http://www.egroups.co.jp/files/sakura-editor/Developer/Source/URL_2003-09-20.zip<br><br>Win98/2k/XP環境で簡単なテストはしてあります。<br>よかったら見てやってください。<br>配色はてきと～に標準色から選択して割り当てました。<br>＃背景は通常のダイアログ色のが好きですが、いちおう白にしてあります。<br><br></div></section>
    <ul><li><section><h1 id=3223>
    <span class="no">[3223]</span>
    <a class="title" href="#3223">Re2: URL表示</a>
    <span class="author">げんた</span>
    <time datetime="2003-10-09T02:20:13">2003年10月09日 02:20</time></h1>
    <div class="body">&gt;で、サブクラス化のやつをUPしてみました。<br>神キタ━━━━━━(゜∀゜)━━━━━━!!!!<br>しかも，完璧すぎる...<br><br>ありがたくちょうだいしておきます．と同時にあんないい加減なコード書き込まなければ良かったと自己嫌悪．<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>