<!DOCTYPE html><html><head><meta charset='utf-8'><title>* No Subject *</title><link rel='stylesheet' href='bbs.css' /><script src='bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ansiトップへ</a><li><div class="list-title">
    <span class="no">1570</span>
    <a class="title" href="1570.html#1570">* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1571</span>
    <a class="title" href="1570.html#1571">Re:* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1573</span>
    <a class="title" href="1570.html#1573">Re2:* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1576</span>
    <a class="title" href="1570.html#1576">Re2:* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1577</span>
    <a class="title" href="1570.html#1577">Re3:* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1584</span>
    <a class="title" href="1570.html#1584">Re4:* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1585</span>
    <a class="title" href="1570.html#1585">Re5:* No Subject *</a></div>
    <ul><li><div class="list-title">
    <span class="no">1586</span>
    <a class="title" href="1570.html#1586">Re6: CShareData</a></div>
    <ul><li><div class="list-title">
    <span class="no">1587</span>
    <a class="title" href="1570.html#1587">Re7: CShareData</a></div>
    <ul><li><div class="list-title">
    <span class="no">1593</span>
    <a class="title" href="1570.html#1593">Ver　1.2.106.1</a></div>
    <ul><li><div class="list-title">
    <span class="no">1594</span>
    <a class="title" href="1570.html#1594">Re:Ver　1.2.106.1</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=1570>
    <span class="no">[1570]</span>
    <a class="title" href="#1570">* No Subject *</a>
    <span class="author">すとーにぃ</span>
    <time datetime="2002-02-13T11:43:07">2002年02月13日 11:43</time></h1>
    <div class="body">2/11のソースをコンパイルしてみました。<br><br>・共通設定のキー割り当てで「外部マクロ」を選択<br>または<br>・編集画面で右クリック<br>でお亡くなりになります(;_;)。<br><br>NT4.0SP6a + IE5.01SP2 + VC6SP5 です<br></div></section>
    <ul><li><section><h1 id=1571>
    <span class="no">[1571]</span>
    <a class="title" href="#1571">Re:* No Subject *</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-13T12:12:34">2002年02月13日 12:12</time></h1>
    <div class="body">&gt; ・共通設定のキー割り当てで「外部マクロ」を選択<br>&gt; または<br>&gt; ・編集画面で右クリック<br>&gt; でお亡くなりになります(;_;)。<br><br>すみません。手元では確認できませんでした。<br>Windows2000 + IE5.01SP2 + VC6SP5 です。<br><br>影響を受けそうなのはiniファイルだけですので、<br>いまあるiniファイルを、eGroupにアップロードするか<br>送っていただけないでしょうか？<br>調べてみたいと思います。<br><br>よろしくお願いします。<br></div></section>
    <ul><li><section><h1 id=1573>
    <span class="no">[1573]</span>
    <a class="title" href="#1573">Re2:* No Subject *</a>
    <span class="author">すとーにぃ</span>
    <time datetime="2002-02-13T12:27:04">2002年02月13日 12:27</time></h1>
    <div class="body">▼ やざきさん<br>&gt; 影響を受けそうなのはiniファイルだけですので、<br>&gt; いまあるiniファイルを、eGroupにアップロードするか<br>&gt; 送っていただけないでしょうか？<br>&gt; 調べてみたいと思います。<br><br>試しにiniファイルを削除したところ、右クリックでお亡くなりになる<br>現象は回避されました。<br>が、キー割り当ての画面ではやはり死にます。<br><br>iniファイルの送信は帰宅後になると思います。m(_ _)m<br></div></section>
    <ul><li><section><h1 id=1576>
    <span class="no">[1576]</span>
    <a class="title" href="#1576">Re2:* No Subject *</a>
    <span class="author">げんた</span>
    <time datetime="2002-02-13T13:15:08">2002年02月13日 13:15</time></h1>
    <div class="body">&gt;試しにiniファイルを削除したところ、右クリックでお亡くなりになる<br>&gt;現象は回避されました。<br>&gt;が、キー割り当ての画面ではやはり死にます。<br>キー割り当て，ツールバー共に「外部マクロ」を選択した瞬間に死にますね．<br>PPA.DLLがあるときのみ再現します．<br></div></section>
    <ul><li><section><h1 id=1577>
    <span class="no">[1577]</span>
    <a class="title" href="#1577">Re3:* No Subject *</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-13T13:18:10">2002年02月13日 13:18</time></h1>
    <div class="body">▼ げんたさん<br>&gt; PPA.DLLがあるときのみ再現します．<br><br>んが。確認しました。早速修正します。</div></section>
    <ul><li><section><h1 id=1584>
    <span class="no">[1584]</span>
    <a class="title" href="#1584">Re4:* No Subject *</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-13T14:28:18">2002年02月13日 14:28</time></h1>
    <div class="body">▼ やざきさん<br>&gt; ▼ げんたさん<br>&gt; &gt; PPA.DLLがあるときのみ再現します．<br>&gt; <br>&gt; んが。確認しました。早速修正します。<br><br>と言って見たものの、手がかりつかめずです。。。</div></section>
    <ul><li><section><h1 id=1585>
    <span class="no">[1585]</span>
    <a class="title" href="#1585">Re5:* No Subject *</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-13T16:45:36">2002年02月13日 16:45</time></h1>
    <div class="body">▼ やざきさん<br>&gt; ▼ やざきさん<br>&gt; &gt; ▼ げんたさん<br>&gt; &gt; &gt; PPA.DLLがあるときのみ再現します．<br>&gt; &gt; <br>&gt; &gt; んが。確認しました。早速修正します。<br>&gt; <br>&gt; と言って見たものの、手がかりつかめずです。。。<br><br>CSMacroMgr.cppのコンストラクタで宣言して、すぐに破棄されている<br><br>CShareData&#9;m_cShareData;<br><br>を、クラスメンバに持っていったら死ななくなりました。<br>お試しあれ。<br><br>しかし、PPA.DLLのありなしで変わるのはよくわかりません。</div></section>
    <ul><li><section><h1 id=1586>
    <span class="no">[1586]</span>
    <a class="title" href="#1586">Re6: CShareData</a>
    <span class="author">げんた</span>
    <time datetime="2002-02-13T18:29:51">2002年02月13日 18:29</time></h1>
    <div class="body">&gt;CShareData&#9;m_cShareData;<br>&gt;を、クラスメンバに持っていったら死ななくなりました。<br>デストラクタでUnmapView していますから，CShareDataがいなくなるとアドレスの先のメモリが消えちゃうんですね．ということは，DLLSHARE* とCShareData の存続期間は同一である必要がありますね．<br><br>やざきさんのCPPA.cppとCSMacroManager.cppを見たところいくつか問題点が見つかりました．とりあえず<br>・上記問題に関連して，CEditViewのCShareData.cppを共用しているがオブジェクトの存続期間がきちんと考慮されているか．<br>・CSMacroManager.cppのコンストラクタでnewしているManagerがどこでもdeleteされていない．<br>時間ができたらもう少し見直してみます．<br><br>&gt;PPA.DLLのありなしで変わるのはよくわかりません。<br>同一プロセスから複数回 mapした場合には同じアドレスが返されてOS内部の参照カウンタが増えるだけだから，にしてはCEditView等が既に使っているはずではありますが．同じアドレスが返されること「も」あるのかな？<br></div></section>
    <ul><li><section><h1 id=1587>
    <span class="no">[1587]</span>
    <a class="title" href="#1587">Re7: CShareData</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-13T19:24:52">2002年02月13日 19:24</time></h1>
    <div class="body">なるほど。<br><br>CShareDataは役割とスコープをもう一度考え直したほうがよさそうですか？<br><br>・CShareDataは、CProcessでnew/deleteする。<br>　＃そうすれば、起動直後にCreateFileMapping()されて、終了時にUnmapView()されるよね？<br><br>・CShareDataのインスタンスは、CShareData::getInstance()で取得。<br>　ひとまずあとは今までどおり。<br>　CShareDataはどこでもnew/deleteできるけど、new/deleteしたときの動作は（はじめのうちは）保証しない。<br><br>というのでどうかな？<br>今回みたいなバグは、CShareDataが静的/動的に確保しなおされているところを探せば、拾えるようになる。<br><br>＃後ほど、ソース（差し替え用ファイルのみ）とお試し版をアップロードしますね。<br>＃期待していて幻滅したかたごめんなさい。もう一度トライしてみてください(__;</div></section>
    <ul><li><section><h1 id=1593>
    <span class="no">[1593]</span>
    <a class="title" href="#1593">Ver　1.2.106.1</a>
    <span class="author">Youma</span>
    <time datetime="2002-02-14T15:43:43">2002年02月14日 15:43</time></h1>
    <div class="body">既出かもしれませんが　上記のバージョンで<br>PPA.DLLをExeファイルと同じフォルダにコピーしている状況で、<br>コマンド一覧（Shift＋F1)を選ぶとメモリが読めないと死にます<br><br>気長に待ちますのでよろしくです。</div></section>
    <ul><li><section><h1 id=1594>
    <span class="no">[1594]</span>
    <a class="title" href="#1594">Re:Ver　1.2.106.1</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-14T15:52:51">2002年02月14日 15:52</time></h1>
    <div class="body">▼ Youmaさん<br>&gt; 既出かもしれませんが　上記のバージョンで<br>&gt; PPA.DLLをExeファイルと同じフォルダにコピーしている状況で、<br>&gt; コマンド一覧（Shift＋F1)を選ぶとメモリが読めないと死にます<br>&gt; <br>&gt; 気長に待ちますのでよろしくです。<br><br>ほんとにごめんなさいです。陳謝。<br><br>13日のお試し版では直ってると思います。<br>試してみてください(__;</div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>