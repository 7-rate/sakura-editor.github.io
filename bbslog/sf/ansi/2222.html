<!DOCTYPE html><html><head><meta charset='utf-8'><title>diffの不具合</title><link rel='stylesheet' href='bbs.css' /><script src='bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ansiトップへ</a><li><div class="list-title">
    <span class="no">2222</span>
    <a class="title" href="2222.html#2222">diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2223</span>
    <a class="title" href="2222.html#2223">RE: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2229</span>
    <a class="title" href="2222.html#2229">RE2: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2231</span>
    <a class="title" href="2222.html#2231">Re3: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2233</span>
    <a class="title" href="2222.html#2233">Re4: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2236</span>
    <a class="title" href="2222.html#2236">Re5: diffの不具合</a></div>
    </li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2242</span>
    <a class="title" href="2222.html#2242">Re2: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2243</span>
    <a class="title" href="2222.html#2243">Re3: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2244</span>
    <a class="title" href="2222.html#2244">Re4: diffの不具合</a></div>
    <ul><li><div class="list-title">
    <span class="no">2245</span>
    <a class="title" href="2222.html#2245">Re5: diffの不具合</a></div>
    </li><li><div class="list-title">
    <span class="no">2246</span>
    <a class="title" href="2222.html#2246">Re5: diffの不具合</a></div>
    </li><li><div class="list-title">
    <span class="no">2247</span>
    <a class="title" href="2222.html#2247">Re5: diffの不具合</a></div>
    </li><li><div class="list-title">
    <span class="no">2248</span>
    <a class="title" href="2222.html#2248">Re5: diffの不具合</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=2222>
    <span class="no">[2222]</span>
    <a class="title" href="#2222">diffの不具合</a>
    <span class="author">げんた</span>
    <time datetime="2002-06-30T13:17:25">2002年06月30日 13:17</time></h1>
    <div class="body">2chより転載<br><br>386 ：名無しさん＠お腹いっぱい。 ：02/06/29 14:19 ID:???<br>diff差分表示したあとでファイルをいじると、<br>diff関係のメニューがグレイアウトしてしまい<br>表示のクリアなどが出来なくなる。<br></div></section>
    <ul><li><section><h1 id=2223>
    <span class="no">[2223]</span>
    <a class="title" href="#2223">RE: diffの不具合</a>
    <span class="author">みく</span>
    <time datetime="2002-06-30T18:10:31">2002年06月30日 18:10</time></h1>
    <div class="body">&gt;タイトル: RE: diffの不具合<br>&gt;発言者: げんた<br>&gt;2chより転載<br>&gt;<br>&gt;386 ：名無しさん＠お腹いっぱい。 ：02/06/29 14:19 ID:???<br>&gt;diff差分表示したあとでファイルをいじると、<br>&gt;diff関係のメニューがグレイアウトしてしまい<br>&gt;表示のクリアなどが出来なくなる。<br><br>修正しました。<br>→diff0624.zip<br><br>・DIFF差分表示した後ファイルを編集するとグレーアウトしてしまう。<br>・GNU DIFF以外のDIFF(MS-DOS版?)が使えない。<br>・PC98機でコントロールコード入力画面から0x1fをキー操作で入力できない。<br></div></section>
    <ul><li><section><h1 id=2229>
    <span class="no">[2229]</span>
    <a class="title" href="#2229">RE2: diffの不具合</a>
    <span class="author">みく</span>
    <time datetime="2002-07-01T21:33:18">2002年07月01日 21:33</time></h1>
    <div class="body"><br>2chより転載<br><br>400 ：名無しさん＠お腹いっぱい。 ：02/07/01 17:32 ID:???<br>1.3.2.1にしたらdiffが使えなくなった。<br>やっぱり2.5でないと駄目なのか？<br><br>401 ：400 ：02/07/01 17:56 ID:???<br>ここの2.5でやってみたが、やはり駄目みたい。<br>http://www.vector.co.jp/soft/winnt/prog/se015009.html<br><br>ちなみに普段使ってる2.7はこれ。<br>http://www.fsci.fuk.kindai.ac.jp/aftp/pub/win32/patch-diff-w32.zip<br><br><br>一般掲示板：2061より<br>「UNIX tools」&lt;http://www.vector.co.jp/soft/win95/util/se010511.html&gt;<br><br>以上の3種類すべて試しましたがW2Kでは正常でした。<br>で、多分NT系以外で駄目なのだろうと考えられます。<br>試しに、以下のように修正してみてください。<br>＃はずしてたらすいません。<br><br>CEditView_Diff.cpp:242行目<br>-&#9;wsprintf( cmdline, "%s /C \"%s\\%s %s \"%s\" \"%s\"\"",<br>+&#9;wsprintf( cmdline, "%s /C %s\\%s %s \"%s\" \"%s\"",<br></div></section>
    <ul><li><section><h1 id=2231>
    <span class="no">[2231]</span>
    <a class="title" href="#2231">Re3: diffの不具合</a>
    <span class="author">しゅう</span>
    <time datetime="2002-07-02T18:06:15">2002年07月02日 18:06</time></h1>
    <div class="body">はじめまして。<br>以前よりサクラエディタを愛用させて頂いております。<br><br>DIFF差分表示機能についてですが、<br><br>&gt; CEditView_Diff.cpp:242行目<br>&gt; -&#9;wsprintf( cmdline, "%s /C \"%s\\%s %s \"%s\" \"%s\"\"",<br>&gt; +&#9;wsprintf( cmdline, "%s /C %s\\%s %s \"%s\" \"%s\"",<br><br>上の修正をしても、サクラエディタのインストール先が「C:\Program Files\sakura」のような半角スペースを含むフォルダの場合は正常に動作しないようです。<br>インストール先を「C:\Tools\sakura」に変更してみたところ、正常に動作するようになりました。<br>(実行環境はWin98です)<br><br>DIFF.EXEの呼び出し時のパスに半角スペースが入ることで、DIFF.EXEが正しく実行されていないのではないでしょうか。</div></section>
    <ul><li><section><h1 id=2233>
    <span class="no">[2233]</span>
    <a class="title" href="#2233">Re4: diffの不具合</a>
    <span class="author">みく</span>
    <time datetime="2002-07-02T18:44:51">2002年07月02日 18:44</time></h1>
    <div class="body"><br>ご報告ありがとうございます。<br><br>&gt;DIFF.EXEの呼び出し時のパスに半角スペースが入ることで、DIFF.EXEが正しく実行されていないのではないでしょうか。<br><br>CEditView_Diff.cpp:242行目<br>-&#9;wsprintf( cmdline, "%s /C \"%s\\%s %s \"%s\" \"%s\"\"",<br>+&#9;wsprintf( cmdline, "%s /C \"%s\\%s\" %s \"%s\" \"%s\"",<br><br>でどうでしょうか。<br></div></section>
    <ul><li><section><h1 id=2236>
    <span class="no">[2236]</span>
    <a class="title" href="#2236">Re5: diffの不具合</a>
    <span class="author">しゅう</span>
    <time datetime="2002-07-03T09:50:23">2002年07月03日 09:50</time></h1>
    <div class="body">&gt; CEditView_Diff.cpp:242行目<br>&gt; -&#9;wsprintf( cmdline, "%s /C \"%s\\%s %s \"%s\" \"%s\"\"",<br>&gt; +&#9;wsprintf( cmdline, "%s /C \"%s\\%s\" %s \"%s\" \"%s\"",<br>&gt; <br>&gt; でどうでしょうか。<br><br>正常に動作するようになりました。</div></section>
    </li></ul></li></ul></li></ul></li><li><section><h1 id=2242>
    <span class="no">[2242]</span>
    <a class="title" href="#2242">Re2: diffの不具合</a>
    <span class="author">げんた</span>
    <time datetime="2002-07-04T14:45:59">2002年07月04日 14:45</time></h1>
    <div class="body">1.3.2.1からdiffの起動にcommand.exe or cmd.exe を介するように変更されて，そのせいでオプションの解釈とかいろいろ問題が出ているようですが，直接実行するのをやめたのは<br>&gt;・GNU DIFF以外のDIFF(MS-DOS版?)が使えない。<br>の対策のためですか？<br><br>また，スペースが入るとうまくいかない件ですがdiff (GNU diff 2.7)をProgram Filesの下に置いて絶対パスで指定した場合，(win2k)<br>&gt; "C:\Program Files\GNU\WinCVS1.2_JP\diff.exe" options file1 file2<br>のように""で囲んでも引数にかかわらずmissing operandというエラーメッセージしか返ってこないので，スペースの扱いに関してはそもそもdiff自身に問題があるような気がします．<br></div></section>
    <ul><li><section><h1 id=2243>
    <span class="no">[2243]</span>
    <a class="title" href="#2243">Re3: diffの不具合</a>
    <span class="author">みく</span>
    <time datetime="2002-07-04T18:42:57">2002年07月04日 18:42</time></h1>
    <div class="body">&gt;タイトル: Re3: diffの不具合<br>&gt;発言者: げんた<br>&gt;1.3.2.1からdiffの起動にcommand.exe or cmd.exe を介するように変更されて，そのせいでオプションの解釈とかいろいろ問題が出ているようですが，直接実行するのをやめたのは<br>&gt;&gt;・GNU DIFF以外のDIFF(MS-DOS版?)が使えない。<br>&gt;の対策のためですか？<br><br>その通りです。<br><br><br>&gt;また，スペースが入るとうまくいかない件ですがdiff (GNU diff 2.7)をProgram Filesの下に置いて絶対パスで指定した場合，(win2k)<br>&gt;&gt; "C:\Program Files\GNU\WinCVS1.2_JP\diff.exe" options file1 file2<br>&gt;のように""で囲んでも引数にかかわらずmissing operandというエラーメッセージしか返ってこないので，スペースの扱いに関してはそもそもdiff自身に問題があるような気がします．<br><br>引数に指定するファイル名も””でくくってください。<br><br>一般掲示板のほうにやざきさんが書いてある修正案で大丈夫ではないでしょうか。<br>まとめ：<br>・途中に空白があるパス名は引数(orコマンド)の区切りと認識させないために””でくくる必要がある。<br>・cmd.exe に渡す文字列を特定するために渡す文字列全体を””でくくる必要がある。<br>・command.exeの場合は全体を””でくくってはならない。<br><br>あと、外部コマンド実行でも cmd.exe を使っているので、<br>オプションも書く可能性を考えると修正する必要があると思います。<br><br><br>参考<br><br>-----<br>2chより転載<br><br>417 ：400 ：02/07/04 03:14 ID:???<br>sakura_2002-07-04.zipでもやはりdiffが動かない。<br>WinXP/ diff2.7（401のやつ）<br>sakuraのインストール先は c:\Program Files\sakura\<br><br>ついでに不具合あげとく。<br>・diffのダイアログの「編集中ファイルが　新ファイル・旧ファイル」<br>　というのがグレイのままで選択できない。<br>・「見つからないときにメッセージを表示」チェックしても、どこにも何も<br>　表示されない。（diffが動いていた頃の話）<br>-----<br><br>1番目：<br>最初は実装していたのですが、よーく考えると、<br>どちらが新旧だろうが表示するのは自ファイルについてなのだから、同じなのです。<br>よって機能として働かせていません。<br>ソース上は残骸ありますので、グレーをはずせばたぶん動くと思うが、<br>結果は同じはずです。<br><br>2番目：<br>これは、次の差分、前の差分で移動したときの話です。<br>検索、置換ダイアログにもあります(まったく同じオプションです)。<br>全体として差分があるかないかとは無関係です。<br>全体として差分がない（ある）場合に、何かしらダイアログを出したほうがよいでしょうか。<br>・違いはありません。<br>・「追加ｎ行・修正ｎ行・削除ｎ行」違いがあります。<br>みたいな。（これもオプションで表示する・しないを選択できる？）<br></div></section>
    <ul><li><section><h1 id=2244>
    <span class="no">[2244]</span>
    <a class="title" href="#2244">Re4: diffの不具合</a>
    <span class="author">げんた</span>
    <time datetime="2002-07-04T20:42:52">2002年07月04日 20:42</time></h1>
    <div class="body">&gt;&gt;&gt;・GNU DIFF以外のDIFF(MS-DOS版?)が使えない。<br>&gt;&gt;の対策のためですか？<br>&gt;その通りです。<br>MS-DOS版だとロングファイル名が扱えなくて困るんじゃないでしょうか．<br><br>&gt;&gt;また，スペースが入るとうまくいかない件ですがdiff (GNU diff 2.7)をProgram Filesの下に置いて絶対パスで指定した場合，(win2k)<br>&gt;&gt;&gt; "C:\Program Files\GNU\WinCVS1.2_JP\diff.exe" options file1 file2<br>&gt;&gt;のように""で囲んでも引数にかかわらずmissing operandというエラーメッセージしか返ってこないので，スペースの扱いに関してはそもそもdiff自身に問題があるような気がします．<br>&gt;<br>&gt;引数に指定するファイル名も””でくくってください。<br>引数ではなくて，ファイル名のパス中にスペースがあると何も受け付けられなくなってしまうのです．例えば，<br>"C:\Program Files\GNU\WinCVS1.2_JP\diff.exe" --help<br>でもHELPが出ません．<br></div></section>
    <ul><li><section><h1 id=2245>
    <span class="no">[2245]</span>
    <a class="title" href="#2245">Re5: diffの不具合</a>
    <span class="author">やざき</span>
    <time datetime="2002-07-04T20:47:31">2002年07月04日 20:47</time></h1>
    <div class="body"><br>&gt;&gt;&gt;また，スペースが入るとうまくいかない件ですがdiff (GNU diff 2.7)をProgram Filesの下に置いて絶対パスで指定した場合，(win2k)<br>&gt;&gt;&gt;&gt; "C:\Program Files\GNU\WinCVS1.2_JP\diff.exe" options file1 file2<br>&gt;&gt;&gt;のように""で囲んでも引数にかかわらずmissing operandというエラーメッセージしか返ってこないので，スペースの扱いに関してはそもそもdiff自身に問題があるような気がします．<br>&gt;&gt;<br>&gt;&gt;引数に指定するファイル名も””でくくってください。<br>&gt;引数ではなくて，ファイル名のパス中にスペースがあると何も受け付けられなくなってしまうのです．例えば，<br>&gt;"C:\Program Files\GNU\WinCVS1.2_JP\diff.exe" --help<br>&gt;でもHELPが出ません．<br><br>げんたさんが使っているOSは？<br>Win2000だと、<br><br>cmd.exe /C ""C:\Documents and Settings\yazaki.makoto\デスクトップ\patch-diff-w32\diff.exe" --help"<br><br>でHELPが出たよ。<br>そもそも、パスに空白があるからdiffが誤動作する理由がわからないんだけど。<br>diffは、自分のパスを見ているの？<br></div></section>
    </li><li><section><h1 id=2246>
    <span class="no">[2246]</span>
    <a class="title" href="#2246">Re5: diffの不具合</a>
    <span class="author">げんた</span>
    <time datetime="2002-07-04T20:58:46">2002年07月04日 20:58</time></h1>
    <div class="body">&gt;引数ではなくて，ファイル名のパス中にスペースがあると何も受け付けられなくなってしまうのです．<br>同じGNU diff v2.7でも http://www.fsci.fuk.kindai.ac.jp/kakuto/soft.html から取った物はパス中のスペースを正しく認識してくれました．<br>単にWinCVS 1.2付属の物がよろしくないみたいです．<br><br>それにしても，同じ名前・同じバージョンなのに中身が違うというのは厳しいですね．<br></div></section>
    </li><li><section><h1 id=2247>
    <span class="no">[2247]</span>
    <a class="title" href="#2247">Re5: diffの不具合</a>
    <span class="author">みく</span>
    <time datetime="2002-07-04T21:04:11">2002年07月04日 21:04</time></h1>
    <div class="body">&gt;タイトル: Re5: diffの不具合<br>&gt;発言者: げんた<br>&gt;&gt;&gt;&gt;・GNU DIFF以外のDIFF(MS-DOS版?)が使えない。<br>&gt;&gt;&gt;の対策のためですか？<br>&gt;&gt;その通りです。<br>&gt;MS-DOS版だとロングファイル名が扱えなくて困るんじゃないでしょうか．<br><br>そのようなバージョンを使いたいと思って使うのだから、<br>その人は納得するしかないでしょう。<br></div></section>
    </li><li><section><h1 id=2248>
    <span class="no">[2248]</span>
    <a class="title" href="#2248">Re5: diffの不具合</a>
    <span class="author">すい</span>
    <time datetime="2002-07-04T23:21:00">2002年07月04日 23:21</time></h1>
    <div class="body">&gt;MS-DOS版だとロングファイル名が扱えなくて困るんじゃないでしょうか．<br>そうとは限りません。<br>MS-DOS版の実行ファイルのプログラムは、確かに多くの物はロングファイル名に対応していませんが、<br>ロングファイル名に対応したMS-DOS版.exe のアプリケーションも実在します。<br># 私がはじめに試してみた diff （UNIX-like tools）は、正にコレでした。<br><br>方法は、単純に「 Windows 環境内である場合には拡張ファンクションを利用する」だけです。<br><br>純粋なMS-DOS版.exe（非Win32コンソールアプリ）でありながら、<br>・MS-DOS環境ではロングファイル名は使えない。<br>・Windows のコマンドプロンプト内ではロングファイル名対応。<br>というアプリケーションになります。<br><br>つまり、MS-DOS版 のコンパイラ「LSI C 試食版」の類でロングファイル名対応アプリも作れます。<br><br>簡単にロングファイル名対応アプリを作れるように、その部分のみをフリーソフトのライブラリ<br>として公開している方もいらっしゃいます。 http://member.nifty.ne.jp/k-takata/<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>