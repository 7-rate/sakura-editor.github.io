<!DOCTYPE html><html><head><meta charset='utf-8'><title>再変換の対応</title><link rel='stylesheet' href='bbs.css' /><script src='bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ANSI版開発トップへ</a><li><div class="list-title">
    <span class="no">1769</span>
    <a class="title" href="1769.html#1769">再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1773</span>
    <a class="title" href="1769.html#1773">Re:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1778</span>
    <a class="title" href="1769.html#1778">Re2:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1779</span>
    <a class="title" href="1769.html#1779">Re3:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1780</span>
    <a class="title" href="1769.html#1780">Re4:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1781</span>
    <a class="title" href="1769.html#1781">Re5:再変換の対応</a></div>
    </li><li><div class="list-title">
    <span class="no">1782</span>
    <a class="title" href="1769.html#1782">Re5:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1784</span>
    <a class="title" href="1769.html#1784">Re6:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1786</span>
    <a class="title" href="1769.html#1786">Re7:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1789</span>
    <a class="title" href="1769.html#1789">Re8:再変換の対応</a></div>
    </li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">1783</span>
    <a class="title" href="1769.html#1783">Re5:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1787</span>
    <a class="title" href="1769.html#1787">Re6:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1788</span>
    <a class="title" href="1769.html#1788">Re7:再変換の対応</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">1803</span>
    <a class="title" href="1769.html#1803">RE: Re5:再変換の対応</a></div>
    <ul><li><div class="list-title">
    <span class="no">1806</span>
    <a class="title" href="1769.html#1806">Re2: Re5:再変換の対応</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=1769>
    <span class="no">[1769]</span>
    <a class="title" href="#1769">再変換の対応</a>
    <span class="author">minfu</span>
    <time datetime="2002-03-27T20:36:43">2002年03月27日 20:36</time></h1>
    <div class="body">2002-03-25のソースに再変換を組み込んでみました。<br>本当はdiffを使えばよいのでしょうが、よくわからなかったので変更したソースを全部入れてあります。<br><a href=http://www.egroups.co.jp/files/sakura-editor/Developer/Source/reconv.zip target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Develope<wbr>r/<wbr>Source/<wbr>reconv.<wbr>zip</nobr></a><br>make時にWINVERを0x500にする必要があります。<br>一般掲示板に書いた制限はそのままです（；＾＾）ヘ．．</div></section>
    <ul><li><section><h1 id=1773>
    <span class="no">[1773]</span>
    <a class="title" href="#1773">Re:再変換の対応</a>
    <span class="author">やざき</span>
    <time datetime="2002-03-29T16:45:56">2002年03月29日 16:45</time></h1>
    <div class="body">▼ minfuさん<br>&gt; 2002-03-25のソースに再変換を組み込んでみました。<br>&gt; 本当はdiffを使えばよいのでしょうが、よくわからなかったので変更したソースを全部入れてあります。<br>&gt; <a href=http://www.egroups.co.jp/files/sakura-editor/Developer/Source/reconv.zip target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Develope<wbr>r/<wbr>Source/<wbr>reconv.<wbr>zip</nobr></a><br>&gt; make時にWINVERを0x500にする必要があります。<br>&gt; 一般掲示板に書いた制限はそのままです（；＾＾）ヘ．．<br><br>ようやくいただきました。thanx!<br>ところで、WINVERを0x500にするのは、なにか弊害があったりしますか？ &gt; 詳しい人<br><br><a href=http://www.runan.net/program/tips/sdk_11_define_WINVER.shtml target=_top><nobr>http://<wbr>www.<wbr>runan.<wbr>net/<wbr>program/<wbr>tips/<wbr>sdk_11_d<wbr>efine_WI<wbr>NVER.<wbr>shtml</nobr></a><br>を見ると、0x500にする＝Windows98かWindows2000でしか動作を保証しないようにするようなニュアンスに読み取れる。<br><br>うーん。</div></section>
    <ul><li><section><h1 id=1778>
    <span class="no">[1778]</span>
    <a class="title" href="#1778">Re2:再変換の対応</a>
    <span class="author">minfu</span>
    <time datetime="2002-03-31T15:48:25">2002年03月31日 15:48</time></h1>
    <div class="body">▼ やざきさん<br>&gt; ところで、WINVERを0x500にするのは、なにか弊害があったりしますか？ &gt; 詳しい人<br>&gt; <br>&gt; <a href=http://www.runan.net/program/tips/sdk_11_define_WINVER.shtml target=_top><nobr>http://<wbr>www.<wbr>runan.<wbr>net/<wbr>program/<wbr>tips/<wbr>sdk_11_d<wbr>efine_WI<wbr>NVER.<wbr>shtml</nobr></a><br>&gt; を見ると、0x500にする＝Windows98かWindows2000でしか動作を保証しないようにするようなニュアンスに読み取れる。<br>&gt; <br>&gt; うーん。<br>詳しい人ではないですが、<br><br>WINVERが0x500で影響が出てくる可能性があるのであれば、<br>イベントのWM_IME_REQUESTと構造体のRECONVERTSTRINGを自前で<br>宣言するのも一つの方法だと思います。<br>使っているのはこれだけですから。<br><br></div></section>
    <ul><li><section><h1 id=1779>
    <span class="no">[1779]</span>
    <a class="title" href="#1779">Re3:再変換の対応</a>
    <span class="author">minfu</span>
    <time datetime="2002-03-31T15:51:15">2002年03月31日 15:51</time></h1>
    <div class="body">&gt; WINVERが0x500で影響が出てくる可能性があるのであれば、<br>&gt; イベントのWM_IME_REQUESTと構造体のRECONVERTSTRINGを自前で<br>&gt; 宣言するのも一つの方法だと思います。<br>&gt; 使っているのはこれだけですから。<br><br>ほかに定数のIMR_RECONVERTSTRINGもありました。<br></div></section>
    <ul><li><section><h1 id=1780>
    <span class="no">[1780]</span>
    <a class="title" href="#1780">Re4:再変換の対応</a>
    <span class="author">あろか</span>
    <time datetime="2002-04-01T01:47:35">2002年04月01日 01:47</time></h1>
    <div class="body">ご無沙汰してます。<br>minfuさんはじめまして。<br>▼ minfuさん<br>&gt; &gt; イベントのWM_IME_REQUESTと構造体のRECONVERTSTRINGを自前で<br>&gt; &gt; 宣言するのも一つの方法だと思います。<br>そういう方法を取ってみました。3/25版からの差分ファイルです。<br><a href=http://www.egroups.co.jp/files/sakura-editor/Developer/Source/reconv.zip target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Develope<wbr>r/<wbr>Source/<wbr>reconv.<wbr>zip</nobr></a><br><br>・バグ修正：末尾'\0'の分もバッファを確保するように修正。<br>・これに加えて IME98以降とATOK12以降では独自の再変換イベントを持っているようなので対応させて見ました。<br>ちゃんと確認していないので 95/NT で IME98/2000/ATOK12/13/14ユーザの方 動作確認お願いします。<br><br>よろしくおねがいします。<br>・要望/希望です；<br>+定数の定義個所がイマイチ。<br>+RequestedReconversion とRequestedReconversionW がほぼ同じなので共通部分をまとめたい。<br>+CMemory に文字数をカウントするメソッドが欲しいな。<br></div></section>
    <ul><li><section><h1 id=1781>
    <span class="no">[1781]</span>
    <a class="title" href="#1781">Re5:再変換の対応</a>
    <span class="author">げんた</span>
    <time datetime="2002-04-01T11:44:14">2002年04月01日 11:44</time></h1>
    <div class="body">&gt;・これに加えて IME98以降とATOK12以降では独自の再変換イベントを持っているようなので対応させて見ました。<br>ATOK13+Win2Kで動作しました．<br><br>キャレット位置に候補が出るので，選択範囲の末尾にキャレットがあると選択文字列がもう一回表示されているように見えてちょっと変な感じ．後ろから選択した場合には選択範囲に変換中文字列が重なってスマートなんですが．<br></div></section>
    </li><li><section><h1 id=1782>
    <span class="no">[1782]</span>
    <a class="title" href="#1782">Re5:再変換の対応</a>
    <span class="author">げんた</span>
    <time datetime="2002-04-01T11:52:53">2002年04月01日 11:52</time></h1>
    <div class="body">&gt;・要望/希望です；<br>&gt;+定数の定義個所がイマイチ。<br>&gt;+RequestedReconversion とRequestedReconversionW がほぼ同じなので共通部分をまとめたい。<br>&gt;+CMemory に文字数をカウントするメソッドが欲しいな。<br>追加．<br>http://www.netlaputa.ne.jp/~stadt/vb/p22_imereconv/imereconv.htm<br>によると，前後関係を見るために文字全体と再変換する部分をそれぞれ指定できるようなので，1行全部渡した方が変換精度は高くなりそう．(気休めかも)<br><br>あと，試用中に1回ATOK内でアプリケーションエラーを起こしてエディタが落ちました．<br></div></section>
    <ul><li><section><h1 id=1784>
    <span class="no">[1784]</span>
    <a class="title" href="#1784">Re6:再変換の対応</a>
    <span class="author">げんた</span>
    <time datetime="2002-04-01T12:45:33">2002年04月01日 12:45</time></h1>
    <div class="body">&gt;あと，試用中に1回ATOK内でアプリケーションエラーを起こしてエディタが落ちました．<br>きしゃがきしゃできしゃにきしゃした をATOK13で再変換すると必ずアプリケーションエラーになります．<br>さいへんかん を再変換してももんだいなし．<br>もんだいなし を再変換しても大丈夫だったが，もんだい を再変換したらアプリケーションエラー．<br><br>タイミングは IMR_RECONVERTSTRINGが2回，IMR_CONFIRMRECONVERTSTRINGが1回呼ばれた後です．<br></div></section>
    <ul><li><section><h1 id=1786>
    <span class="no">[1786]</span>
    <a class="title" href="#1786">Re7:再変換の対応</a>
    <span class="author">minfu</span>
    <time datetime="2002-04-01T17:50:00">2002年04月01日 17:50</time></h1>
    <div class="body">▼ あろかさん<br><br>おおっ、95/NT対応ありがとうございます。<br><br><br>▼ げんたさん<br>&gt; &gt;あと，試用中に1回ATOK内でアプリケーションエラーを起こしてエディタが落ちました．<br><br>これについては<br>RequestedReconversionWのwcsncpyの三つ目の引数が<br>nlen<br>となっているところを<br>nlen/sizeof(wchar_t)<br>に修正したらエラーがでなくなると思います。<br><br>この修正でNTとMSIME98の環境でうごきました。<br></div></section>
    <ul><li><section><h1 id=1789>
    <span class="no">[1789]</span>
    <a class="title" href="#1789">Re8:再変換の対応</a>
    <span class="author">あろか</span>
    <time datetime="2002-04-01T23:10:30">2002年04月01日 23:10</time></h1>
    <div class="body">▼ minfuさん<br>&gt; RequestedReconversionWのwcsncpyの三つ目の引数が<br>&gt; nlen<br>&gt; となっているところを<br>&gt; nlen/sizeof(wchar_t)<br>&gt; に修正したらエラーがでなくなると思います。<br>&gt; <br>&gt; この修正でNTとMSIME98の環境でうごきました。<br>あっ、やってしまった。<br>ご指摘ありがとうございます。<br></div></section>
    </li></ul></li></ul></li></ul></li><li><section><h1 id=1783>
    <span class="no">[1783]</span>
    <a class="title" href="#1783">Re5:再変換の対応</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-01T12:09:01">2002年04月01日 12:09</time></h1>
    <div class="body">▼ あろかさん<br>&gt; ご無沙汰してます。<br>&gt; minfuさんはじめまして。<br>&gt; ▼ minfuさん<br>&gt; &gt; &gt; イベントのWM_IME_REQUESTと構造体のRECONVERTSTRINGを自前で<br>&gt; &gt; &gt; 宣言するのも一つの方法だと思います。<br>&gt; そういう方法を取ってみました。3/25版からの差分ファイルです。<br>&gt; <a href=http://www.egroups.co.jp/files/sakura-editor/Developer/Source/reconv.zip target=_top><nobr>http://<wbr>www.<wbr>egroups.<wbr>co.<wbr>jp/<wbr>files/<wbr>sakura-<wbr>editor/<wbr>Develope<wbr>r/<wbr>Source/<wbr>reconv.<wbr>zip</nobr></a><br>&gt; <br>&gt; ・バグ修正：末尾'\0'の分もバッファを確保するように修正。<br>&gt; ・これに加えて IME98以降とATOK12以降では独自の再変換イベントを持っているようなので対応させて見ました。<br>&gt; ちゃんと確認していないので 95/NT で IME98/2000/ATOK12/13/14ユーザの方 動作確認お願いします。<br>&gt; <br>&gt; よろしくおねがいします。<br>&gt; ・要望/希望です；<br>&gt; +定数の定義個所がイマイチ。<br>&gt; +RequestedReconversion とRequestedReconversionW がほぼ同じなので共通部分をまとめたい。<br>&gt; +CMemory に文字数をカウントするメソッドが欲しいな。<br><br>取り込みます。Thanx!<br><br>再変換は、Shift＋変換キーなんですね。ちょっと探してしまいました。<br>そして、IME2000を使っていますが、文節で確定できないみたいでした。これは仕方が無いのかな？<br>具体的には、IME2000のキー設定で「ATOK」を選んで使っています。<br>「きしゃがきしゃできしゃにきしゃした」を全部選択して、Shift＋変換キーで再変換をはじめますが、<br>普段なら文節を確定する↓キーを押しても、確定できませんでした。不思議。<br><br></div></section>
    <ul><li><section><h1 id=1787>
    <span class="no">[1787]</span>
    <a class="title" href="#1787">Re6:再変換の対応</a>
    <span class="author">minfu</span>
    <time datetime="2002-04-01T17:53:19">2002年04月01日 17:53</time></h1>
    <div class="body">▼ やざきさん<br>&gt; 再変換は、Shift＋変換キーなんですね。ちょっと探してしまいました。<br><br>これは自分の書き方が悪かったです。IMEの設定によってキー操作が変わることを明記する必要がありますね。<br><br>&gt; そして、IME2000を使っていますが、文節で確定できないみたいでした。これは仕方が無いのかな？<br>&gt; 具体的には、IME2000のキー設定で「ATOK」を選んで使っています。<br>&gt; 「きしゃがきしゃできしゃにきしゃした」を全部選択して、Shift＋変換キーで再変換をはじめますが、<br>&gt; 普段なら文節を確定する↓キーを押しても、確定できませんでした。不思議。<br><br>ほかのアプリ（IEとか）でも同じ動作なのでIME2000の問題でしょう。<br> <br> <br> </div></section>
    <ul><li><section><h1 id=1788>
    <span class="no">[1788]</span>
    <a class="title" href="#1788">Re7:再変換の対応</a>
    <span class="author">やざき</span>
    <time datetime="2002-04-01T18:20:24">2002年04月01日 18:20</time></h1>
    <div class="body">&gt; ほかのアプリ（IEとか）でも同じ動作なのでIME2000の問題でしょう。<br><br>ほんとですねー。<br>こちらも調査漏れで失礼しました。<br><br>これで再変換もできるようになってしまいましたね。。。</div></section>
    </li></ul></li><li><section><h1 id=1803>
    <span class="no">[1803]</span>
    <a class="title" href="#1803">RE: Re5:再変換の対応</a>
    <span class="author">みく</span>
    <time datetime="2002-04-02T18:38:55">2002年04月02日 18:38</time></h1>
    <div class="body"><br>&gt;再変換は、Shift＋変換キーなんですね。ちょっと探してしまいました。<br><br>特に設定をいじっているわけではないのに、私の環境では再変換できません。<br>IMEツールバーを表示しておいての再変換ボタンを押せば再変換できるんですが。。。<br>（何が悪いかよくわからないです）<br>面倒なので右クリックメニューに出てくるようになるとうれしいです。<br><br>＃実はけっこう昔からあった機能なのね。<br>http://www.forest.impress.co.jp/article/1999/03/09/saihenkan.html<br></div></section>
    <ul><li><section><h1 id=1806>
    <span class="no">[1806]</span>
    <a class="title" href="#1806">Re2: Re5:再変換の対応</a>
    <span class="author">KENCH</span>
    <time datetime="2002-04-02T20:26:46">2002年04月02日 20:26</time></h1>
    <div class="body">▼ みくさん<br>&gt; （何が悪いかよくわからないです）<br>ちょっと長めに押してみては？</div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>