<!DOCTYPE html><html><head><meta charset='utf-8'><title>タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</title><link rel='stylesheet' href='bbs.css' /><script src='bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ansiトップへ</a><li><div class="list-title">
    <span class="no">1467</span>
    <a class="title" href="1467.html#1467">タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    <ul><li><div class="list-title">
    <span class="no">1469</span>
    <a class="title" href="1467.html#1469">Re: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    <ul><li><div class="list-title">
    <span class="no">1470</span>
    <a class="title" href="1467.html#1470">Re2: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    <ul><li><div class="list-title">
    <span class="no">1471</span>
    <a class="title" href="1467.html#1471">Re3: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    </li><li><div class="list-title">
    <span class="no">1474</span>
    <a class="title" href="1467.html#1474">Re3: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    <ul><li><div class="list-title">
    <span class="no">1475</span>
    <a class="title" href="1467.html#1475">Re4: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    <ul><li><div class="list-title">
    <span class="no">1476</span>
    <a class="title" href="1467.html#1476">１つだけ書き方について</a></div>
    </li><li><div class="list-title">
    <span class="no">1482</span>
    <a class="title" href="1467.html#1482">Re5: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=1467>
    <span class="no">[1467]</span>
    <a class="title" href="#1467">タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-04T16:13:49">2002年02月04日 16:13</time></h1>
    <div class="body">diff_2002_2_4.zipをアップロードしました。<br>PPA.DLL対応パッチからのdiffになってます。<br><br>共通設定と、タイプ別設定の両方に、外部ヘルプと外部HTMLヘルプを設定することができます。<br>優先されるのはタイプ別設定です。<br><br>タイプ別設定で、外部ヘルプ等が設定されていない場合に、共通設定の外部ヘルプが呼び出されます。<br><br>というわけで、取り込んでいただけるとこれ幸いです。</div></section>
    <ul><li><section><h1 id=1469>
    <span class="no">[1469]</span>
    <a class="title" href="#1469">Re: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">げんた</span>
    <time datetime="2002-02-04T19:12:45">2002年02月04日 19:12</time></h1>
    <div class="body">&gt;共通設定と、タイプ別設定の両方に、外部ヘルプと外部HTMLヘルプを設定することができます。<br>&gt;優先されるのはタイプ別設定です。<br>どーもお疲れさまです．ただ，1カ所気にくわないところがあります．<br>Helpファイルの判定処理をDLLSHAREにおいていますが，これをCEditDocに移動できませんか．<br><br>というのは，現在Types構造体へのアクセスはCEditDoc::GetDocumentAttributeを通じてのみアクセスするようになっており，将来的にはこれを共有メモリから追い出したいと考えていますので．<br><br>＃考えているだけで全然やる気配がない...という突っ込みはしないで(((;^^)<br></div></section>
    <ul><li><section><h1 id=1470>
    <span class="no">[1470]</span>
    <a class="title" href="#1470">Re2: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-04T19:24:04">2002年02月04日 19:24</time></h1>
    <div class="body">▼ げんたさん<br>&gt; &gt;共通設定と、タイプ別設定の両方に、外部ヘルプと外部HTMLヘルプを設定することができます。<br>&gt; &gt;優先されるのはタイプ別設定です。<br>&gt; どーもお疲れさまです．ただ，1カ所気にくわないところがあります．<br>&gt; Helpファイルの判定処理をDLLSHAREにおいていますが，これをCEditDocに移動できませんか．<br>&gt; <br>&gt; というのは，現在Types構造体へのアクセスはCEditDoc::GetDocumentAttributeを通じてのみアクセスするようになっており，将来的にはこれを共有メモリから追い出したいと考えていますので．<br>&gt; <br>&gt; ＃考えているだけで全然やる気配がない...という突っ込みはしないで(((;^^)<br><br>ではひとつ教えてください。CShareDataの役目はなんですか？<br>私は、CShareDataは、DLLSHAREのアクセスクラスで、ゆくゆくは、DLLSHAREを隠して、CShareDataからアクセスするだけになるんじゃないかと思っていたんですが。<br><br>それに、ヘルプファイルの判定処理は、DLLSHAREに書かれているファイル名も使うし、DLLSHAREに書かれているTypesに書かれているファイル名も使うので、CShareDataに置くのは理にかなっていると思っていたのですが。。。今も思っていますけど。。。<br><br>というわけで、CEditDocに移動するのは、やぶさかではないのですが、CShareDataの役割を知っておかないと今後また同じようなことがおきないとも言い切れないので、教えてください。</div></section>
    <ul><li><section><h1 id=1471>
    <span class="no">[1471]</span>
    <a class="title" href="#1471">Re3: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-04T19:25:35">2002年02月04日 19:25</time></h1>
    <div class="body">って、m_TypeをDLLSHAREから取りはずそうとしているということ？<br>DLLSHAREから取りはずして、どうやって共有するつもりですか？</div></section>
    </li><li><section><h1 id=1474>
    <span class="no">[1474]</span>
    <a class="title" href="#1474">Re3: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">やざき</span>
    <time datetime="2002-02-04T23:36:24">2002年02月04日 23:36</time></h1>
    <div class="body">そうそう、わたしは、<br>CSettingMediatorというクラスを作って、各種設定が共通設定だろうが、タイプ別設定だろうが、気にせずとりあえずCSettingMediatorに問い合わせたり、設定を依頼するだけでよくなったら<br>便利だなぁと思っています。<br>で、CShareDataをそのうち、CSettingMediatorにしてやろうかと思っていたんですが、いかがでございましょう？<br><br>そうすると、設定は基本的にCShareDataにお願いするという方針で行ける。（というか、勝手に行っていた。すみません。）</div></section>
    <ul><li><section><h1 id=1475>
    <span class="no">[1475]</span>
    <a class="title" href="#1475">Re4: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">げんた</span>
    <time datetime="2002-02-05T00:47:03">2002年02月05日 00:47</time></h1>
    <div class="body">ちょっと考え直してみました．<br><br>▼初期の私のアイディア<br>・CShareDataの役割＝単にDLL Sharedを得るためのクラス．<br><br>・タイプ別設定を共有メモリから追い出す．<br>そのために，タイプ別設定のアクセスをCEditDoc::GetDocumentAttributeに集約．<br>追い出した後の実装はCEditDoc，またはCEditDocに含まれる新規クラスで行うつもりだった．<br><br>共有メモリからタイプ別設定を追い出したい理由は以下の通り．<br>* タイプ別設定が足りなくなり，既に2回最大値を拡張している．<br>* タイプ別設定の領域を予め共有メモリに確保しなくてはならないので，上限の撤廃ができない．<br>* 初回起動時に使うかわからない領域全てを初期化するのは無駄ではないか．<br><br>追い出しのアイディア<br>* タイプ別設定はそれぞれ外部ファイルに用意する．<br>* 設定ファイルは必要に応じて読み込まれる．<br>* 変更は現状通りダイアログボックスで行う．<br>* 変更されたらすぐにファイルに保存し，設定変更Broadcastメッセージを投げる．<br>* Broadcastを受け取ったら該当タイプを使用しているか確認．<br>* 使用していたらファイルから再読込し，設定を更新する．<br><br>&gt;各種設定が共通設定だろうが、タイプ別設定だろうが、気にせずとりあえずCSettingMediatorに問い合わせたり、設定を依頼するだけでよくなったら便利だなぁと思っています。<br>なるほど．これは良いと思います．最終的には設定情報がどこに格納されているのかも意識する必要が無くなるので，これは私のアイディアと矛盾しません．CEditDoc::GetDocumentAttributeで取得するのをDLLSHAREからCSettingMediator経由に変更すればタイプ別設定のカプセル化の場所が移動します．<br><br>私の初期アイディアと組み合わせると，追い出した後の実装というのをCSettingMediatorに依頼することになるでしょう．タイプ一覧の設定，指定タイプの取得，更新などファイルへの書き出し・読み込みタイミングもCSettingMediatorが管理すれば良いような気がします．<br><br>上記内容を納得した上で私が確認した限りでは特に問題はないように思います．<br><br>---<br>実装に入る前に設計に対する議論を行うことは有意義だと思います．これまでは議論する相手がいなかったので...(;_;)<br></div></section>
    <ul><li><section><h1 id=1476>
    <span class="no">[1476]</span>
    <a class="title" href="#1476">１つだけ書き方について</a>
    <span class="author">げんた</span>
    <time datetime="2002-02-05T09:19:28">2002年02月05日 09:19</time></h1>
    <div class="body">&gt;上記内容を納得した上で私が確認した限りでは特に問題はないように思います．<br>1つだけ書き方についてお願い．<br>//if( old_condition ){<br>if( old_condition ){<br>と古い行を残してある箇所がありますが，ご存じの通りコメント中であっても括弧を残してあると対括弧の対応が正しくとれなくなってしまいます．<br><br>本当はエディタ側にて対応する問題かもしれませんが，実装の際に考慮していただければと思います．<br><br>既存の変数直接参照部分をカプセル化したような場合は自分のコメントだけ残して古い行は消しちゃってもいいと思いますけどね．元に戻すことは絶対あり得ないと思いますし．<br><br>操作性や機能の変更のためにコメントアウトした場合にはコメントとして残した方がいいと思います．<br></div></section>
    </li><li><section><h1 id=1482>
    <span class="no">[1482]</span>
    <a class="title" href="#1482">Re5: タイプ別設定に外部ヘルプと外部HTMLヘルプ新設パッチ</a>
    <span class="author">あろか</span>
    <time datetime="2002-02-05T23:37:20">2002年02月05日 23:37</time></h1>
    <div class="body">▼ げんたさん<br>&gt; * タイプ別設定の領域を予め共有メモリに確保しなくてはならないので，上限の撤廃ができない．<br>&gt; * 初回起動時に使うかわからない領域全てを初期化するのは無駄ではないか．<br>&gt; <br>&gt; * タイプ別設定はそれぞれ外部ファイルに用意する．<br><br>タイプ毎に共有メモリを動的に確保するように出来ないでしょうか。<br>いちいちファイルにアクセスするとパフォーマンスがわるくなりそうで心配です。<br>たとえばこんなかんじ。<br>* 設定ファイルはいままでどおりとする．<br>* タイプ別設定は必要に応じて読み込まれる．<br>* すでに別ウィンドウで読みこみ済みなら読みこまない。<br>* 読みこんだら共有メモリ名を"sakura_share_xxx"(xxx はcpp や html)などとして共有しておく。<br>* 変更は現状通りダイアログボックスで行う．<br>* 設定変更の更新はいままでどおり．<br><br>&gt; * 変更は現状通りダイアログボックスで行う．<br>設定ダイアログを複数のプロセスで同時に開かないのなら、コントロールプロセスだけに持たせてもよいかと思っていますがどうでしょう？<br>1 編集ウィンドウの設定メニューを選択する<br>2 コントロールプロセスにウィンドウメッセージが飛ぶ。<br>3 コントロールプロセスは編集ウィンドウの位置付近に設定ダイアログを表示する。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>