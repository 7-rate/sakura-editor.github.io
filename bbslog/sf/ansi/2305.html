<!DOCTYPE html><html><head><meta charset='utf-8'><title>対括弧を強調表示</title><link rel='stylesheet' href='../bbs.css' /><script src='../bbs.js'></script><body><ul class="side"><a href="./" class="toindex">←ANSI版開発トップへ</a><li><div class="list-title">
    <span class="no">2305</span>
    <a class="title" href="2305.html#2305">対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2310</span>
    <a class="title" href="2305.html#2310">Re: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2311</span>
    <a class="title" href="2305.html#2311">Re2: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2313</span>
    <a class="title" href="2305.html#2313">対括弧を強調表示ver2</a></div>
    </li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2312</span>
    <a class="title" href="2305.html#2312">強調表示追加要望</a></div>
    <ul><li><div class="list-title">
    <span class="no">2314</span>
    <a class="title" href="2305.html#2314">RE: 強調表示追加要望</a></div>
    </li><li><div class="list-title">
    <span class="no">2316</span>
    <a class="title" href="2305.html#2316">対括弧を強調表示ver3</a></div>
    <ul><li><div class="list-title">
    <span class="no">2317</span>
    <a class="title" href="2305.html#2317">Re: 対括弧を強調表示ver3</a></div>
    <ul><li><div class="list-title">
    <span class="no">2318</span>
    <a class="title" href="2305.html#2318">Re2: 対括弧を強調表示ver3</a></div>
    </li><li><div class="list-title">
    <span class="no">2319</span>
    <a class="title" href="2305.html#2319">Re2: 対括弧を強調表示ver3</a></div>
    </li><li><div class="list-title">
    <span class="no">2320</span>
    <a class="title" href="2305.html#2320">Re2: 対括弧を強調表示ver3</a></div>
    </li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2332</span>
    <a class="title" href="2305.html#2332">Re: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2333</span>
    <a class="title" href="2305.html#2333">Re2: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2335</span>
    <a class="title" href="2305.html#2335">Re3: 対括弧を強調表示</a></div>
    </li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2337</span>
    <a class="title" href="2305.html#2337">対括弧を強調表示ver4</a></div>
    <ul><li><div class="list-title">
    <span class="no">2338</span>
    <a class="title" href="2305.html#2338">Re: 対括弧を強調表示ver4</a></div>
    <ul><li><div class="list-title">
    <span class="no">2339</span>
    <a class="title" href="2305.html#2339">Re2: 対括弧を強調表示ver4</a></div>
    <ul><li><div class="list-title">
    <span class="no">2357</span>
    <a class="title" href="2305.html#2357">Re3: 対括弧を強調表示ver4</a></div>
    </li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2340</span>
    <a class="title" href="2305.html#2340">RE: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2341</span>
    <a class="title" href="2305.html#2341">Re2: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2342</span>
    <a class="title" href="2305.html#2342">Re3: 対括弧を強調表示</a></div>
    <ul><li><div class="list-title">
    <span class="no">2343</span>
    <a class="title" href="2305.html#2343">Re4: 対括弧を強調表示</a></div>
    </li><li><div class="list-title">
    <span class="no">2347</span>
    <a class="title" href="2305.html#2347">Re4: 放浪の旅？</a></div>
    <ul><li><div class="list-title">
    <span class="no">2355</span>
    <a class="title" href="2305.html#2355">Re5: 括弧の前・後ろ？</a></div>
    <ul><li><div class="list-title">
    <span class="no">2375</span>
    <a class="title" href="2305.html#2375">Re6: 括弧の前・後ろ？</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">2366</span>
    <a class="title" href="2305.html#2366">ここまでのまとめ</a></div>
    <ul><li><div class="list-title">
    <span class="no">2374</span>
    <a class="title" href="2305.html#2374">RE: ここまでのまとめ</a></div>
    <ul><li><div class="list-title">
    <span class="no">2379</span>
    <a class="title" href="2305.html#2379">RE2: ここまでのまとめ</a></div>
    </li></ul></li></ul></li></ul></li></ul><ul class="main"><li><section><h1 id=2305>
    <span class="no">[2305]</span>
    <a class="title" href="#2305">対括弧を強調表示</a>
    <span class="author">ai</span>
    <time datetime="2002-09-16T14:01:21">2002年09月16日 14:01</time></h1>
    <div class="body"><br>対括弧を強調表示(カーソルが来た時対応する括弧が強調表示される)<br><br>一般掲示板でも時々要望にあがる(私自身も要望していました)上記の機能の実装を試みました。<br>が、行き詰まりました・・・。<br>現時点までの修正をeGroups/のDeveloper/SourceにUPしておきますので、<br>改善箇所や「こんなの使い物にならん」(^^;「根本的に考え方が間違ってる」(^^;; 等、<br>御指摘がありましたらお願い致しますm(__)m<br>また、この機能を引き取って実装してくださる方がいらっしゃれば大歓迎です(^^;;;<br><br>&lt;修正箇所&gt;<br>(1)[タイプ別設定]-[カラー]に"対括弧の強調表示"を追加。<br>(2)カーソル位置に括弧がある場合、対応する括弧を探して見つかれば強調表示を行なう。<br>(3)(1)の設定にて文字色と背景色が同じ場合、反転表示を行なう。<br><br>&lt;問題点&gt;<br>・強調表示した後の括弧を元に戻す際に、テキストの文字色と背景色を固定で使っている。<br>  (対括弧がコメント/強調キーワードの場合等に、元の色に戻らない)<br>・再描画されない。<br>・反転表示のほうは、使い物にならない状態です・・・<br><br>※ DrawBracketPair.zip<br>   ssrc_2002-09-12.tar.bz2 からの差分となっております。<br></div></section>
    <ul><li><section><h1 id=2310>
    <span class="no">[2310]</span>
    <a class="title" href="#2310">Re: 対括弧を強調表示</a>
    <span class="author">げんた</span>
    <time datetime="2002-09-18T09:43:27">2002年09月18日 09:43</time></h1>
    <div class="body">&gt;&lt;問題点&gt;<br>&gt;・強調表示した後の括弧を元に戻す際に、テキストの文字色と背景色を固定で使っている。<br>&gt;  (対括弧がコメント/強調キーワードの場合等に、元の色に戻らない)<br>これは1行全部再描画するしか無いと思います．行頭位置がコメントや引用付内であるかという情報はあったように思います（うろ覚え）ので，行頭から描画すれば正しい色になるはず．<br><br>括弧探し（特に前方）のパフォーマンスが低いような気がするので，括弧の前に移動するたびに検索していたらカーソルが引っかからないかなぁ(特にすいさんの486マシン)とちょっと心配．編集時に補助情報を付加することで検索速度を向上する工夫が必要かなとも思います．<br></div></section>
    <ul><li><section><h1 id=2311>
    <span class="no">[2311]</span>
    <a class="title" href="#2311">Re2: 対括弧を強調表示</a>
    <span class="author">ai</span>
    <time datetime="2002-09-18T12:28:27">2002年09月18日 12:28</time></h1>
    <div class="body">&gt;これは1行全部再描画するしか無いと思います．行頭位置がコメントや引用付内であるかという情報はあったように思います（うろ覚え）ので，行頭から描画すれば正しい色になるはず．<br>対括弧の強調表示の消去処理を下記のように修正したところ、うまく色分けされました。<br>アドバイスありがとうございます。<br><br>  PAINTSTRUCT &#9;ps;<br>  ps.rcPaint.left = m_nViewAlignLeft;<br>  ps.rcPaint.right = m_nViewAlignLeft + m_nViewCx;<br>  ps.rcPaint.top = ( nLine - m_nViewTopLine ) * ( m_nCharHeight + m_pcEditDoc-&gt;GetDocumentAttribute().m_nL<br>ineSpace ) + m_nViewAlignTop;<br>  ps.rcPaint.bottom = ps.rcPaint.top + m_nCharHeight + m_pcEditDoc-&gt;GetDocumentAttribute().m_nL<br>ineSpace;<br>  OnPaint( hdc, &amp;ps, TRUE );<br><br>&gt;括弧探し（特に前方）のパフォーマンスが低いような気がするので，括弧の前に移動するたびに検索していたらカーソルが引っかからないかなぁ(特にすいさんの486マシン)とちょっと心配．編集時に補助情報を付加することで検索速度を向上する工夫が必要かなとも思います．<br>この辺は考慮していませんでした。<br>よい改善策があればよいのですが・・・。<br></div></section>
    <ul><li><section><h1 id=2313>
    <span class="no">[2313]</span>
    <a class="title" href="#2313">対括弧を強調表示ver2</a>
    <span class="author">ai</span>
    <time datetime="2002-09-18T22:09:21">2002年09月18日 22:09</time></h1>
    <div class="body"><br>修正したものをeGroupsにUPしました。<br>反転表示の処理は必要ないと考え削除しました。<br>再描画、パフォーマンスの件は未解決です。<br><br>※ DrawBracketPair_v2.zip<br>   ssrc_2002-09-12.tar.bz2 からの差分となっております。<br></div></section>
    </li></ul></li></ul></li><li><section><h1 id=2312>
    <span class="no">[2312]</span>
    <a class="title" href="#2312">強調表示追加要望</a>
    <span class="author">げんた</span>
    <time datetime="2002-09-18T20:54:26">2002年09月18日 20:54</time></h1>
    <div class="body">うろ覚えですが，Emacsの対括弧の強調で対応する括弧が画面外にある場合には該当行をmini bufferに表示する機能があったように思います．<br><br>これと同じように対商業が画面外の場合は括弧を含む行をステータスバーに表示するというのはどうでしょうか．<br><br>しかし，これがなければ画面外に出た時点で検索をうち切れるけどこれをやると対応箇所が見つかるまで画面外も追いかけないといけませんね．(っと，今は画面外に出たらうち切る処理は入っていないのか）<br></div></section>
    <ul><li><section><h1 id=2314>
    <span class="no">[2314]</span>
    <a class="title" href="#2314">RE: 強調表示追加要望</a>
    <span class="author">ai</span>
    <time datetime="2002-09-18T22:32:42">2002年09月18日 22:32</time></h1>
    <div class="body"><br>&gt;これと同じように対商業が画面外の場合は括弧を含む行をステータスバーに表示するというのはどうでしょうか．<br>試してみました。<br>表示させることはできるのですが、TABが含まれるとうまくいきません。<br>TABが先頭に1つあると半角空白70個(?)相当のスペースが空いてしまいます。<br>下記の方法が悪いのでしょうか？<br><br>pLine = m_pcEditDoc-&gt;m_cLayoutMgr.GetLineStr( nLine, &amp;nLineLen );<br>if( NULL != pLine )<br>{<br>    SendStatusMessage( pLine );<br>}<br><br>&gt;しかし，これがなければ画面外に出た時点で検索をうち切れるけどこれをやると対応箇所が見つかるまで画面外も追いかけないといけませんね．(っと，今は画面外に出たらうち切る処理は入っていないのか）<br>入っていません(^^;<br>入れたほうがいいですかね？<br>私の力で出来るか分かりませんが・・・<br><br>※ 申し訳ありませんが、先ほどのDrawBracketPair_v2.zipは修正漏れがありましたので無視してください。<br></div></section>
    </li><li><section><h1 id=2316>
    <span class="no">[2316]</span>
    <a class="title" href="#2316">対括弧を強調表示ver3</a>
    <span class="author">ai</span>
    <time datetime="2002-09-20T08:54:55">2002年09月20日 08:54</time></h1>
    <div class="body"><br>&gt;しかし，これがなければ画面外に出た時点で検索をうち切れるけどこれをやると対応箇所が見つかるまで画面外も追いかけないといけませんね．(っと，今は画面外に出たらうち切る処理は入っていないのか）<br>画面外に出た場合に検索をうち切る処理を入れたものをeGroupsにUPしました。<br><br>※ DrawBracketPair_v3.zip<br>   ssrc_2002-09-18.tar.bz2 からの差分となっております。<br></div></section>
    <ul><li><section><h1 id=2317>
    <span class="no">[2317]</span>
    <a class="title" href="#2317">Re: 対括弧を強調表示ver3</a>
    <span class="author">げんた</span>
    <time datetime="2002-09-20T13:25:21">2002年09月20日 13:25</time></h1>
    <div class="body">試してみました．感動度高いですね．全角の対応も（有効性は別にして）おもしろい．<br>次回のリリースに入れたくなりました．<br><br>処理時間を考えると画面外でうち切る方が対応行をステータスバーに出すよりもいいように思います．ファイルサイズに関係なく処理時間の上限値が抑えられますし，それに{だけで1行使う人は対応する行が見えても何もわかりませんしね．<br></div></section>
    <ul><li><section><h1 id=2318>
    <span class="no">[2318]</span>
    <a class="title" href="#2318">Re2: 対括弧を強調表示ver3</a>
    <span class="author">もか</span>
    <time datetime="2002-09-20T16:20:50">2002年09月20日 16:20</time></h1>
    <div class="body">&gt;処理時間を考えると画面外でうち切る方が対応行をステータスバーに出すよりもいいように思います．ファイルサイズに関係なく処理時間の上限値が抑えられますし，それに{だけで1行使う人は対応する行が見えても何もわかりませんしね．<br><br>画面外に出たら処理を打ち切るに賛成です。<br>画面に映っていないときに確認したい場合は対カッコ検索を使うということで。<br></div></section>
    </li><li><section><h1 id=2319>
    <span class="no">[2319]</span>
    <a class="title" href="#2319">Re2: 対括弧を強調表示ver3</a>
    <span class="author">ai</span>
    <time datetime="2002-09-21T13:57:28">2002年09月21日 13:57</time></h1>
    <div class="body">&gt;試してみました．感動度高いですね．全角の対応も（有効性は別にして）おもしろい．<br>&gt;次回のリリースに入れたくなりました．<br><br>恐縮です(^-^;<br><br>&gt;処理時間を考えると画面外でうち切る方が対応行をステータスバーに出すよりもいいように思います．ファイルサイズに関係なく処理時間の上限値が抑えられますし，それに{だけで1行使う人は対応する行が見えても何もわかりませんしね．<br><br>そうですね。自分では"画面外でうち切る"って思いつきませんでしたので、追加要望がとても参考になりましたです。<br></div></section>
    </li><li><section><h1 id=2320>
    <span class="no">[2320]</span>
    <a class="title" href="#2320">Re2: 対括弧を強調表示ver3</a>
    <span class="author">かろと</span>
    <time datetime="2002-09-21T19:13:00">2002年09月21日 19:13</time></h1>
    <div class="body">▼ げんたさん<br>&gt; 試してみました．感動度高いですね．全角の対応も（有効性は別にして）おもしろい．<br>&gt; 次回のリリースに入れたくなりました．<br><br>対括弧強調表示(1.3.4.0)使ってみました。<br>いい感じです。<br><br>ただ、私が見たのが SmartIndent_CPP() だったので、<br>最初の switch文の { の対括弧が case '}': に<br>なってしまうのが、非常に残念でした。<br><br>検索時に、<br>'' の中、"" の中<br>は検索対象から外したい気がしました。<br><br>できれば、コメント内も・・（笑）<br><br><br></div></section>
    </li></ul></li></ul></li></ul></li><li><section><h1 id=2332>
    <span class="no">[2332]</span>
    <a class="title" href="#2332">Re: 対括弧を強調表示</a>
    <span class="author">げんた</span>
    <time datetime="2002-09-24T09:00:47">2002年09月24日 09:00</time></h1>
    <div class="body">1.3.4.0からできるようになった対括弧表示ですが1つだけ物足りないことがあります．<br>それは括弧を入力したときに入力した括弧の相手を強調してくれないことです．特に閉じ括弧の方．<br><br>つまり，入力された文字が括弧の時はカーソル位置の直前を強調表示して欲しいのです．<br>ただ，MoveCursor()で強調処理を読んでいるので直前と直後のどっちを強調すべきかはわからないですよね．MoveCursorにパラメータ追加するのはやな感じだし．<br></div></section>
    <ul><li><section><h1 id=2333>
    <span class="no">[2333]</span>
    <a class="title" href="#2333">Re2: 対括弧を強調表示</a>
    <span class="author">ai</span>
    <time datetime="2002-09-24T12:57:56">2002年09月24日 12:57</time></h1>
    <div class="body"><br>手元では対応してみました。<br>MoveCursor()のパラメータは変更せずに、SearchBracket～のパラメータのmodeの使い方を変更しました。<br>一応御要望通りの動作になっていると思います。<br>もう少し確認などありますので差分のアップロードは少し先になります。<br></div></section>
    <ul><li><section><h1 id=2335>
    <span class="no">[2335]</span>
    <a class="title" href="#2335">Re3: 対括弧を強調表示</a>
    <span class="author">あろか</span>
    <time datetime="2002-09-25T00:18:55">2002年09月25日 00:18</time></h1>
    <div class="body">強調表示とても便利ですね。<br> aiさん ありがとうございます。<br><br>調子に乗って要望します。<br>相手が範囲外になったとき、カーソルのある括弧自身だけは強調表示するというのはいかがでしょう<br></div></section>
    </li></ul></li></ul></li><li><section><h1 id=2337>
    <span class="no">[2337]</span>
    <a class="title" href="#2337">対括弧を強調表示ver4</a>
    <span class="author">ai</span>
    <time datetime="2002-09-25T12:46:03">2002年09月25日 12:46</time></h1>
    <div class="body"><br>げんたさんの<br>&gt;入力された文字が括弧の時はカーソル位置の直前を強調表示して欲しいのです．<br>と、あろかさんの<br>&gt;相手が範囲外になったとき、カーソルのある括弧自身だけは強調表示するというのはいかがでしょう<br>に対応してみました。<br><br>かろとさんの<br>&gt;検索時に、<br>&gt;'' の中、"" の中<br>&gt;は検索対象から外したい気がしました。<br>&gt;できれば、コメント内も・・（笑）<br>は、私にはちょっと無理そうです。<br>できればよかったのですが・・・。すみません。<br><br>DrawBracketPair_v4.zip<br>ssrc_2002-09-21.tar.bz2 からの差分となっております。<br></div></section>
    <ul><li><section><h1 id=2338>
    <span class="no">[2338]</span>
    <a class="title" href="#2338">Re: 対括弧を強調表示ver4</a>
    <span class="author">げんた</span>
    <time datetime="2002-09-26T02:03:40">2002年09月26日 02:03</time></h1>
    <div class="body">ちょっと試してみました．がなんか違うような気がする...<br>&gt;&gt;入力された文字が括弧の時はカーソル位置の直前を強調表示<br>なんですが，前が括弧でないときは後ろを調べるようになっています．<br><br>でも，括弧の直前でもう1つ括弧を入力したときに入力した方の括弧を強調して欲しいのよぉ．(  (  入力→)|) となっているときに，外側じゃなくて内側を強調して欲しいってことなんです．贅沢？<br><br>&gt;&gt;相手が範囲外になったとき、カーソルのある括弧自身だけは強調表示<br>もいまいちだと思いました．というのは強調表示される＝相手がある という前提が崩れてしまうからです．<br><br>画面外まで追っていって相手があったら強調ならわかりますけど，相手のない括弧を強調して欲しくないです．<br></div></section>
    <ul><li><section><h1 id=2339>
    <span class="no">[2339]</span>
    <a class="title" href="#2339">Re2: 対括弧を強調表示ver4</a>
    <span class="author">ai</span>
    <time datetime="2002-09-26T12:04:40">2002年09月26日 12:04</time></h1>
    <div class="body"><br>&gt;(  (  入力→)|) となっているときに，外側じゃなくて内側を強調して欲しいってことなんです．贅沢？<br>あぁなるほど。()だけの入力時はOKでも、上記の場合はだめですね。<br>う～ん・・・どうしたらよいでしょうか？<br><br>&gt;&gt;&gt;相手が範囲外になったとき、カーソルのある括弧自身だけは強調表示<br>これも早まったみたいです(^_^;<br>今試したところ対応する括弧がなくても、括弧はすべて強調表示されてしまいますね。<br>"対応する括弧があって、対応する括弧が画面外の場合にカーソル位置の括弧を強調表示"<br>これを実現するには結局、表示領域外を調べなければならないので、無理そうですね。<br><br>ということで、前回のままのほうが良さそうな感じがします。<br></div></section>
    <ul><li><section><h1 id=2357>
    <span class="no">[2357]</span>
    <a class="title" href="#2357">Re3: 対括弧を強調表示ver4</a>
    <span class="author">あろか</span>
    <time datetime="2002-09-29T15:30:13">2002年09月29日 15:30</time></h1>
    <div class="body">▼ aiさん<br>&gt; &gt;&gt;&gt;相手が範囲外になったとき、カーソルのある括弧自身だけは強調表示<br>&gt; これも早まったみたいです(^_^;<br>&gt; 今試したところ対応する括弧がなくても、括弧はすべて強調表示されてしまいますね。<br>&gt; "対応する括弧があって、対応する括弧が画面外の場合にカーソル位置の括弧を強調表示"<br>&gt; これを実現するには結局、表示領域外を調べなければならないので、無理そうですね。<br>&gt; <br>&gt; ということで、前回のままのほうが良さそうな感じがします。<br>すみません。画面外は検索打ち切りってのをちゃんと読んでいませんでした。ということで先の要望はなかったことにしてください。<br><br>一つ不具合をみつけました。<br>対になる括弧が画面外にある状態で対カッコ検索(C-})でジャンプしたとき、カーソル位置（ジャンプ先）の括弧は強調表示されず、もう一方（ジャンプ元）だけが強調されます。<br></div></section>
    </li></ul></li></ul></li></ul></li><li><section><h1 id=2340>
    <span class="no">[2340]</span>
    <a class="title" href="#2340">RE: 対括弧を強調表示</a>
    <span class="author">すい</span>
    <time datetime="2002-09-26T21:02:50">2002年09月26日 21:02</time></h1>
    <div class="body">ども、です。<br><br>対括弧強調表示ですが「対括弧の検索」の対象の括弧を強調表示するようにはできないでしょうか？<br>「右に括弧が無く左に括弧がある」時、対括弧検索は左の括弧に対してちゃんと動作してくれるのに、<br>強調表示は括弧がカーソルの右に無いと駄目というのが使っていてもどかしいのです。<br><br>げんたさん からの要望「入力した文字が閉じ括弧ならそちらを強調...」というのも、<br>もし、それを実装するなら対括弧検索と一緒に仕様を揃えて実施するようにした方がよいのではないでしょうか。<br>でないと「強調表示されている括弧はこっちの括弧だから、そこへ飛んで行くと思って対括弧検索したら、<br>あらぬ所へ飛んで行った」とか使っていて混乱が起きそうな気が。<br># それ以前に現時点では げんたさん の要望を取り入れるのが難しそうな気配ですが。。。(^^;<br><br><br>あと、括弧が強調表示されている状態でファイル保存（上書き保存とか）すると強調が<br>解除されてしまうのでずか．．．こちらはどうにかなりませんか？<br><br><br>もう一つ追加で、デフォルトの色設定、始めから対括弧検索は on にしておくというのはどうでしょう？<br>せっかく機能付いたのですし、、却下？鬱陶しいとかいう方がいらっしゃるでしょうか？<br># DIFF差分表示も、分かり易い色設定にして始めから on にしてあっても良いんじゃないかと思ったのですが。<br><br><br>ps.<br>上の方で げんたさん が心配してくださっていた<br>&gt; カーソルが引っかからないかなぁ(特にすいさんの486マシン)とちょっと心配．<br>の 486 ですが、実家(リース屋)に帰っていきました。今頃はおそらくジャンク．．．<br>手元には早いのしか残ってませんよ～ Pen. 90MHz とか 100MHz とか(をぃ)<br>ですので特に。。(笑)　あ、そういう問題じゃないって？(笑) (^^ゞ<br></div></section>
    <ul><li><section><h1 id=2341>
    <span class="no">[2341]</span>
    <a class="title" href="#2341">Re2: 対括弧を強調表示</a>
    <span class="author">げんた</span>
    <time datetime="2002-09-26T23:24:45">2002年09月26日 23:24</time></h1>
    <div class="body">▼ すいさん<br>&gt; 「入力した文字が閉じ括弧ならそちらを強調...」というのも、<br>&gt; もし、それを実装するなら対括弧検索と一緒に仕様を揃えて実施するようにした方がよいのではないでしょうか。<br>う～む。なんか難しい話になってきました。<br>対括弧の検索は直後の括弧（なければ直前の括弧）の対応を捜すが，括弧が入力された直後に限っては直前の括弧を優先して扱う，と。<br>言葉で書くと複雑ですが，使った感じは自然なのかなぁ。<br><br>&gt; 括弧が強調表示されている状態でファイル保存（上書き保存とか）すると強調が&gt; 解除されてしまう<br>厳しいですねぇ。私はべつにいいじゃんって思いましたが。<br><br>&gt; もう一つ追加で、デフォルトの色設定<br>C++, Java, Perlあたりは既にデフォルト設定を行ってあります。<br></div></section>
    <ul><li><section><h1 id=2342>
    <span class="no">[2342]</span>
    <a class="title" href="#2342">Re3: 対括弧を強調表示</a>
    <span class="author">かろと</span>
    <time datetime="2002-09-26T23:56:16">2002年09月26日 23:56</time></h1>
    <div class="body">▼ げんたさん<br>&gt; ▼ すいさん<br>&gt; &gt; 「入力した文字が閉じ括弧ならそちらを強調...」というのも、<br>&gt; &gt; もし、それを実装するなら対括弧検索と一緒に仕様を揃えて実施するようにした方がよいのではないでしょうか。<br>&gt; う～む。なんか難しい話になってきました。<br>&gt; 対括弧の検索は直後の括弧（なければ直前の括弧）の対応を捜すが，括弧が入力された直後に限っては直前の括弧を優先して扱う，と。<br>&gt; 言葉で書くと複雑ですが，使った感じは自然なのかなぁ。<br><br>そうですね～。<br>強調表示の括弧と対括弧検索の括弧が異なるのは、かなり嫌ですね。<br><br>かといって、あんまりややこしいのも面倒ですし、<br>強調表示も、対括弧検索も<br>直前の括弧（なければ直後の括弧）としちゃうってのはどないでしょ？<br><br></div></section>
    <ul><li><section><h1 id=2343>
    <span class="no">[2343]</span>
    <a class="title" href="#2343">Re4: 対括弧を強調表示</a>
    <span class="author">やざき</span>
    <time datetime="2002-09-27T00:15:55">2002年09月27日 00:15</time></h1>
    <div class="body"><br>&gt;かといって、あんまりややこしいのも面倒ですし、<br>&gt;強調表示も、対括弧検索も<br>&gt;直前の括弧（なければ直後の括弧）としちゃうってのはどないでしょ？<br><br>賛成です。カーソルひとつ動かすだけだし。<br></div></section>
    </li><li><section><h1 id=2347>
    <span class="no">[2347]</span>
    <a class="title" href="#2347">Re4: 放浪の旅？</a>
    <span class="author">すい</span>
    <time datetime="2002-09-28T12:29:04">2002年09月28日 12:29</time></h1>
    <div class="body">私は「“対括弧の強調表示”と“対括弧の検索”の対象がピッタリ一致してくれればいいな～」<br>と思っているだけで、私個人的にはカーソルの前後どちらを優先してもおうが、<br>げんたさん要望の動作が入ろうが入るまいが、どちらでも構わないのですが．．．<br>一点↓。<br><br>&gt;直前の括弧（なければ直後の括弧）としちゃうってのはどないでしょ？<br>↑これって今の仕様と逆ですよね。（今、対括弧検索はカーソル直後の括弧、無ければ直前の括弧）<br><br>もし直前の括弧優先に変更するなら対括弧検索の動作まで変えないとならない事に注意!です。<br><br>もし対括弧検索の動作を変えず、“直前の括弧を優先”に変更した場合、次のような不具合が。<br><br>例：カーソル位置を | とします。<br>1.　|((abc)(def))　←この状態で対括弧検索実行<br>2.　((abc)(def)|)　←この時点で直前の括弧が対象になると．．．対括弧検索を実行<br>3.　((abc)|(def))　←別の括弧へ飛んで行ってしまう。さらに対括弧検索を実行すると<br>4.　(|(abc)(def))　←また別の括弧へ飛んで行ってしまう。ここで対象括弧は最初の括弧に戻ってはいるが。。<br><br>このように対括弧検索を連続実行するだけでカーソルが次々と放浪の旅に出かけてしまいます。<br># 「カーソル放浪の旅」が望みの動作って事はないですよね？さすがに :-D<br><br>この問題を解決するには「対括弧検索を実行すると、対象括弧の後ろにカーソルが飛んで行く」<br>というように動作を変更しなくてはならないことになります。<br>で、その動作（カーソルが括弧の後ろへ飛ぶ）が使っていて普通なのでしょうか？<br><br><br>&gt;&gt;&gt; もう一つ追加で、デフォルトの色設定<br>&gt;&gt;C++, Java, Perlあたりは既にデフォルト設定を行ってあります。<br>それは気付きませんでした。(;^^ゞ<br>でも他のタイプも、、、HTML なんか &lt; &gt; の嵐ですし。全タイプ on でも良いんじゃないかっていう気が。<br></div></section>
    <ul><li><section><h1 id=2355>
    <span class="no">[2355]</span>
    <a class="title" href="#2355">Re5: 括弧の前・後ろ？</a>
    <span class="author">かろと</span>
    <time datetime="2002-09-29T08:11:14">2002年09月29日 08:11</time></h1>
    <div class="body">▼ すいさん<br>&gt; 私は「“対括弧の強調表示”と“対括弧の検索”の対象がピッタリ一致してくれればいいな～」<br>&gt; と思っているだけで、私個人的にはカーソルの前後どちらを優先してもおうが、<br>&gt; げんたさん要望の動作が入ろうが入るまいが、どちらでも構わないのですが．．．<br>&gt; 一点↓。<br><br>私は、げんたさん要望の動作も希望です。<br><br> &gt; このように対括弧検索を連続実行するだけでカーソルが次々と放浪の旅に出かけてしまいます。<br>&gt; # 「カーソル放浪の旅」が望みの動作って事はないですよね？さすがに :-D<br><br>もちろん、変更するなら一緒に変えないと　放浪癖は・・・<br><br>&gt; で、その動作（カーソルが括弧の後ろへ飛ぶ）が使っていて普通なのでしょうか？<br><br>予想通りの反対意見ありがとうございます。<br><br>飛び先は括弧の前か後ろか？なら、どっちでも気にならない。と思いますが、<br>たぶん普通のエディタとは動作が異なるでしょうね。（笑）<br><br>普通に見えるのは、カーソル(キャレット)が括弧の文字の上に飛ぶ。なのでしょう。<br>さくらの場合、文字の上にあたるのが、弧の前です。（笑）<br><br>そのへん変わると気持ち悪いとなると、げんたさんの<br>&gt;&gt; 対括弧の検索は直後の括弧（なければ直前の括弧）の対応を捜すが，括弧が入力された直後に限っては直前の括弧を優先して扱う，と。<br>かな・・<br><br></div></section>
    <ul><li><section><h1 id=2375>
    <span class="no">[2375]</span>
    <a class="title" href="#2375">Re6: 括弧の前・後ろ？</a>
    <span class="author">すい</span>
    <time datetime="2002-10-02T12:45:06">2002年10月02日 12:45</time></h1>
    <div class="body">&gt;&gt; で、その動作（カーソルが括弧の後ろへ飛ぶ）が使っていて普通なのでしょうか？<br>&gt;<br>&gt;予想通りの反対意見ありがとうございます。<br><br>これ、特に反論のつもりは無かったのですが。<br>っていうか、どっちが使い易いか、実際に使ってみないとちょっと分からないですねぇ。<br><br>何か色々考えていたら“括弧内移動タイプ”なんか使い易そうだな～～、とか思ってみたり。<br>　(|abc) ← 対括弧の検索 実行<br>　(abc|) ← 対括弧の検索 実行<br>　(|abc) ← 対括弧の検索 実行<br>カーソルの前後が 括弧/閉じ括弧 どちらかまで見て優先側や移動位置を決める必要がありますが。。。<br>でも使ってみたら使いにくいかも、、、(笑)<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=2366>
    <span class="no">[2366]</span>
    <a class="title" href="#2366">ここまでのまとめ</a>
    <span class="author">ai</span>
    <time datetime="2002-10-01T06:54:20">2002年10月01日 06:54</time></h1>
    <div class="body"><br>いろいろと意見が出ていますので、ここまでを勝手にまとめてみました。<br><br>1.カーソルの直後の括弧(なければ直前の括弧)と対応する括弧を検索し、見つかった場合は強調表示を行なう。<br>  ※ 現在は直後のみ対象にしている。<br>2.カーソルの直後/直前の優先順位は、"対括弧の検索"と同様にし統一する。<br>3.対括弧を検索する範囲は表示領域内のみ。<br><br>&gt;括弧が入力された直後に限っては直前の括弧を優先して扱う<br>これは、やるとしても実装が難しい(私には見当がつかない(--;)ため保留。<br><br>あと、あろかさんが発見した不具合を少し調べたのですが、再描画されない件が解決しないと直らないような感じです。<br>これも私には解決できそうにないので保留。<br><br>上記のような仕様でよければ、差分をUPしようと思いますがいかがでしょうか？<br>(現在と変わるのは1と2のみですが、個人的にはこれだけでも早めに取り込んでいただけたらうれしいです。)<br></div></section>
    <ul><li><section><h1 id=2374>
    <span class="no">[2374]</span>
    <a class="title" href="#2374">RE: ここまでのまとめ</a>
    <span class="author">すい</span>
    <time datetime="2002-10-02T12:33:51">2002年10月02日 12:33</time></h1>
    <div class="body">&gt;ここまでを勝手にまとめてみました。<br><br>ひとまず、そんな感じが良さそうな気がします。<br>それから先の機能upは出来る方お願いって事にでもして。<br><br># あ、話で触れられていない所を見ると、ファイル保存で強調解除されちゃう方も無理だったのでしょうか？<br></div></section>
    <ul><li><section><h1 id=2379>
    <span class="no">[2379]</span>
    <a class="title" href="#2379">RE2: ここまでのまとめ</a>
    <span class="author">ai</span>
    <time datetime="2002-10-02T22:28:58">2002年10月02日 22:28</time></h1>
    <div class="body"><br>DrawBracketPair_v5.zip をeGroupsに置いておきました。<br>ssrc_2002-09-29.tar.bz2 からの差分です。<br><br>&gt;# あ、話で触れられていない所を見ると、ファイル保存で強調解除されちゃう方も無理だったのでしょうか？<br>これは再描画の問題と一緒にしてました(^^;<br>void CEditView::RedrawAll( void ) の最後あたりに下記を追加すると保存の際に強調表示が解除されることは回避できるのですが、良い解決策ではなさそうなので、再描画の問題の解決待ち状態です。<br><br>if( m_pcEditDoc-&gt;GetDocumentAttribute().m_Co<br>lorInfoArr[COLORIDX_BRACKET_PAIR].m_bDis<br>p ){<br>    DrawBracketPair();<br>}<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></body></html>