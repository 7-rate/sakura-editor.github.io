<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css">
  <script src='../bbs.js'></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120820034-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-120820034-1');
  </script>

  <link href="../bbs.css" type="text/css" rel="stylesheet">
  <link rel="shortcut icon" href="favicon.ico">
  <title>NT4.0で最新版を入れると落ちる | サクラエディタ過去ログ</title>
</head>
<body>
<ul class="side">
        <a href="./" class="toindex">◀ANSI版開発トップへ</a>
        <li><div class="list-title">
    <span class="no">2937</span>
    <a class="thread-title" href="2937.html#2937">NT4.0で最新版を入れると落ちる</a></div>
    <ul><li><div class="list-title">
    <span class="no">2938</span>
    <a class="thread-title" href="2937.html#2938">RE: NT4.0で最新版を入れると落ちる</a></div>
    <ul><li><div class="list-title">
    <span class="no">2940</span>
    <a class="thread-title" href="2937.html#2940">Re2: NT4.0で最新版を入れると落ちる</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">2955</span>
    <a class="thread-title" href="2937.html#2955">Re:NT4.0で最新版を入れると落ちる</a></div>
    </li><li><div class="list-title">
    <span class="no">2957</span>
    <a class="thread-title" href="2937.html#2957">RE: NT4.0で最新版を入れると落ちる</a></div>
    <ul><li><div class="list-title">
    <span class="no">2960</span>
    <a class="thread-title" href="2937.html#2960">CImageListに関して</a></div>
    <ul><li><div class="list-title">
    <span class="no">2963</span>
    <a class="thread-title" href="2937.html#2963">Re: CImageListに関して</a></div>
    <ul><li><div class="list-title">
    <span class="no">2965</span>
    <a class="thread-title" href="2937.html#2965">Re2: CImageListに関して</a></div>
    </li><li><div class="list-title">
    <span class="no">2966</span>
    <a class="thread-title" href="2937.html#2966">Re2: CImageListに関して</a></div>
    <ul><li><div class="list-title">
    <span class="no">2967</span>
    <a class="thread-title" href="2937.html#2967">Re3: CImageListに関して</a></div>
    <ul><li><div class="list-title">
    <span class="no">2972</span>
    <a class="thread-title" href="2937.html#2972">Re4: CImageListに関して</a></div>
    <ul><li><div class="list-title">
    <span class="no">3059</span>
    <a class="thread-title" href="2937.html#3059">Re5: CImageListに関して</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
    </ul><ul class="main"><li><section><h1 id=2937>
    <span class="no">[2937]</span>
    <a class="thread-title" href="#2937">NT4.0で最新版を入れると落ちる</a>
    <span class="author">あじこ</span>
    <time datetime="2003-07-08T11:30:24">2003年07月08日 11:30</time></h1>
    <div class="body">いつも使わせていただいております。<br><br>最新版をインストールしたら、落ちました。<br>青い画面に文字がいっぱいで(^^;<br><br>(1.3.10.2)(1.3.6.3)でこのような症状になります。<br><br>旧バージョン(1.3.2.4)は大丈夫でした。<br><br>NT4.0 4.00.1381<br>DELL OPTIPLEX GX1<br>です。<br>SCSI接続でHD、MOつないでます。<br></div></section>
    <ul><li><section><h1 id=2938>
    <span class="no">[2938]</span>
    <a class="thread-title" href="#2938">RE: NT4.0で最新版を入れると落ちる</a>
    <span class="author">みく</span>
    <time datetime="2003-07-08T20:21:54">2003年07月08日 20:21</time></h1>
    <div class="body"><br>多分やってるとは思いますが、、、<br>・サービスパックは最新のものを当ててますでしょうか。<br>・ディスプレイドライバは最新になってますでしょうか。<br><br><br>ところで、<br>CImageListMgr.cppで、<br>dcFrom = ::CreateCompatibleDC( ::GetDC( hWnd ) );<br>CreateCompatibleBitmap( dcFrom, 画像Xサイズ, 画像Yサイズ );<br>CreateCompatibleBitmap( dcTo, m_cx * MAX_X * MAX_Y, m_cy );<br>としてサイズを指定した後に、<br>ロードしたビットマップを割り当てたらどうなりますでしょうか。<br><br>十分なサイズを割り当てずに、それより大きいサイズの処理をしよう<br>とするとおかしくなるようなことがないでしょうか。<br>（BODではないが、正しく描画できないという現象はあるみたい）<br><br>#以上、憶測でした。<br></div></section>
    <ul><li><section><h1 id=2940>
    <span class="no">[2940]</span>
    <a class="thread-title" href="#2940">Re2: NT4.0で最新版を入れると落ちる</a>
    <span class="author">あじこ</span>
    <time datetime="2003-07-09T09:42:17">2003年07月09日 09:42</time></h1>
    <div class="body">早速の返事どうもです。<br><br>一応、最新だと思ってるのですが<br>ネットにつながってないマシンですので<br>完璧に最新なのもかはちょっと疑問ですね。<br>すみません。<br><br>それを試した上で<br>ちょっと考えて見ます。<br>ダウンロードするにはちょっと環境的に<br>難しいので、いろいろやってみます。</div></section>
    </li></ul></li><li><section><h1 id=2955>
    <span class="no">[2955]</span>
    <a class="thread-title" href="#2955">Re:NT4.0で最新版を入れると落ちる</a>
    <span class="author">ドラネコ</span>
    <time datetime="2003-07-17T11:05:38">2003年07月17日 11:05</time></h1>
    <div class="body">僕も同じ症状です。<br>環境はVaio PCG-XR1E/BP ＋ Win2000proです。<br><br>OSの再インストしてクリーンな状態でもやっぱり<br>OSが落ちます。すごい速さで再起動されるので、<br>それはそれで便利な時があります。(笑)<br><br>残念ながらブルースクリーン時に表示される文字は<br>小さいうえに一瞬なんで、読めませんでした。<br><br>HDDが古いからかな？</div></section>
    </li><li><section><h1 id=2957>
    <span class="no">[2957]</span>
    <a class="thread-title" href="#2957">RE: NT4.0で最新版を入れると落ちる</a>
    <span class="author">みく</span>
    <time datetime="2003-07-20T10:32:50">2003年07月20日 10:32</time></h1>
    <div class="body"><br>試作改良版を私のページに置きましたので、試してみてください。<br>（1個はメッセージボックスがたくさん出ます）<br>ブルースクリーンになる可能性がありますので、確認される際には十分ご注意ください。<br><br>→実行ファイル：http://www.geocities.co.jp/SiliconValley-SanJose/3299/<br>→ソースファイル：http://www.egroups.co.jp/files/sakura-editor/Developer/Source/imgtest1.diff<br></div></section>
    <ul><li><section><h1 id=2960>
    <span class="no">[2960]</span>
    <a class="thread-title" href="#2960">CImageListに関して</a>
    <span class="author">げんた</span>
    <time datetime="2003-07-21T03:52:57">2003年07月21日 03:52</time></h1>
    <div class="body">言うだけなら誰でもできると言われるかもしれませんが，ImageListを使わずにその都度描画するオリジナルの方法に戻した方がいいのではないかという気がしています．<br>IE無しのWindows 95でImageListが使えないのも理由の1つです．<br><br>ImageListの代わりにbitmap自身を保持して，描画要求に対してその都度BitBltを行えば良いのではないかと思います．<br>描画コード自体はnakatani氏が作ったものが昔のコードに入っていますのでそれが使えるはず．<br>幸い描画とアイコンの保持をクラス化してあるので外部への影響は少なくて済むのではないかと思います．<br></div></section>
    <ul><li><section><h1 id=2963>
    <span class="no">[2963]</span>
    <a class="thread-title" href="#2963">Re: CImageListに関して</a>
    <span class="author">げんた</span>
    <time datetime="2003-07-21T21:50:18">2003年07月21日 21:50</time></h1>
    <div class="body">&gt;ImageListを使わずにその都度描画するオリジナルの方法に戻した<br>メニューとリストボックスはOKなんですが，ツールバーが問題になりますね．<br>ToolBarには生憎OwnerDraw機能がなく，ImageListを使わない登録方法(ADDBITMAP)でも横1列のbitmapを要求されているので結局並び替えなくてはいけない点は同じです．<br><br>--<br>ところで，SDKのSelectObjectのところを見ると，Device contextに対してSelectObjectできるbitmapは以下のAPIで作られなくてはならないとあります．<br>&gt; CreateBitmap, CreateBitmapIndirect, CreateCompatibleBitmap, CreateDIBitmap, CreateDIBSection <br>&gt; (Bitmaps can be selected for memory DCs only, and for only one DC at a time.)<br><br>しかしCImageListではLoadBitmap, LoadImageで作ったものをSelectObjectに与えています．<br>これが問題の原因と言うことは無いでしょうか．<br></div></section>
    <ul><li><section><h1 id=2965>
    <span class="no">[2965]</span>
    <a class="thread-title" href="#2965">Re2: CImageListに関して</a>
    <span class="author">みく</span>
    <time datetime="2003-07-21T22:38:42">2003年07月21日 22:38</time></h1>
    <div class="body"><br>&gt;しかしCImageListではLoadBitmap, LoadImageで作ったものをSelectObjectに与えています．<br>&gt;これが問題の原因と言うことは無いでしょうか．<br><br>問題ないみたいです。<br>http://support.microsoft.com/default.aspx?scid=kb;en-us;158898<br></div></section>
    </li><li><section><h1 id=2966>
    <span class="no">[2966]</span>
    <a class="thread-title" href="#2966">Re2: CImageListに関して</a>
    <span class="author">げんた</span>
    <time datetime="2003-07-22T01:34:09">2003年07月22日 01:34</time></h1>
    <div class="body">&gt;メニューとリストボックスはOKなんですが，ツールバーが問題になりますね．<br>&gt;ToolBarには生憎OwnerDraw機能がなく，ImageListを使わない登録方法(ADDBITMAP)でも横1列のbitmapを要求されているので結局並び替えなくてはいけない点は同じです．<br>よくよくSDKを見たらCommon Control 4.70以降ではOwner Drawが可能になっています．<br>とりあえずツールバーをOwnerDrawにする戦略で現在試しています．<br><br>ほとんどできたんですがなぜかファイル新規作成のアイコンが化けることがあります．<br>どこかで配列を破壊されている可能性が高い..(T_T)<br><br>せっかくImageListを排除できたのですが，Owner Drawが初期のCommon Controlでは使えないのでWin95の方は引き続きツールバー無しでお願いします(^^;)<br>あ，でもメニューアイコンは描画できるようになってますので多少は進歩しているかと...<br></div></section>
    <ul><li><section><h1 id=2967>
    <span class="no">[2967]</span>
    <a class="thread-title" href="#2967">Re3: CImageListに関して</a>
    <span class="author">げんた</span>
    <time datetime="2003-07-22T02:31:26">2003年07月22日 02:31</time></h1>
    <div class="body">ようやくできました．こんな時間になってしまった．<br><a href=http://sakura-editor.sourceforge.net/snapshot/sakura_2003-07-21_noimagelist.zip target=_top><nobr>http://<wbr>sakura-<wbr>editor.<wbr>sourcefo<wbr>rge.<wbr>net/<wbr>snapshot<wbr>/<wbr>sakura_2<wbr>003-<wbr>07-<wbr>21_noima<wbr>gelist.<wbr>zip</nobr></a><br><br>&gt;ほとんどできたんですがなぜかファイル新規作成のアイコンが化けることがあります．<br>&gt;どこかで配列を破壊されている可能性が高い..(T_T)<br>Disabledの描画を行うときにオリジナルのBitmapのDevice Contextを作業用に使っていたのが原因でした．<br></div></section>
    <ul><li><section><h1 id=2972>
    <span class="no">[2972]</span>
    <a class="thread-title" href="#2972">Re4: CImageListに関して</a>
    <span class="author">もち吉</span>
    <time datetime="2003-07-23T23:37:52">2003年07月23日 23:37</time></h1>
    <div class="body">はじめまして。<br><br>自分の環境でもブルースクリーンで落ちていたのですが、noimagelist版で正常に起動できました。<br><br>みくさんのお試し版も試したのですが、こちらはメッセージボックスの「12」（だったと思います・・・）の後、ブルースクリーンになりました。<br><br>VAIO+WinXP Pro です。<br>参考になりましたら幸いです。<br></div></section>
    <ul><li><section><h1 id=3059>
    <span class="no">[3059]</span>
    <a class="thread-title" href="#3059">Re5: CImageListに関して</a>
    <span class="author">みく</span>
    <time datetime="2003-08-31T19:32:25">2003年08月31日 19:32</time></h1>
    <div class="body"><br>メモ：<br>ImageList_AddMaskedで落ちてると予想されます。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>