<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css">
  <script src='../bbs.js'></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120820034-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-120820034-1');
  </script>

  <link href="../bbs.css">
  <link rel="shortcut icon" href="favicon.ico">
  <title>Commit報告(Chg) ICONをすべてのコマンドに割り当てる | サクラエディタ過去ログ</title>
</head>
<body>
<ul class="side">
        <a href="./" class="toindex">◀Unicode版開発トップへ</a>
        <li><div class="list-title">
    <span class="no">1267</span>
    <a class="thread-title" href="1267.html#1267">Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1268</span>
    <a class="thread-title" href="1267.html#1268">Re:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1269</span>
    <a class="thread-title" href="1267.html#1269">Re2:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1275</span>
    <a class="thread-title" href="1267.html#1275">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">1270</span>
    <a class="thread-title" href="1267.html#1270">Re2:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1271</span>
    <a class="thread-title" href="1267.html#1271">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1272</span>
    <a class="thread-title" href="1267.html#1272">Re4:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1273</span>
    <a class="thread-title" href="1267.html#1273">Re5:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1274</span>
    <a class="thread-title" href="1267.html#1274">Re6:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1277</span>
    <a class="thread-title" href="1267.html#1277">Re7:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1278</span>
    <a class="thread-title" href="1267.html#1278">Re8:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1280</span>
    <a class="thread-title" href="1267.html#1280">Re9:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1281</span>
    <a class="thread-title" href="1267.html#1281">Re10:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1283</span>
    <a class="thread-title" href="1267.html#1283">Re11:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1284</span>
    <a class="thread-title" href="1267.html#1284">Re12:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    </li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">1562</span>
    <a class="thread-title" href="1267.html#1562">-</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">1279</span>
    <a class="thread-title" href="1267.html#1279">Re7:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    </li></ul></li></ul></li></ul></li></ul></li><li><div class="list-title">
    <span class="no">1276</span>
    <a class="thread-title" href="1267.html#1276">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    </li></ul></li><li><div class="list-title">
    <span class="no">1282</span>
    <a class="thread-title" href="1267.html#1282">Re2:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1285</span>
    <a class="thread-title" href="1267.html#1285">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a></div>
    <ul><li><div class="list-title">
    <span class="no">1286</span>
    <a class="thread-title" href="1267.html#1286">折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1287</span>
    <a class="thread-title" href="1267.html#1287">RE: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1288</span>
    <a class="thread-title" href="1267.html#1288">Re2: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1289</span>
    <a class="thread-title" href="1267.html#1289">Re3: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1290</span>
    <a class="thread-title" href="1267.html#1290">Re4: 折返しについて</a></div>
    </li><li><div class="list-title">
    <span class="no">1291</span>
    <a class="thread-title" href="1267.html#1291">Re4: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1292</span>
    <a class="thread-title" href="1267.html#1292">Re5: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1293</span>
    <a class="thread-title" href="1267.html#1293">Re6: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1294</span>
    <a class="thread-title" href="1267.html#1294">Re7: 折返しについて</a></div>
    <ul><li><div class="list-title">
    <span class="no">1302</span>
    <a class="thread-title" href="1267.html#1302">Commit報告（Fix）:ツールバー折返しの番号ずれ対応</a></div>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
    </ul><ul class="main"><li><section><h1 id=1267>
    <span class="no">[1267]</span>
    <a class="thread-title" href="#1267">Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-20T20:46:16">2010年06月20日 20:46</time></h1>
    <div class="body">リビジョン：<br>  rev1779<br><br>変更種別：<br>  仕様変更<br><br>内容：<br>ICONを割り当てたコマンドは、<br>    現在位置を移動履歴に登録<br>    1行選択<br>    閉じてタグジャンプ(元ウィンドウclose)<br>    カスタムメニュー11～24<br>    外部マクロ21～50<br>です。<br><br>また<br>「このタブ以外を閉じる」、「左をすべて閉じる」、「右をすべて閉じる」<br>に<br>TabCloseOther、TabCloseLeft、TabCloseRight<br>のマクロ名を与えました。<br><br>既存コードと非互換性があり、ツールバーの折り返しのコード、とPluginのコードが32だけずれます。<br>（外部マクロと重なるためです）<br><br>PatchUnicode#3015183<br><br>また同様のパッチのANSI版を<br>Patch#3015185に上げてあります。</div></section>
    <ul><li><section><h1 id=1268>
    <span class="no">[1268]</span>
    <a class="thread-title" href="#1268">Re:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">syat</span>
    <time datetime="2010-06-22T06:17:18">2010年06月22日 06:17</time></h1>
    <div class="body">▼ Uchiさん<br>&gt; 既存コードと非互換性があり、ツールバーの折り返しのコード、とPluginのコードが32だけずれます。<br>&gt; （外部マクロと重なるためです）<br>&gt; <br>パッチの段階でコメントすればよかったのですが、これちょっとまずくないですか。<br>ツールバーの設定はiniファイルにアイコンの番号で記録されているので、ツールバーにプラグインコマンドや折り返しを追加してる状態でバージョンアップすると外部マクロに化けてしまいます。<br>すでに割り当て済みのアイコン番号は変えないように外部マクロを追加した方がよいのでは？<br>（12行目に25個、13行目に25個とか）<br></div></section>
    <ul><li><section><h1 id=1269>
    <span class="no">[1269]</span>
    <a class="thread-title" href="#1269">Re2:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-22T22:05:39">2010年06月22日 22:05</time></h1>
    <div class="body">▼ syatさん<br>&gt; ツールバーの設定はiniファイルにアイコンの番号で記録されているので、ツールバーにプラグインコマンドや折り返しを追加してる状態でバージョンアップすると外部マクロに化けてしまいます。<br>&gt; すでに割り当て済みのアイコン番号は変えないように外部マクロを追加した方がよいのでは？<br>&gt; （12行目に25個、13行目に25個とか）<br>「折り返し」のみであれば、それも有かなと思います。<br>事実、前にインプリメントした時には（3年ぐらい前ですが）、1～30を12段目に、31～49を12段目に置いていました。<br>ですが、プラグインの場合に、実質的に開始位置以降のすべてのポジション（論理的には2000個）を占有します。<br>つまり、段数を増やした場合、、必ず最後の段の後ろにプラグインコマンドを付けることになります。<br>ので、プラグインがまだそれほど普及していない今ならば、まだ修正間可能と思い上げました。<br><br>iniファイルの読み込み時に処理するルーチンもインプリメントしてみましたが、<br>（Pluhinの作者のsyatさんはそうでもないかも知れませんが）<br>使用頻度の少ないコマンドの為にそこまでするのもな、<br>ということで、はずしました（simple is best）。<br><br>今なら可能という事で、お許し願いたいと思います。</div></section>
    <ul><li><section><h1 id=1275>
    <span class="no">[1275]</span>
    <a class="thread-title" href="#1275">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">syat</span>
    <time datetime="2010-06-25T00:35:38">2010年06月25日 00:35</time></h1>
    <div class="body">すみません。2日ほどBBSを見れませんでした。<br><br>▼ Uchiさん<br>&gt; プラグインの場合に、実質的に開始位置以降のすべてのポジション（論理的には2000個）を占有します。<br>&gt; つまり、段数を増やした場合、、必ず最後の段の後ろにプラグインコマンドを付けることになります。<br>これはちょい違います。<br><br>コマンド番号、アイコン番号、ボタン番号（仮称）の動きは、もかさんがまとめてくださった内容の通りです。<br>・コマンド番号→F_FILENEW（30101）のようなコマンドに割り振られた番号。<br>・アイコン番号→BMP上の位置を指定する番号。<br>これらの対応表がCMenuDrawerのtbd配列で、実際はその配列をそのまま扱うのではなく、TBBUTTON構造体の配列に変換してメモリ上に持っています（m_tbMyButton）。この添え字をボタン番号とでも呼びましょう。ボタン番号とアイコン番号はだいたい同じです。<br>だいたいと書いているのは、折返しとプラグインコマンドが小細工しているため。折返しは実際はアイコンが無いのだけれど仮想的にボタン(382)と見なしています。プラグインコマンドはBMPに含まれない追加アイコンを含むこと、および、追加アイコンを指定しないコマンドは383の固定アイコンにマップしています。<br>ちなみに追加アイコンはメモリ上のBMPの最下行の下を1行分拡大してそこに保持するので、383以降の2000個を占有するのではなく、MAX_TOOLBARBUTTONSから2000個です。<br><br>したがってBMPに段を追加する場合はMAX_TOOLBARBUTTONSさえ更新してもらえればプラグイン的に無問題です。<br>・・・って思っててもコメントなどに書いておかないと伝わりませんね。。。<br><br>INIファイルのツールバー設定はボタン番号で記録するので、そもそもtbd配列が変わると影響が出てきます。<br>外部マクロですが、アイコンは1個だけ追加し、外部マクロ20～49は共通でそのアイコンを使うという案はどうでしょう？ ボタン番号の話だけなのでm_tbMyButtonの初期化に少しコード追加するだけですみそうです。小細工へようこそ！<br><br></div></section>
    </li></ul></li><li><section><h1 id=1270>
    <span class="no">[1270]</span>
    <a class="thread-title" href="#1270">Re2:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">anonymous</span>
    <time datetime="2010-06-22T22:59:30">2010年06月22日 22:59</time></h1>
    <div class="body">UNICODE版てβ版ですよね</div></section>
    <ul><li><section><h1 id=1271>
    <span class="no">[1271]</span>
    <a class="thread-title" href="#1271">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-23T05:03:49">2010年06月23日 05:03</time></h1>
    <div class="body">ANSI版のパッチも出ていて、trunk(ANSI)は互換性重視なので、受け入れられないと思います。<br>そして trunk/trunk2で my_icons.bmp ぐらい共有できるようにしたいです。<br>「折り返し」に関しては、<br>//&#9;2007.10.12 genta 折り返しボタンが最後のデータと重なっているが，<br>//&#9;インデックスを変更するとsakura.iniが引き継げなくなるので<br>//&#9;重複を承知でそのままにする<br>というコメントが書いてあるぐらいだから考慮した方がいいでしょう。<br># 自動折り返し、自動折り返し候補、複数ツールバー配置、下とか左右とかフロートとかもほしいところですが<br><br>この辺の番号体系は複雑なわりに、まとまってコメントがないですね。<br>プラグインも含めてちょっと見ただけでは全然わからないので調べてみました。間違いを発見したら必ず教えてください。<br>・コマンド番号/EFunctionCode<br>  もともとメニューの番号。範囲指定の値は式+キャスト で生成される。<br>  F_DISABLE, F_FILENEW, ... 非連番20000-40000位の値 16bit制限<br>  プラグインは、F_PLUGCOMMAND_FIRSTから20x100 を使用。共通設定、プラグインの順番に依存<br>  変更すると、カスタムメニュー,キー割り当て,メインメニュー,その他メニューが影響を受ける<br>・アイコン番号A CMenuDrawer::CMenuDrawer()の tbd のindex<br>  my_icons.bmpの特定コマンド番号に対する位置を決定している<br>  変更するとツールバーが化ける、my_icons.bmpの互換性がなくなる<br>・アイコン番号B std::vector&lt;TBBUTTON&gt; CMenuDrawer::m_tbMyButton のindex<br>  0はメニューのセパレータ用、通常コマンドは「tbdのindex + 1」<br>  tdbのリストのコメントの数字でもある。<br>  プラグインのコマンド数におおじて動的ロードで追加される<br>  その時点での数は  m_nMyButtonNum と m_tbMyButton.size() の2重管理の模様<br>  変更するとツールバーが化ける<br>・アイコン番号C m_tbMyButtonのiBitmapの番号<br>  たぶん CImageListMgrのアイコン番号。0開始。<br>  アイコン番号Aに加えてプラグイン固有アイコンがあれば動的ロードで追加される<br>  CImageListMgrの管理者は、CEditApp(旧CEditWnd？)でありプロセス上に1つのみ。<br>・アイコン番号D m_nToolBarButtonIdxArr 所有者はDLLSHAREDATA<br>  CShareDataの初期化ではマジックナンバーで書いてある。説明もない<br>  管理者はしいて言うならCPropComToolbarとShareData_IO_Toolbar<br>  CMenuDrawer::getButton(int idx) の引数になる。たぶん アイコン番号Bと同じ。<br></div></section>
    <ul><li><section><h1 id=1272>
    <span class="no">[1272]</span>
    <a class="thread-title" href="#1272">Re4:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-23T05:04:43">2010年06月23日 05:04</time></h1>
    <div class="body">(つづき)多対多なのか多:1なのか1:1が必須なのかは、私は未調査です。<br>アイコンがないプラグインコマンドのツールバーの登録番号(アイコン番号D)は<br>Uchiさんのパッチで MAX_TOOLBARBUTTONS-1 になる。<br>rev1778以前は、383というマジックナンバーが使われているが、これはtbdのF_PLUGCOMMAND_FIRSTのアイコン番号Bで<br>FIRSTになっているけど1番目という意味ではなく、独自アイコンがない場合のプラグインのアイコンという程度の意味<br><br>F_PLUGCOMMAND_FIRST が実際にプラグインコマンドに割り当てられるなら、m_tbMyButtonのidCommandが重複登録されるかもとコードを追い続けたら、CPlugin::AddCommandで1から振ると書いてあるので、F_PLUGCOMMAND_FIRSTにはならない。<br><br>・元の話<br>「プラグインのデフォルトアイコン」の位置は383で問題ない。固定アイコンだから。<br>F_TOOLBARWRAP の位置は動かすと困る。動かさなくても問題ないはず(最後にある必要はない)<br>動かさない場合は、「マクロのツールバー番号(アイコン番号D)」が連続しないけど、さすがにツールバー番号の範囲でマクロ用特殊処理とかしてないと思う。<br>独自プラグインコマンドの番号は、番兵と手前すなわち「F_TOOLBARWRAP」の後ろに追加される。<br>だから、もともと F_PLUGCOMMAND_FIRST と 各専用アイコンのIDは連続していない。<br>固定アイコンの最大数(アイコン番号A =&gt; アイコン番号B)を増やせば、必然的にプラグインのツールバー登録はずれることになる。<br>将来的にもう１行は増えると思っている。飛び番登録のような処理が必要で今m_tbMyButtonへの追加で工夫しておけばOKそうだ。<br>新バージョンの設定を旧バージョンのサクラで開く可能性もあるので、読み込み時に旧設定をずらせばいいとは限らない。<br><br>プラグイン自体の問題点<br>1. 新しいウィンドウでプラグインを追加してツールバー・メニューに入れると古い方では、プラグインとアイコンが一致しないので、ツールバーの再表示でおかしくなるかも<br>2. プラグインコマンドをツールバーに登録した後、そのコマンドより先にコマンド登録されるプラグインでコマンドが増えると、登録したものがずれるようにみえる<br>3. PlugId と PluginId が混同されているみたい。 ついでに両方とも変数名が m_idなのでなおさら区別がつかない<br>4. 今は20個のプラグインしか登録できないけど、私のはすでに9番目まで使用中<br><br>#外が明るいよ<br></div></section>
    <ul><li><section><h1 id=1273>
    <span class="no">[1273]</span>
    <a class="thread-title" href="#1273">Re5:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-23T21:37:58">2010年06月23日 21:37</time></h1>
    <div class="body">まず問題は、大きく2つに分かれると思います。<br><br>①「折り返し」のツールバー上の番号の変更。<br>②プラグイン関連（もかさんが指摘した問題など）。<br><br>①に関して言えば、「外部マクロ」の番号が連続していることを前提にコーデングされている箇所が、幾つか散見されるので、出来れば間は入れたくないというのが正直なところです<br>（これを機会に整理するというのも有ですが）。<br>また、「メインメニューの設定」を作成していたときにも、感じたのですが、「カスタムメニュー」が「左クリックメニュー」とその他でコマンド番号が分かれているので、大変作りにくく感じました。<br>それも含めて、移動というのが妥当と考えました。<br>&gt; 新バージョンの設定を旧バージョンのサクラで開く可能性もあるので、読み込み時に旧設定をずらせばいいとは限らない。<br>私の考えとしては、新バージョン.iniを旧バージョンで読み込ませて、いつも正常に動作することを期待するのは、過剰品質と思っています。<br>後方互換性に関しては、出来る限り行うべきですが、絶対ではない、前方互換性は、考慮すべきだが、優先度低、と考えています。<br><br>②プラグイン<br>これに関しての問題点は、もかさんも挙げられているようですが、内部的に自動割当されている番号（コマンド番号、ツールバー番号等）を、外部ファイルの sakuraW.ini に書き出しているのが問題なのだと思います。<br>このあたりを如何にかすべきでしょう。<br>syatさん如何考えていますでしょうか？<br>デフォルトアイコンに関しては、MAX_TOOLBARBUTTONS-1 という定義ではなく、別に定義すべきという問題と捉えました。</div></section>
    <ul><li><section><h1 id=1274>
    <span class="no">[1274]</span>
    <a class="thread-title" href="#1274">Re6:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-23T23:38:31">2010年06月23日 23:38</time></h1>
    <div class="body">パッチを書いていてようやく気が付きました。<br>「折り返し」の本当の位置は、F_PLUGCOMMAND_FIRSTではなくて、F_TOOLBERWRAPの場所でした。<br>マクロを再度移動して「折り返し」の位置を戻したパッチを書きましたので、議論の参考にしてください。<br>ついでに、外部マクロ32以上がプラグインにアイコンを乗っ取られるバグを修正しました。<br>→ PatchUnicode#3020183 ツールバー番号とmyiconsの位置修正<br><br>&gt;「外部マクロ」の番号が連続していることを前提にコーデングされている箇所<br>F_USERMACRO_0とMAX_CUSTMACROはそうみたいです。<br>探してみたけど「外部マクロ」の「アイコン番号/メニュー番号」は一か所もないようです。<br>352, 353, 371, 372あたりの数字です。<br>&gt;「カスタムメニュー」が「左クリックメニュー」とその他でコマンド番号が分かれている<br>それもコマンド番号の話でアイコン/ツールバー番号は関係ないです。<br><br>&gt;②プラグイン<br>のツールバー番号の件。上記パッチではとりあえず640までを予約しておき641からになります。<br><br>１つ案としては、こんなのどうでしょ？<br>m_nToolBarButtonIdxArr の値をプラグインはFuncCodeベースにする。これである程度変更に耐えられます。<br>アイコン番号B m_tbMyButton[i]のインデックスは、間接アクセスになっているようなので、<br>アイコン番号C m_nToolBarButtonIdxArrの番号との間は適度変換して適切なボタンを返せばいいんじゃないでしょうか。<br>CMenuDrawner内部と、GetIconId/getButtonだけ直せばできそうな感じです。<br>rev1778/1779以前との互換性はありませんが、使っていてプラグインボタンがいきなり変わるのは防げますし、アイコンの段が増えても問題ないです。<br>Uchiさんは コマンド番号も反対のようです。<br>私も名前空間(いわゆるプラグインID)が使えるならその方がいいですが影響範囲からして無理そうです。<br><br>その他気が付いたもの：<br>F_PLUGCOMMAND_LAST は maxdataの MAX_PLUGIN を反映しないから、片方変更すると矛盾する<br>プラグコマンドは「1」から「99」だから最大数は20*99 = 1980<br># 個人的には40プラグイン*49プラグコマンドがいいかも<br></div></section>
    <ul><li><section><h1 id=1277>
    <span class="no">[1277]</span>
    <a class="thread-title" href="#1277">Re7:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-25T01:49:27">2010年06月25日 01:49</time></h1>
    <div class="body">プラグインのｉｎｉファイルへの書き込み（Pluginh本体ではなく、Toolbar,CustMenu,KeyBind）を文字列化（PluginId/番号の形）で行うパッチを上げます。<br>その他に、Pluginのデフォルトアイコンの番号のマクロ定義、<br>過去との互換性（共有変数バージョンをｉｎｉに書き込みそれでコントロール）<br>も追加してあります。<br>これで後方度感性の問題はなくなると思います（rev.1779でプラグイン、折返を設定しなおした場合を除く）。<br><br>PatchUnicode#3020889<br><br>もかさんのパッチは見ていないので、コンフリクトを起こしているかもしれません。<br><br>折り返しのICON番号の墨守が必要なのかという問題が残りますが、<br>これを使っている人はどの程度いるのでしょうか？<br>もかさん、syatさんが使用していかったらしいことはわかるのですが、<br>如何でしょうか？</div></section>
    <ul><li><section><h1 id=1278>
    <span class="no">[1278]</span>
    <a class="thread-title" href="#1278">Re8:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-25T01:52:42">2010年06月25日 01:52</time></h1>
    <div class="body">追記<br>何もなければ、26日にでもコミットをかけます。</div></section>
    <ul><li><section><h1 id=1280>
    <span class="no">[1280]</span>
    <a class="thread-title" href="#1280">Re9:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-26T04:00:20">2010年06月26日 04:00</time></h1>
    <div class="body"> ①「折り返し」のツールバー上の番号の変更<br>▼ syat さん<br>&gt;ちなみに追加アイコンは MAX_TOOLBARBUTTONSから2000個です。<br>というコメントを見て MAX_TOOLBARBUTTONS という値について、誤解していたようです。<br>これは、tbdの大きさとMAX_TOOLBARBUTTONSを同じにして、tdbの最後から2番目に「ツールバー折返」を指定していないと、<br>共通設定でツールバー折返を追加した時におかしくなるんですね。<br>私の、v0_0.patchとコメントではそれに気が付いていなかったので、問題がありました。<br>この問題は、Uchiさんが折返を後ろにずらした理由になります。<br>でも、現在の仕様とUchiさんのパッチだけでは、将来 MAX_TOOLBARBUTTONSを増やしたいときに「今回と全く同じ」問題が発生します。<br>結局、問題を解決するにはツールバー折返を固定にする必要がります。どうせ固定にするなら384でいいですよね。<br><br>iniも、「バージョンアップで書き換えれば問題ない」といいますが、iniのANSI -&gt; Unicode の移行など複数のシチュエーションでもボタン番号が正しく設定されますか？<br>DLLSHAREDATAのバージョンは、A/Wでそろっていません。仮に今そろえても、足並みを揃えて変更できるとは到底思えません。<br>また、次回変更時では、ANSI旧版その1、ANSI旧版その2、Unicode版その1、Unicode版その2があることになります。<br>ANSI版iniだったかUnicode版iniだったかを判別する方法はありません。エンコードは、ユーザが事前に変更する可能性もあります。<br>(なおほぼ設定を引き継いで移行できるかどうか細かいことは知りません)<br>　もし互換用の数字をずらす処理はしない場合ツールバー折返だけおかしくなれば、ユーザは「バグってる」か「設定ファイルが壊れた」か「駄目なエディタ」と思うでしょう。<br><br>②プラグイン<br>Uchiさんのpatchでは、MAX_TOOLBARBUTTONS+1からCShareDataでプラグインにボタン番号を振るようになっています。<br>上記のm_tbMyButton.size() == MAX_TOOLBARBUTTONS+1 の制限がプラグインのロード直前に守られていれば、期待した動作になります。<br>コード上で一切チェックしていない制限であり、たまたまおかしくない状態ではないでしょうか。<br>しかし以前に書いたような、自動折返候補のような「特殊ボタン番号を追加したい」ということをすれば、またアイコンをつぶすか何かしないといけません。<br>syatさん提案の「マクロのアイコンがないものもアイコンを共有してボタンに追加できるようにしよう」のようなものが増えた瞬間に破綻します。<br>色々考えた結果、やはりCShareData_IOでPlugin関連のコードを実行すること自体が、保守・整合性・依存性などを考えたときに、リスクが高いとおもます。<br><br>こちらに書いた方がいいと思ったので、こちらに書きますが、<br>プラグインが読み込まれて、有効になるのは次の起動時で、この「起動時」と呼んでいるものは、次の編集ウィンドウが起動したときのことです。<br>まず、プラグインがツールバーに設定されているとします。<br>ウィンドウAを開いて新しいプラグインを読み込んで、ウィンドウBを開いてプラグインをツールバーに登録します。<br>そのプラグインが、元からあるものより先に登録される場合(たぶんm_sId順)、つぎのウィンドウCでは、ツールバーがずれています。<br>ini読み込み時と、ini書き込み時ではコマンド数に加えてボタン番号も異なることになります。<br>こうなると手動で直す羽目になります。<br></div></section>
    <ul><li><section><h1 id=1281>
    <span class="no">[1281]</span>
    <a class="thread-title" href="#1281">Re10:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-26T04:16:35">2010年06月26日 04:16</time></h1>
    <div class="body">まず自分の意見のまとめ。<br>・ツールバー折返のボタン番号<br>384にしておくのがいい<br>・マクロ20-49のアイコン<br>384をはずしてちょっと移動してもらう<br>49までは追加する<br>マクロ共有ボタン場所・設定を追加しておく(マクロ50用なので実際には利用されない)<br>・プラグインのボタン番号の内部仕様<br>次からはプラグイン(とマクロのアイコン超過分)だけFuncCodeにしておく<br>・プラグインのボタン番号のini仕様<br>過去のUnicode版との互換性は放棄して上記内部コードで保持すれば今後の分は互換性保てるだろう派<br>m_sIdベースにするのもいいかもしれないけど、クラス/関数の依存関係の調査や互換性の検討と末永い保守が必要<br>・プラグインのデフォルトボタン<br>固定さえされていればどこでもいい。という結論で合意と理解。<br><br>ということで、syatさん提案のマクロアイコンのトリックコードの実装を追加した修正パッチを追加しました。<br>ただ提案と違い50個まではアイコンを確保してあります。<br>indexの代わりにコマンド番号にするので、前回のをA案として、これの基本仕様をB案とします。<br>Uchiさんのパッチと比較検討してみてください。<br><br>また今の仕組みだと、プラグインを削除→再登録した場合は、プラグイン番号が変更になり、カスタムメニューなどで使えません。<br>(これは、私のパッチでもUchiさんのパッチでも発生します)<br>これは、共通設定画面で削除待ちのものを復活させるように同じ番号に戻せば改善されると思います。<br><br>*意思を確認したい項目<br>To:主にsyatさん<br>プラグインのボタン番号のrev1778との互換性について。やっぱり必要でしょうか。<br>Uchiさんはボタン番号をずらすコードを提示してくれています。私は説明のとおりの理由で複雑なのであきらめてほしい派です。<br><br>To:Uchiさん<br>私の見落としでなければ、0初期化されないバグは IOProfileData内 のretがfalseになったときの事です。<br><br>*要調査<br>プラグインのフォルダをコピーして同じID文字列のままプラグインの登録をしようとした場合。<br>(Uchiさんパッチが採用されたとして)プラグインIDが数字か/\が含まれていたらどうなるか。<br>DLLSHAREに登録した後にplugin.defのIDを書き換えるまたは、プラグインのサブディレクトリの中身を入れかえるとどうなるか。<br>sakuraw.iniを「書き換えて」同じIDかフォルダを指定した場合<br>　最後のは自業自得だけど、同じプラグインを設定違いで2つ使いたい。そうだsakuraw.iniを書き換えよう。という発想はありえるとおもう。<br></div></section>
    <ul><li><section><h1 id=1283>
    <span class="no">[1283]</span>
    <a class="thread-title" href="#1283">Re11:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-26T15:13:09">2010年06月26日 15:13</time></h1>
    <div class="body">▼ もかさん<br>&gt; ①「折り返し」のツールバー上の番号の変更<br>&gt;でも、現在の仕様とUchiさんのパッチだけでは、将来 MAX_TOOLBARBUTTONSを増やしたいときに「今回と全く同じ」問題が発生します。<br>「折り返し」と「プラグインのデフォルトアイコン」を移動したのは、「外部マクロ」のICONを素直に延長した中にぶつかった為に移動したものです。<br>将来、MAX_TOOLBARBUTTONSを増やしても、現在位置416固定で問題はないはずです。<br>プラグインコマンドは必ず移動することになると思いますが。<br><br>&gt;iniも、「バージョンアップで書き換えれば問題ない」といいますが、iniのANSI -&gt; Unicode の移行など複数のシチュエーションでもボタン番号が正しく設定されますか？<br>そうですね、そこまでは考慮していませんでした。<br>共有変数バージョンだけではなく、リリースバージョンのチェックも入れれば問題なく可能になると思います。<br><br>&gt;②プラグイン<br>&gt;Uchiさんのpatchでは、MAX_TOOLBARBUTTONS+1からCShareDataでプラグインにボタン番号を振るようになっています。<br>&gt;上記のm_tbMyButton.size() == MAX_TOOLBARBUTTONS+1 の制限がプラグインのロード直前に守られていれば、期待した動作になります。<br>&gt;コード上で一切チェックしていない制限であり、たまたまおかしくない状態ではないでしょうか。<br>そうですね、チェックコードを入れた方がいいようです。<br>&gt;しかし以前に書いたような、自動折返候補のような「特殊ボタン番号を追加したい」ということをすれば、またアイコンをつぶすか何かしないといけません。<br>まったくその通りです。<br>&gt;syatさん提案の「マクロのアイコンがないものもアイコンを共有してボタンに追加できるようにしよう」のようなものが増えた瞬間に破綻します。<br>おっしゃる通りです。<br>&gt;色々考えた結果、やはりCShareData_IOでPlugin関連のコードを実行すること自体が、保守・整合性・依存性などを考えたときに、リスクが高いとおもます。<br>そのリスクはあると思います。がそれよりも文字列化のほうがメリットが大きいと思っています。<br>プラグインの読み込みをプラグインのIO部ではなくツールバーのIO部で行っている理由は、そのあたりを将来的に、如何にかしなければと思い其処においてあります（ツールバーでした使用しないというのもありますが）。<br></div></section>
    <ul><li><section><h1 id=1284>
    <span class="no">[1284]</span>
    <a class="thread-title" href="#1284">Re12:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-26T15:14:00">2010年06月26日 15:14</time></h1>
    <div class="body">（つづき）<br>&gt;まず、プラグインがツールバーに設定されているとします。<br>&gt;ウィンドウAを開いて新しいプラグインを読み込んで、ウィンドウBを開いてプラグインをツールバーに登録します。<br>&gt;そのプラグインが、元からあるものより先に登録される場合(たぶんm_sId順)、つぎのウィンドウCでは、ツールバーがずれています。<br>&gt;ini読み込み時と、ini書き込み時ではコマンド数に加えてボタン番号も異なることになります。<br>&gt;こうなると手動で直す羽目になります。<br>私の考えでは、この問題は、プラグインの定義時に初期化を行うことで解決する問題だと認識しています。<br><br>&gt;*要調査<br>&gt;プラグインのフォルダをコピーして同じID文字列のままプラグインの登録をしようとした場合。<br>どちらのプラグインを使用するか尋ねてきます。で片方の登録となっていると思いますが？<br>&gt;(Uchiさんパッチが採用されたとして)プラグインIDが数字か/\が含まれていたらどうなるか。<br>&gt;DLLSHAREに登録した後にplugin.defのIDを書き換えるまたは、プラグインのサブディレクトリの中身を入れかえるとどうなるか。<br>&gt;sakuraw.iniを「書き換えて」同じIDかフォルダを指定した場合<br>&gt;　最後のは自業自得だけど、同じプラグインを設定違いで2つ使いたい。そうだsakuraw.iniを書き換えよう。という発想はありえるとおもう。<br>プラグインを「プラグインID」で認識していますが「フォルダ名」で認識した方がいいという意見でしょうか？<br><br>追記<br>私としては、<br>PatchUnicode#3020889<br>は、互換性がないということに対する緊急パッチのつもりで出しています。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=1562>
    <span class="no">[1562]</span>
    <a class="thread-title" href="#1562">-</a>
    <span class="author">れい</span>
    <time datetime="2011-05-21T01:05:02">2011年05月21日 01:05</time></h1>
    <div class="body">-</div></section>
    </li></ul></li><li><section><h1 id=1279>
    <span class="no">[1279]</span>
    <a class="thread-title" href="#1279">Re7:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-25T04:53:13">2010年06月25日 04:53</time></h1>
    <div class="body">&gt;「折り返し」の本当の位置は、F_PLUGCOMMAND_FIRSTではなくて、F_TOOLBERWRAPの場所でした。<br>訂正。説明がおかしかったです、正しくは、<br>「プラグインのデフォルトアイコン」の位置は、F_PLUGCOMMAND_FIRST ではなくて、F_TOOLBERWRAPの場所<br>です。<br></div></section>
    </li></ul></li></ul></li></ul></li></ul></li><li><section><h1 id=1276>
    <span class="no">[1276]</span>
    <a class="thread-title" href="#1276">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">syat</span>
    <time datetime="2010-06-25T00:48:46">2010年06月25日 00:48</time></h1>
    <div class="body">▼ anonymousさん<br>&gt; UNICODE版てβ版ですよね<br>プラグインだけだったらそれでもいいんですが、折返しはANSI版からある機能です。<br></div></section>
    </li></ul></li><li><section><h1 id=1282>
    <span class="no">[1282]</span>
    <a class="thread-title" href="#1282">Re2:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">syat</span>
    <time datetime="2010-06-26T13:54:15">2010年06月26日 13:54</time></h1>
    <div class="body">何だか混乱してきました。私個人が折返しを使っているとかプラグインコマンドの番号を変えてほしくないとか、そんなことは全然問題ではありません。実際、最新ビルドに差し替えてアイコンがずれていることに気付いた私はすぐにツールバー設定を直してそのまま使っています。<br>ツールバー折返しを使っていた人が新しいバイナリに差し替えて起動すると、折返しのアイコンが外部マクロ３１に化けているのです。<br>そのことへの対応は、①化けないように修正する、②仕様変更とする、のどちらかでしょう。<br>私は修正を要求しているわけではなくて、このことが議論されてなく気付かれてもいないのでは？とおもって[1268]のコメントを書きました。<br>----<br>外部マクロのアイコンが連続している方がプログラム的に自然だから、悪いけど折返しとかプラグインコマンド使ってる人はツールバー直してね、でも全然ありだと思います。<br>極力変えない方がみんな幸せだと思うけど。<br>----<br>INIにプラグインIDを書くとか、プラグインコマンドの追加アイコンの問題とかありますが、別トピックで話しません？<br></div></section>
    <ul><li><section><h1 id=1285>
    <span class="no">[1285]</span>
    <a class="thread-title" href="#1285">Re3:Commit報告(Chg) ICONをすべてのコマンドに割り当てる</a>
    <span class="author">もか</span>
    <time datetime="2010-06-26T18:14:22">2010年06月26日 18:14</time></h1>
    <div class="body">&gt;折返しのアイコンが外部マクロ３１に化けているのです。<br>&gt;私は修正を要求しているわけではなくて、このことが議論されてなく気付かれてもいないのでは？とおもって[1268]のコメントを書きました。<br>実際、パッチと変更コメントを読んだのに、気が付いていませんでしたので助かりました。<br><br>&gt;INIにプラグインIDを書くとか、プラグインコマンドの追加アイコンの問題とかありますが、別トピックで話しません？<br>私は了解です。<br><br>ボタン番号を直すならプラグインのボタン番号の振り方自体も変だと突っ込みを入れて、その時点で理解したことを並べただけなので、混乱させてしまいました。<br>このスレッドは一度閉じで、それぞれ新しくしましょう。<br>議題と分類をどうするのかは、どなたかにお任せします。<br></div></section>
    <ul><li><section><h1 id=1286>
    <span class="no">[1286]</span>
    <a class="thread-title" href="#1286">折返しについて</a>
    <span class="author">syat</span>
    <time datetime="2010-06-27T00:27:50">2010年06月27日 00:27</time></h1>
    <div class="body">ようやく&gt;&gt;unicode:1269でUchiさんのおっしゃりたかったことがわかりかけてきた気がします。<br>アイコンの段追加はプラグイン的に無問題と書きましたが、ツールバーに登録してしまっているものは化けてしまうのですね。<br>プラグインコマンドのツールバー登録についてはみなさんが調査・指摘いただいたように、プラグインIDのようなものを付けてINIに書くしかないようです。<br><br>折返しの件ですが、プラグインコマンドのことを除いて考えれば外部マクロを2行にしてもとくに問題ないと思うのです。<br>もしそれでUchiさんMocaさんに異論がないようでしたら、私のほうでパッチ作ったのでアップしますがいかがでしょうか。<br></div></section>
    <ul><li><section><h1 id=1287>
    <span class="no">[1287]</span>
    <a class="thread-title" href="#1287">RE: 折返しについて</a>
    <span class="author">もか</span>
    <time datetime="2010-06-27T01:18:32">2010年06月27日 01:18</time></h1>
    <div class="body">&gt;折返しの件ですが、プラグインコマンドのことを除いて考えれば外部マクロを2行にしてもとくに問題ないと思うのです。<br>&gt;もしそれでUchiさんMocaさんに異論がないようでしたら、私のほうでパッチ作ったのでアップしますがいかがでしょうか。<br>パッチであれば、(読み手がコードと仕様を理解できていれば)問題点と修正点がわかりやすいと思います。<br>アップしていただけると助かります。<br></div></section>
    <ul><li><section><h1 id=1288>
    <span class="no">[1288]</span>
    <a class="thread-title" href="#1288">Re2: 折返しについて</a>
    <span class="author">syat</span>
    <time datetime="2010-06-27T07:29:55">2010年06月27日 07:29</time></h1>
    <div class="body">ツールバー折返しの番号ずれ対応パッチをアップしました。<br>PatchUnicode:3021860<br></div></section>
    <ul><li><section><h1 id=1289>
    <span class="no">[1289]</span>
    <a class="thread-title" href="#1289">Re3: 折返しについて</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-27T08:29:34">2010年06月27日 08:29</time></h1>
    <div class="body">▼ syatさん<br>&gt; ツールバー折返しの番号ずれ対応パッチをアップしました。<br>&gt; PatchUnicode:3021860<br>私としては将来に禍根を残すことは反対なのですが、<br>どうしても移動したくないということならば、仕方がないと思います。<br>ただ、このパッチを2点ほど、変更して欲しいことがあります。<br>1点目、12段目「外部マクロ」と「折返」との間をなくしてほしい、<br>その間を、変な機能で使用されるのを防ぐためです。<br>2点目は、どうせプラグインデフォルトアイコンを移動するならば、<br>もっと別のところに移動してほしい<br>（外部マクロの領域を乱すのは出来るだけ減らしたい）。<br><br>調査してほしいこと<br>数年前(Unicode版が出ていなかった時期)、もかさんが配置したような感じで<br>作成したことが合いますが、その際、CMenuDrawer.cpp以外に2,3箇所修正した記憶があります。<br>ソースを検索しての修正ではなく、デバッグで修正したもので、大変手間取り、かつ、ほかにもありそうなので<br>方針転換した記憶があります。<br>パッチなどは紛失しているので、正確なことはいえないし、ANSI版のことでもあり、古いことでもあるので<br>現在のUnicode版に対しては、関係がないかもしれませんが、確認をよろしくお願いしたいと思います。</div></section>
    <ul><li><section><h1 id=1290>
    <span class="no">[1290]</span>
    <a class="thread-title" href="#1290">Re4: 折返しについて</a>
    <span class="author">もか</span>
    <time datetime="2010-06-27T21:50:56">2010年06月27日 21:50</time></h1>
    <div class="body">重要そうなことを上に書きます。<br>&gt;調査してほしいこと<br>&gt;数年前(Unicode版が出ていなかった時期)、もかさんが配置したような感じで<br>&gt;作成したことが合いますが、その際、CMenuDrawer.cpp以外に2,3箇所修正した記憶があります。<br>&gt;&gt;unicode:1280<br>で書いた通りなのだけど、共通設定の折り返し追加ボタンのところを直さないとだめです。<br>(B案 skrw_toolbarno_b_v0_1.zip パッチ参照。ただしパッチはTOOLB＜E＞RWRAPになっている)<br>CPropComToolbar.cpp<br>-&#9;&#9;&#9;&#9;&#9;nIndex1 = ::Listbox_INSERTDATA( hwndResList, nIndex1, MAX_TOOLBARBUTTONS );<br>+&#9;&#9;&#9;&#9;&#9;nIndex1 = ::Listbox_INSERTDATA( hwndResList, nIndex1, CMenuDrawer::TOOLBAR_BUTTON_F_TOOLBARWRA<br>P );<br>CMenuDrawer.h<br>+static const int TOOLBAR_BUTTON_F_TOOLBARWRAP = 384;<br>rev1779ではこの値に合うように折返を移動しているので問題ないです。<br>rev1779のままMAX_TOOLBARBUTTONSだけを変更した場合もここはおかしくなるとおもいます。<br>もう1, 2か所はまだ発見できていません。<br>確証はないけど trunk rev1198 のryojiさんの作業などで修正されたのではないでしょうか。<br><br>&gt;ただ、このパッチを2点ほど、変更して欲しいことがあります。<br>&gt;1点目、12段目「外部マクロ」と「折返」との間をなくしてほしい、<br>&gt;その間を、変な機能で使用されるのを防ぐためです。<br>私も最初そう思いました。中途半端に空いているとそこにアイコンを追加しにくいです。<br>ただ、マクロ3/4段目を13段/14段に25ずつ追加してビットマップの見た目を2次元で見ればおかしくないです。<br>逆に詰めて、違う機能群を14段目にいれたあとマクロ50-を15段目にいれると大変残念な結果になります。<br>私は将来の追加方針(どこの空きを何用にするか)さえ明確になっていれば別にどちらでもかまいません。<br>#マクロが50じゃ全然足りないみたいなのを見たことがあるので<br><br>*動作以外の話<br>m_nToolBarButtonIdxArr[MAX_TOOLBARBUTTON<br>S]; 以外で利用している(由来は反対みたいだけど)のが誤解の原因の一つだとおもいました。<br>ボタンとアイコンとツールバーの配列は違うんだとソースコードで主張したいです。<br>変更例：<br>MAX_TOOLBARBUTTON_X =&gt; MAX_TOOLBAR_ICON_X<br>MAX_TOOLBARBUTTON_Y =&gt; MAX_TOOLBAR_ICON_Y<br>追加定義で MAX_TOOLBARITEM = 1000 とか 512 とかにしておく。<br>m_nToolBarButtonIdxArr[MAX_TOOLBARBUTTON<br>S] =&gt; m_nToolBarButtonIdxArr[MAX_TOOLBARITEM]<br>m_nToolBarButtonIdxArr関連の MAX_TOOLBARBUTTON(3か所) =&gt; MAX_TOOLBARITEM か _countof<br>その他の MAX_TOOLBARBUTTONS =&gt; 利用箇所は変更でなくなるのでMAX_TOOLBARBUTTONS自体をコメントアウトしてもいいかも<br>ANSI版には m_tbMyButton[MAX_TOOLBARBUTTONS+1] だけ残ると思います。<br></div></section>
    </li><li><section><h1 id=1291>
    <span class="no">[1291]</span>
    <a class="thread-title" href="#1291">Re4: 折返しについて</a>
    <span class="author">syat</span>
    <time datetime="2010-06-28T01:30:43">2010年06月28日 01:30</time></h1>
    <div class="body">▼ Uchiさん<br>禍根と言われますが、正直なところUchiさんがマクロアイコンの連続を重要視している理由がいまだにわかりません。<br>おっしゃるように直すのは構いません。もかさんのv0_0パッチのようになるでしょう。ところで49番の後ろに空きができますが、ここは外部マクロと関係ない機能で使ってもよいのですか？　使ったとして、仮にマクロが100個に増えたらまた移動するという話になるのでしょうか？<br>それならあらかじめ100個分の領域を予約しておくか、いっそ外部マクロが新しい行に移動していけばよいじゃないですか？（もちろん冗談です）<br><br>アイコンBMPなんて開発者と差替アイコン作者しか気にしないのだし、ある程度わかりやすければ実装者のセンス次第でいいと思うんですけどね。<br></div></section>
    <ul><li><section><h1 id=1292>
    <span class="no">[1292]</span>
    <a class="thread-title" href="#1292">Re5: 折返しについて</a>
    <span class="author">Uchi</span>
    <time datetime="2010-06-28T02:32:49">2010年06月28日 02:32</time></h1>
    <div class="body">▼ syatさん<br>&gt; ▼ Uchiさん<br>&gt; 禍根と言われますが、正直なところUchiさんがマクロアイコンの連続を重要視している理由がいまだにわかりません。<br>はっきりいって、中間に折り返しを入れた形で作成し、失敗しているからです。<br><br>&gt; おっしゃるように直すのは構いません。もかさんのv0_0パッチのようになるでしょう。ところで49番の後ろに空きができますが、ここは外部マクロと関係ない機能で使ってもよいのですか？　使ったとして、仮にマクロが100個に増えたらまた移動するという話になるのでしょうか？<br>&gt; それならあらかじめ100個分の領域を予約しておくか、いっそ外部マクロが新しい行に移動していけばよいじゃないですか？（もちろん冗談です）<br>50までという形でいいかなと思っています。<br>その理由は、syatさん作成のプラグインがあるからです。<br>多くのマクロを使うのであれば、それをまとめた形のマクロセットみたいな形でプラグインが作成できると思います。<br>たとえば、マクロ登録用のプラグインがあれば一つで99個のマクロが登録できるでしょう。<br><br>&gt; アイコンBMPなんて開発者と差替アイコン作者しか気にしないのだし、ある程度わかりやすければ実装者のセンス次第でいいと思うんですけどね。<br>まったくその通りです。<br>つまり私のセンスがなかったおっしゃるわけですね。</div></section>
    <ul><li><section><h1 id=1293>
    <span class="no">[1293]</span>
    <a class="thread-title" href="#1293">Re6: 折返しについて</a>
    <span class="author">syat</span>
    <time datetime="2010-06-28T06:49:43">2010年06月28日 06:49</time></h1>
    <div class="body">▼ Uchiさん<br>&gt; つまり私のセンスがなかったおっしゃるわけですね。<br>ごめんなさい。そういう意図はなかったです。<br>ひょっとするとUchiさんが引っかかっているのは同種のアイコンがきちんと連続してないことの気持ち悪さなのでは？という推測で話してました。<br>もしカスタムメニューが30個になったら、右にあるタブ系のアイコンが移動することになるのかなぁ…とかが私の不安でしたが、杞憂だったみたいです。<br><br>修正パッチは今日の夜になるかもしれませんが作ったらアップします。<br>Uchiさんもかさん、長らくご対応ありがとうございました。<br></div></section>
    <ul><li><section><h1 id=1294>
    <span class="no">[1294]</span>
    <a class="thread-title" href="#1294">Re7: 折返しについて</a>
    <span class="author">syat</span>
    <time datetime="2010-06-29T00:43:07">2010年06月29日 00:43</time></h1>
    <div class="body">パッチを更新しました。</div></section>
    <ul><li><section><h1 id=1302>
    <span class="no">[1302]</span>
    <a class="thread-title" href="#1302">Commit報告（Fix）:ツールバー折返しの番号ずれ対応</a>
    <span class="author">syat</span>
    <time datetime="2010-07-04T22:17:20">2010年07月04日 22:17</time></h1>
    <div class="body">rev1780でコミットしました</div></section>
    </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></body></html>